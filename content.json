{"meta":{"title":"나의 첫번째 블로그","subtitle":"내로운 길도 화이팅","description":"","author":"John Doe","url":"https://sallyzmk.github.io","root":"/"},"pages":[{"title":"","date":"2022-06-23T03:40:06.449Z","updated":"2022-06-23T03:35:22.009Z","comments":true,"path":"images/R_7.html","permalink":"https://sallyzmk.github.io/images/R_7.html","excerpt":"","text":"R을 이용한 공공데이터 분석_제7장 // Pandoc 2.9 adds attributes on both header and div. We remove the former (to // be compatible with the behavior of Pandoc < 2.8). document.addEventListener('DOMContentLoaded', function(e) { var hs = document.querySelectorAll(\"div.section[class*='level'] > :first-child\"); var i, h, a; for (i = 0; i < hs.length; i++) { h = hs[i]; if (!/^h[1-6]$/i.test(h.tagName)) continue; // it should be a header h1-h6 a = h.attributes; while (a.length > 0) h.removeAttribute(a[0].name); } }); /*! jQuery v3.6.0 | (c) OpenJS Foundation and other contributors | jquery.org/license */ !function(e,t){\"use strict\";\"object\"==typeof module&&\"object\"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error(\"jQuery requires a window with a document\");return t(e)}:t(e)}(\"undefined\"!=typeof window?window:this,function(C,e){\"use strict\";var t=[],r=Object.getPrototypeOf,s=t.slice,g=t.flat?function(e){return t.flat.call(e)}:function(e){return t.concat.apply([],e)},u=t.push,i=t.indexOf,n={},o=n.toString,v=n.hasOwnProperty,a=v.toString,l=a.call(Object),y={},m=function(e){return\"function\"==typeof e&&\"number\"!=typeof e.nodeType&&\"function\"!=typeof e.item},x=function(e){return null!=e&&e===e.window},E=C.document,c={type:!0,src:!0,nonce:!0,noModule:!0};function b(e,t,n){var r,i,o=(n=n||E).createElement(\"script\");if(o.text=e,t)for(r in c)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function w(e){return null==e?e+\"\":\"object\"==typeof e||\"function\"==typeof e?n[o.call(e)]||\"object\":typeof e}var f=\"3.6.0\",S=function(e,t){return new S.fn.init(e,t)};function p(e){var t=!!e&&\"length\"in e&&e.length,n=w(e);return!m(e)&&!x(e)&&(\"array\"===n||0===t||\"number\"==typeof t&&0-1,f(u,function(e,t){t.cache=\"_\"+e,t.props.alpha={idx:3,type:\"percent\",def:1}}),l.fn=e.extend(l.prototype,{parse:function(n,o,r,h){if(n===t)return this._rgba=[null,null,null,null],this;(n.jquery||n.nodeType)&&(n=e(n).css(o),o=t);var d=this,c=e.type(n),p=this._rgba=[];return o!==t&&(n=[n,o,r,h],c=\"array\"),\"string\"===c?this.parse(s(n)||a._default):\"array\"===c?(f(u.rgba.props,function(e,t){p[t.idx]=i(n[t.idx],t)}),this):\"object\"===c?(n instanceof l?f(u,function(e,t){n[t.cache]&&(d[t.cache]=n[t.cache].slice())}):f(u,function(t,s){var a=s.cache;f(s.props,function(e,t){if(!d[a]&&s.to){if(\"alpha\"===e||null==n[e])return;d[a]=s.to(d._rgba)}d[a][t.idx]=i(n[e],t,!0)}),d[a]&&0>e.inArray(null,d[a].slice(0,3))&&(d[a][3]=1,s.from&&(d._rgba=s.from(d[a])))}),this):t},is:function(e){var i=l(e),s=!0,n=this;return f(u,function(e,a){var o,r=i[a.cache];return r&&(o=n[a.cache]||a.to&&a.to(n._rgba)||[],f(a.props,function(e,i){return null!=r[i.idx]?s=r[i.idx]===o[i.idx]:t})),s}),s},_space:function(){var e=[],t=this;return f(u,function(i,s){t[s.cache]&&e.push(i)}),e.pop()},transition:function(e,t){var s=l(e),n=s._space(),a=u[n],o=0===this.alpha()?l(\"transparent\"):this,r=o[a.cache]||a.to(o._rgba),h=r.slice();return s=s[a.cache],f(a.props,function(e,n){var a=n.idx,o=r[a],l=s[a],u=d[n.type]||{};null!==l&&(null===o?h[a]=l:(u.mod&&(l-o>u.mod/2?o+=u.mod:o-l>u.mod/2&&(o-=u.mod)),h[a]=i((l-o)*t+o,n)))}),this[n](h)},blend:function(t){if(1===this._rgba[3])return this;var i=this._rgba.slice(),s=i.pop(),n=l(t)._rgba;return l(e.map(i,function(e,t){return(1-s)*n[t]+s*e}))},toRgbaString:function(){var t=\"rgba(\",i=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===i[3]&&(i.pop(),t=\"rgb(\"),t+i.join()+\")\"},toHslaString:function(){var t=\"hsla(\",i=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+\"%\"),e});return 1===i[3]&&(i.pop(),t=\"hsl(\"),t+i.join()+\")\"},toHexString:function(t){var i=this._rgba.slice(),s=i.pop();return t&&i.push(~~(255*s)),\"#\"+e.map(i,function(e){return e=(e||0).toString(16),1===e.length?\"0\"+e:e}).join(\"\")},toString:function(){return 0===this._rgba[3]?\"transparent\":this.toRgbaString()}}),l.fn.parse.prototype=l.fn,u.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,i,s=e[0]/255,n=e[1]/255,a=e[2]/255,o=e[3],r=Math.max(s,n,a),h=Math.min(s,n,a),l=r-h,u=r+h,d=.5*u;return t=h===r?0:s===r?60*(n-a)/l+360:n===r?60*(a-s)/l+120:60*(s-n)/l+240,i=0===l?0:.5>=d?l/u:l/(2-u),[Math.round(t)%360,i,d,null==o?1:o]},u.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,i=e[1],s=e[2],a=e[3],o=.5>=s?s*(1+i):s+i-s*i,r=2*s-o;return[Math.round(255*n(r,o,t+1/3)),Math.round(255*n(r,o,t)),Math.round(255*n(r,o,t-1/3)),a]},f(u,function(s,n){var a=n.props,o=n.cache,h=n.to,u=n.from;l.fn[s]=function(s){if(h&&!this[o]&&(this[o]=h(this._rgba)),s===t)return this[o].slice();var n,r=e.type(s),d=\"array\"===r||\"object\"===r?s:arguments,c=this[o].slice();return f(a,function(e,t){var s=d[\"object\"===r?e:t.idx];null==s&&(s=c[t.idx]),c[t.idx]=i(s,t)}),u?(n=l(u(c)),n[o]=c,n):l(c)},f(a,function(t,i){l.fn[t]||(l.fn[t]=function(n){var a,o=e.type(n),h=\"alpha\"===t?this._hsla?\"hsla\":\"rgba\":s,l=this[h](),u=l[i.idx];return\"undefined\"===o?u:(\"function\"===o&&(n=n.call(this,u),o=e.type(n)),null==n&&i.empty?this:(\"string\"===o&&(a=r.exec(n),a&&(n=u+parseFloat(a[2])*(\"+\"===a[1]?1:-1))),l[i.idx]=n,this[h](l)))})})}),l.hook=function(t){var i=t.split(\" \");f(i,function(t,i){e.cssHooks[i]={set:function(t,n){var a,o,r=\"\";if(\"transparent\"!==n&&(\"string\"!==e.type(n)||(a=s(n)))){if(n=l(a||n),!c.rgba&&1!==n._rgba[3]){for(o=\"backgroundColor\"===i?t.parentNode:t;(\"\"===r||\"transparent\"===r)&&o&&o.style;)try{r=e.css(o,\"backgroundColor\"),o=o.parentNode}catch(h){}n=n.blend(r&&\"transparent\"!==r?r:\"_default\")}n=n.toRgbaString()}try{t.style[i]=n}catch(h){}}},e.fx.step[i]=function(t){t.colorInit||(t.start=l(t.elem,i),t.end=l(t.end),t.colorInit=!0),e.cssHooks[i].set(t.elem,t.start.transition(t.end,t.pos))}})},l.hook(o),e.cssHooks.borderColor={expand:function(e){var t={};return f([\"Top\",\"Right\",\"Bottom\",\"Left\"],function(i,s){t[\"border\"+s+\"Color\"]=e}),t}},a=e.Color.names={aqua:\"#00ffff\",black:\"#000000\",blue:\"#0000ff\",fuchsia:\"#ff00ff\",gray:\"#808080\",green:\"#008000\",lime:\"#00ff00\",maroon:\"#800000\",navy:\"#000080\",olive:\"#808000\",purple:\"#800080\",red:\"#ff0000\",silver:\"#c0c0c0\",teal:\"#008080\",white:\"#ffffff\",yellow:\"#ffff00\",transparent:[null,null,null,0],_default:\"#ffffff\"}}(p),function(){function t(t){var i,s,n=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,a={};if(n&&n.length&&n[0]&&n[n[0]])for(s=n.length;s--;)i=n[s],\"string\"==typeof n[i]&&(a[e.camelCase(i)]=n[i]);else for(i in n)\"string\"==typeof n[i]&&(a[i]=n[i]);return a}function i(t,i){var s,a,o={};for(s in i)a=i[s],t[s]!==a&&(n[s]||(e.fx.step[s]||!isNaN(parseFloat(a)))&&(o[s]=a));return o}var s=[\"add\",\"remove\",\"toggle\"],n={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each([\"borderLeftStyle\",\"borderRightStyle\",\"borderBottomStyle\",\"borderTopStyle\"],function(t,i){e.fx.step[i]=function(e){(\"none\"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(p.style(e.elem,i,e.end),e.setAttr=!0)}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(n,a,o,r){var h=e.speed(a,o,r);return this.queue(function(){var a,o=e(this),r=o.attr(\"class\")||\"\",l=h.children?o.find(\"*\").addBack():o;l=l.map(function(){var i=e(this);return{el:i,start:t(this)}}),a=function(){e.each(s,function(e,t){n[t]&&o[t+\"Class\"](n[t])})},a(),l=l.map(function(){return this.end=t(this.el[0]),this.diff=i(this.start,this.end),this}),o.attr(\"class\",r),l=l.map(function(){var t=this,i=e.Deferred(),s=e.extend({},h,{queue:!1,complete:function(){i.resolve(t)}});return this.el.animate(this.diff,s),i.promise()}),e.when.apply(e,l.get()).done(function(){a(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,\"\")})}),h.complete.call(o[0])})})},e.fn.extend({addClass:function(t){return function(i,s,n,a){return s?e.effects.animateClass.call(this,{add:i},s,n,a):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(i,s,n,a){return arguments.length>1?e.effects.animateClass.call(this,{remove:i},s,n,a):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(t){return function(i,s,n,a,o){return\"boolean\"==typeof s||void 0===s?n?e.effects.animateClass.call(this,s?{add:i}:{remove:i},n,a,o):t.apply(this,arguments):e.effects.animateClass.call(this,{toggle:i},s,n,a)}}(e.fn.toggleClass),switchClass:function(t,i,s,n,a){return e.effects.animateClass.call(this,{add:i,remove:t},s,n,a)}})}(),function(){function t(t,i,s,n){return e.isPlainObject(t)&&(i=t,t=t.effect),t={effect:t},null==i&&(i={}),e.isFunction(i)&&(n=i,s=null,i={}),(\"number\"==typeof i||e.fx.speeds[i])&&(n=s,s=i,i={}),e.isFunction(s)&&(n=s,s=null),i&&e.extend(t,i),s=s||i.duration,t.duration=e.fx.off?0:\"number\"==typeof s?s:s in e.fx.speeds?e.fx.speeds[s]:e.fx.speeds._default,t.complete=n||i.complete,t}function i(t){return!t||\"number\"==typeof t||e.fx.speeds[t]?!0:\"string\"!=typeof t||e.effects.effect[t]?e.isFunction(t)?!0:\"object\"!=typeof t||t.effect?!1:!0:!0}e.extend(e.effects,{version:\"1.11.4\",save:function(e,t){for(var i=0;t.length>i;i++)null!==t[i]&&e.data(c+t[i],e[0].style[t[i]])},restore:function(e,t){var i,s;for(s=0;t.length>s;s++)null!==t[s]&&(i=e.data(c+t[s]),void 0===i&&(i=\"\"),e.css(t[s],i))},setMode:function(e,t){return\"toggle\"===t&&(t=e.is(\":hidden\")?\"show\":\"hide\"),t},getBaseline:function(e,t){var i,s;switch(e[0]){case\"top\":i=0;break;case\"middle\":i=.5;break;case\"bottom\":i=1;break;default:i=e[0]/t.height}switch(e[1]){case\"left\":s=0;break;case\"center\":s=.5;break;case\"right\":s=1;break;default:s=e[1]/t.width}return{x:s,y:i}},createWrapper:function(t){if(t.parent().is(\".ui-effects-wrapper\"))return t.parent();var i={width:t.outerWidth(!0),height:t.outerHeight(!0),\"float\":t.css(\"float\")},s=e(\"\").addClass(\"ui-effects-wrapper\").css({fontSize:\"100%\",background:\"transparent\",border:\"none\",margin:0,padding:0}),n={width:t.width(),height:t.height()},a=document.activeElement;try{a.id}catch(o){a=document.body}return t.wrap(s),(t[0]===a||e.contains(t[0],a))&&e(a).focus(),s=t.parent(),\"static\"===t.css(\"position\")?(s.css({position:\"relative\"}),t.css({position:\"relative\"})):(e.extend(i,{position:t.css(\"position\"),zIndex:t.css(\"z-index\")}),e.each([\"top\",\"left\",\"bottom\",\"right\"],function(e,s){i[s]=t.css(s),isNaN(parseInt(i[s],10))&&(i[s]=\"auto\")}),t.css({position:\"relative\",top:0,left:0,right:\"auto\",bottom:\"auto\"})),t.css(n),s.css(i).show()},removeWrapper:function(t){var i=document.activeElement;return t.parent().is(\".ui-effects-wrapper\")&&(t.parent().replaceWith(t),(t[0]===i||e.contains(t[0],i))&&e(i).focus()),t},setTransition:function(t,i,s,n){return n=n||{},e.each(i,function(e,i){var a=t.cssUnit(i);a[0]>0&&(n[i]=a[0]*s+a[1])}),n}}),e.fn.extend({effect:function(){function i(t){function i(){e.isFunction(a)&&a.call(n[0]),e.isFunction(t)&&t()}var n=e(this),a=s.complete,r=s.mode;(n.is(\":hidden\")?\"hide\"===r:\"show\"===r)?(n[r](),i()):o.call(n[0],s,i)}var s=t.apply(this,arguments),n=s.mode,a=s.queue,o=e.effects.effect[s.effect];return e.fx.off||!o?n?this[n](s.duration,s.complete):this.each(function(){s.complete&&s.complete.call(this)}):a===!1?this.each(i):this.queue(a||\"fx\",i)},show:function(e){return function(s){if(i(s))return e.apply(this,arguments);var n=t.apply(this,arguments);return n.mode=\"show\",this.effect.call(this,n)}}(e.fn.show),hide:function(e){return function(s){if(i(s))return e.apply(this,arguments);var n=t.apply(this,arguments);return n.mode=\"hide\",this.effect.call(this,n)}}(e.fn.hide),toggle:function(e){return function(s){if(i(s)||\"boolean\"==typeof s)return e.apply(this,arguments);var n=t.apply(this,arguments);return n.mode=\"toggle\",this.effect.call(this,n)}}(e.fn.toggle),cssUnit:function(t){var i=this.css(t),s=[];return e.each([\"em\",\"px\",\"%\",\"pt\"],function(e,t){i.indexOf(t)>0&&(s=[parseFloat(i),t])}),s}})}(),function(){var t={};e.each([\"Quad\",\"Cubic\",\"Quart\",\"Quint\",\"Expo\"],function(e,i){t[i]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,i=4;((t=Math.pow(2,--i))-1)/11>e;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,i){e.easing[\"easeIn\"+t]=i,e.easing[\"easeOut\"+t]=function(e){return 1-i(1-e)},e.easing[\"easeInOut\"+t]=function(e){return.5>e?i(2*e)/2:1-i(-2*e+2)/2}})}(),e.effects,e.effects.effect.blind=function(t,i){var s,n,a,o=e(this),r=/up|down|vertical/,h=/up|left|vertical|horizontal/,l=[\"position\",\"top\",\"bottom\",\"left\",\"right\",\"height\",\"width\"],u=e.effects.setMode(o,t.mode||\"hide\"),d=t.direction||\"up\",c=r.test(d),p=c?\"height\":\"width\",f=c?\"top\":\"left\",m=h.test(d),g={},v=\"show\"===u;o.parent().is(\".ui-effects-wrapper\")?e.effects.save(o.parent(),l):e.effects.save(o,l),o.show(),s=e.effects.createWrapper(o).css({overflow:\"hidden\"}),n=s[p](),a=parseFloat(s.css(f))||0,g[p]=v?n:0,m||(o.css(c?\"bottom\":\"right\",0).css(c?\"top\":\"left\",\"auto\").css({position:\"absolute\"}),g[f]=v?a:n+a),v&&(s.css(p,0),m||s.css(f,a+n)),s.animate(g,{duration:t.duration,easing:t.easing,queue:!1,complete:function(){\"hide\"===u&&o.hide(),e.effects.restore(o,l),e.effects.removeWrapper(o),i() }})},e.effects.effect.bounce=function(t,i){var s,n,a,o=e(this),r=[\"position\",\"top\",\"bottom\",\"left\",\"right\",\"height\",\"width\"],h=e.effects.setMode(o,t.mode||\"effect\"),l=\"hide\"===h,u=\"show\"===h,d=t.direction||\"up\",c=t.distance,p=t.times||5,f=2*p+(u||l?1:0),m=t.duration/f,g=t.easing,v=\"up\"===d||\"down\"===d?\"top\":\"left\",y=\"up\"===d||\"left\"===d,b=o.queue(),_=b.length;for((u||l)&&r.push(\"opacity\"),e.effects.save(o,r),o.show(),e.effects.createWrapper(o),c||(c=o[\"top\"===v?\"outerHeight\":\"outerWidth\"]()/3),u&&(a={opacity:1},a[v]=0,o.css(\"opacity\",0).css(v,y?2*-c:2*c).animate(a,m,g)),l&&(c/=Math.pow(2,p-1)),a={},a[v]=0,s=0;p>s;s++)n={},n[v]=(y?\"-=\":\"+=\")+c,o.animate(n,m,g).animate(a,m,g),c=l?2*c:c/2;l&&(n={opacity:0},n[v]=(y?\"-=\":\"+=\")+c,o.animate(n,m,g)),o.queue(function(){l&&o.hide(),e.effects.restore(o,r),e.effects.removeWrapper(o),i()}),_>1&&b.splice.apply(b,[1,0].concat(b.splice(_,f+1))),o.dequeue()},e.effects.effect.clip=function(t,i){var s,n,a,o=e(this),r=[\"position\",\"top\",\"bottom\",\"left\",\"right\",\"height\",\"width\"],h=e.effects.setMode(o,t.mode||\"hide\"),l=\"show\"===h,u=t.direction||\"vertical\",d=\"vertical\"===u,c=d?\"height\":\"width\",p=d?\"top\":\"left\",f={};e.effects.save(o,r),o.show(),s=e.effects.createWrapper(o).css({overflow:\"hidden\"}),n=\"IMG\"===o[0].tagName?s:o,a=n[c](),l&&(n.css(c,0),n.css(p,a/2)),f[c]=l?a:0,f[p]=l?0:a/2,n.animate(f,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){l||o.hide(),e.effects.restore(o,r),e.effects.removeWrapper(o),i()}})},e.effects.effect.drop=function(t,i){var s,n=e(this),a=[\"position\",\"top\",\"bottom\",\"left\",\"right\",\"opacity\",\"height\",\"width\"],o=e.effects.setMode(n,t.mode||\"hide\"),r=\"show\"===o,h=t.direction||\"left\",l=\"up\"===h||\"down\"===h?\"top\":\"left\",u=\"up\"===h||\"left\"===h?\"pos\":\"neg\",d={opacity:r?1:0};e.effects.save(n,a),n.show(),e.effects.createWrapper(n),s=t.distance||n[\"top\"===l?\"outerHeight\":\"outerWidth\"](!0)/2,r&&n.css(\"opacity\",0).css(l,\"pos\"===u?-s:s),d[l]=(r?\"pos\"===u?\"+=\":\"-=\":\"pos\"===u?\"-=\":\"+=\")+s,n.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){\"hide\"===o&&n.hide(),e.effects.restore(n,a),e.effects.removeWrapper(n),i()}})},e.effects.effect.explode=function(t,i){function s(){b.push(this),b.length===d*c&&n()}function n(){p.css({visibility:\"visible\"}),e(b).remove(),m||p.hide(),i()}var a,o,r,h,l,u,d=t.pieces?Math.round(Math.sqrt(t.pieces)):3,c=d,p=e(this),f=e.effects.setMode(p,t.mode||\"hide\"),m=\"show\"===f,g=p.show().css(\"visibility\",\"hidden\").offset(),v=Math.ceil(p.outerWidth()/c),y=Math.ceil(p.outerHeight()/d),b=[];for(a=0;d>a;a++)for(h=g.top+a*y,u=a-(d-1)/2,o=0;c>o;o++)r=g.left+o*v,l=o-(c-1)/2,p.clone().appendTo(\"body\").wrap(\"\").css({position:\"absolute\",visibility:\"visible\",left:-o*v,top:-a*y}).parent().addClass(\"ui-effects-explode\").css({position:\"absolute\",overflow:\"hidden\",width:v,height:y,left:r+(m?l*v:0),top:h+(m?u*y:0),opacity:m?0:1}).animate({left:r+(m?0:l*v),top:h+(m?0:u*y),opacity:m?1:0},t.duration||500,t.easing,s)},e.effects.effect.fade=function(t,i){var s=e(this),n=e.effects.setMode(s,t.mode||\"toggle\");s.animate({opacity:n},{queue:!1,duration:t.duration,easing:t.easing,complete:i})},e.effects.effect.fold=function(t,i){var s,n,a=e(this),o=[\"position\",\"top\",\"bottom\",\"left\",\"right\",\"height\",\"width\"],r=e.effects.setMode(a,t.mode||\"hide\"),h=\"show\"===r,l=\"hide\"===r,u=t.size||15,d=/([0-9]+)%/.exec(u),c=!!t.horizFirst,p=h!==c,f=p?[\"width\",\"height\"]:[\"height\",\"width\"],m=t.duration/2,g={},v={};e.effects.save(a,o),a.show(),s=e.effects.createWrapper(a).css({overflow:\"hidden\"}),n=p?[s.width(),s.height()]:[s.height(),s.width()],d&&(u=parseInt(d[1],10)/100*n[l?0:1]),h&&s.css(c?{height:0,width:u}:{height:u,width:0}),g[f[0]]=h?n[0]:u,v[f[1]]=h?n[1]:0,s.animate(g,m,t.easing).animate(v,m,t.easing,function(){l&&a.hide(),e.effects.restore(a,o),e.effects.removeWrapper(a),i()})},e.effects.effect.highlight=function(t,i){var s=e(this),n=[\"backgroundImage\",\"backgroundColor\",\"opacity\"],a=e.effects.setMode(s,t.mode||\"show\"),o={backgroundColor:s.css(\"backgroundColor\")};\"hide\"===a&&(o.opacity=0),e.effects.save(s,n),s.show().css({backgroundImage:\"none\",backgroundColor:t.color||\"#ffff99\"}).animate(o,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){\"hide\"===a&&s.hide(),e.effects.restore(s,n),i()}})},e.effects.effect.size=function(t,i){var s,n,a,o=e(this),r=[\"position\",\"top\",\"bottom\",\"left\",\"right\",\"width\",\"height\",\"overflow\",\"opacity\"],h=[\"position\",\"top\",\"bottom\",\"left\",\"right\",\"overflow\",\"opacity\"],l=[\"width\",\"height\",\"overflow\"],u=[\"fontSize\"],d=[\"borderTopWidth\",\"borderBottomWidth\",\"paddingTop\",\"paddingBottom\"],c=[\"borderLeftWidth\",\"borderRightWidth\",\"paddingLeft\",\"paddingRight\"],p=e.effects.setMode(o,t.mode||\"effect\"),f=t.restore||\"effect\"!==p,m=t.scale||\"both\",g=t.origin||[\"middle\",\"center\"],v=o.css(\"position\"),y=f?r:h,b={height:0,width:0,outerHeight:0,outerWidth:0};\"show\"===p&&o.show(),s={height:o.height(),width:o.width(),outerHeight:o.outerHeight(),outerWidth:o.outerWidth()},\"toggle\"===t.mode&&\"show\"===p?(o.from=t.to||b,o.to=t.from||s):(o.from=t.from||(\"show\"===p?b:s),o.to=t.to||(\"hide\"===p?b:s)),a={from:{y:o.from.height/s.height,x:o.from.width/s.width},to:{y:o.to.height/s.height,x:o.to.width/s.width}},(\"box\"===m||\"both\"===m)&&(a.from.y!==a.to.y&&(y=y.concat(d),o.from=e.effects.setTransition(o,d,a.from.y,o.from),o.to=e.effects.setTransition(o,d,a.to.y,o.to)),a.from.x!==a.to.x&&(y=y.concat(c),o.from=e.effects.setTransition(o,c,a.from.x,o.from),o.to=e.effects.setTransition(o,c,a.to.x,o.to))),(\"content\"===m||\"both\"===m)&&a.from.y!==a.to.y&&(y=y.concat(u).concat(l),o.from=e.effects.setTransition(o,u,a.from.y,o.from),o.to=e.effects.setTransition(o,u,a.to.y,o.to)),e.effects.save(o,y),o.show(),e.effects.createWrapper(o),o.css(\"overflow\",\"hidden\").css(o.from),g&&(n=e.effects.getBaseline(g,s),o.from.top=(s.outerHeight-o.outerHeight())*n.y,o.from.left=(s.outerWidth-o.outerWidth())*n.x,o.to.top=(s.outerHeight-o.to.outerHeight)*n.y,o.to.left=(s.outerWidth-o.to.outerWidth)*n.x),o.css(o.from),(\"content\"===m||\"both\"===m)&&(d=d.concat([\"marginTop\",\"marginBottom\"]).concat(u),c=c.concat([\"marginLeft\",\"marginRight\"]),l=r.concat(d).concat(c),o.find(\"*[width]\").each(function(){var i=e(this),s={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};f&&e.effects.save(i,l),i.from={height:s.height*a.from.y,width:s.width*a.from.x,outerHeight:s.outerHeight*a.from.y,outerWidth:s.outerWidth*a.from.x},i.to={height:s.height*a.to.y,width:s.width*a.to.x,outerHeight:s.height*a.to.y,outerWidth:s.width*a.to.x},a.from.y!==a.to.y&&(i.from=e.effects.setTransition(i,d,a.from.y,i.from),i.to=e.effects.setTransition(i,d,a.to.y,i.to)),a.from.x!==a.to.x&&(i.from=e.effects.setTransition(i,c,a.from.x,i.from),i.to=e.effects.setTransition(i,c,a.to.x,i.to)),i.css(i.from),i.animate(i.to,t.duration,t.easing,function(){f&&e.effects.restore(i,l)})})),o.animate(o.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){0===o.to.opacity&&o.css(\"opacity\",o.from.opacity),\"hide\"===p&&o.hide(),e.effects.restore(o,y),f||(\"static\"===v?o.css({position:\"relative\",top:o.to.top,left:o.to.left}):e.each([\"top\",\"left\"],function(e,t){o.css(t,function(t,i){var s=parseInt(i,10),n=e?o.to.left:o.to.top;return\"auto\"===i?n+\"px\":s+n+\"px\"})})),e.effects.removeWrapper(o),i()}})},e.effects.effect.scale=function(t,i){var s=e(this),n=e.extend(!0,{},t),a=e.effects.setMode(s,t.mode||\"effect\"),o=parseInt(t.percent,10)||(0===parseInt(t.percent,10)?0:\"hide\"===a?0:100),r=t.direction||\"both\",h=t.origin,l={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()},u={y:\"horizontal\"!==r?o/100:1,x:\"vertical\"!==r?o/100:1};n.effect=\"size\",n.queue=!1,n.complete=i,\"effect\"!==a&&(n.origin=h||[\"middle\",\"center\"],n.restore=!0),n.from=t.from||(\"show\"===a?{height:0,width:0,outerHeight:0,outerWidth:0}:l),n.to={height:l.height*u.y,width:l.width*u.x,outerHeight:l.outerHeight*u.y,outerWidth:l.outerWidth*u.x},n.fade&&(\"show\"===a&&(n.from.opacity=0,n.to.opacity=1),\"hide\"===a&&(n.from.opacity=1,n.to.opacity=0)),s.effect(n)},e.effects.effect.puff=function(t,i){var s=e(this),n=e.effects.setMode(s,t.mode||\"hide\"),a=\"hide\"===n,o=parseInt(t.percent,10)||150,r=o/100,h={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()};e.extend(t,{effect:\"scale\",queue:!1,fade:!0,mode:n,complete:i,percent:a?o:100,from:a?h:{height:h.height*r,width:h.width*r,outerHeight:h.outerHeight*r,outerWidth:h.outerWidth*r}}),s.effect(t)},e.effects.effect.pulsate=function(t,i){var s,n=e(this),a=e.effects.setMode(n,t.mode||\"show\"),o=\"show\"===a,r=\"hide\"===a,h=o||\"hide\"===a,l=2*(t.times||5)+(h?1:0),u=t.duration/l,d=0,c=n.queue(),p=c.length;for((o||!n.is(\":visible\"))&&(n.css(\"opacity\",0).show(),d=1),s=1;l>s;s++)n.animate({opacity:d},u,t.easing),d=1-d;n.animate({opacity:d},u,t.easing),n.queue(function(){r&&n.hide(),i()}),p>1&&c.splice.apply(c,[1,0].concat(c.splice(p,l+1))),n.dequeue()},e.effects.effect.shake=function(t,i){var s,n=e(this),a=[\"position\",\"top\",\"bottom\",\"left\",\"right\",\"height\",\"width\"],o=e.effects.setMode(n,t.mode||\"effect\"),r=t.direction||\"left\",h=t.distance||20,l=t.times||3,u=2*l+1,d=Math.round(t.duration/u),c=\"up\"===r||\"down\"===r?\"top\":\"left\",p=\"up\"===r||\"left\"===r,f={},m={},g={},v=n.queue(),y=v.length;for(e.effects.save(n,a),n.show(),e.effects.createWrapper(n),f[c]=(p?\"-=\":\"+=\")+h,m[c]=(p?\"+=\":\"-=\")+2*h,g[c]=(p?\"-=\":\"+=\")+2*h,n.animate(f,d,t.easing),s=1;l>s;s++)n.animate(m,d,t.easing).animate(g,d,t.easing);n.animate(m,d,t.easing).animate(f,d/2,t.easing).queue(function(){\"hide\"===o&&n.hide(),e.effects.restore(n,a),e.effects.removeWrapper(n),i()}),y>1&&v.splice.apply(v,[1,0].concat(v.splice(y,u+1))),n.dequeue()},e.effects.effect.slide=function(t,i){var s,n=e(this),a=[\"position\",\"top\",\"bottom\",\"left\",\"right\",\"width\",\"height\"],o=e.effects.setMode(n,t.mode||\"show\"),r=\"show\"===o,h=t.direction||\"left\",l=\"up\"===h||\"down\"===h?\"top\":\"left\",u=\"up\"===h||\"left\"===h,d={};e.effects.save(n,a),n.show(),s=t.distance||n[\"top\"===l?\"outerHeight\":\"outerWidth\"](!0),e.effects.createWrapper(n).css({overflow:\"hidden\"}),r&&n.css(l,u?isNaN(s)?\"-\"+s:-s:s),d[l]=(r?u?\"+=\":\"-=\":u?\"-=\":\"+=\")+s,n.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){\"hide\"===o&&n.hide(),e.effects.restore(n,a),e.effects.removeWrapper(n),i()}})},e.effects.effect.transfer=function(t,i){var s=e(this),n=e(t.to),a=\"fixed\"===n.css(\"position\"),o=e(\"body\"),r=a?o.scrollTop():0,h=a?o.scrollLeft():0,l=n.offset(),u={top:l.top-r,left:l.left-h,height:n.innerHeight(),width:n.innerWidth()},d=s.offset(),c=e(\"\").appendTo(document.body).addClass(t.className).css({top:d.top-r,left:d.left-h,height:s.innerHeight(),width:s.innerWidth(),position:a?\"fixed\":\"absolute\"}).animate(u,t.duration,t.easing,function(){c.remove(),i()})}}); .tocify { width: 20%; max-height: 90%; overflow: auto; margin-left: 2%; position: fixed; border: 1px solid #ccc; border-radius: 6px; } .tocify ul, .tocify li { list-style: none; margin: 0; padding: 0; border: none; line-height: 30px; } .tocify-header { text-indent: 10px; } .tocify-subheader { text-indent: 20px; display: none; } .tocify-subheader li { font-size: 12px; } .tocify-subheader .tocify-subheader { text-indent: 30px; } .tocify-subheader .tocify-subheader .tocify-subheader { text-indent: 40px; } .tocify-subheader .tocify-subheader .tocify-subheader .tocify-subheader { text-indent: 50px; } .tocify-subheader .tocify-subheader .tocify-subheader .tocify-subheader .tocify-subheader { text-indent: 60px; } .tocify .tocify-item > a, .tocify .nav-list .nav-header { margin: 0px; } .tocify .tocify-item a, .tocify .list-group-item { padding: 5px; } .tocify .nav-pills > li { float: none; } /* jquery Tocify - v1.9.1 - 2013-10-22 * http://www.gregfranko.com/jquery.tocify.js/ * Copyright (c) 2013 Greg Franko; Licensed MIT */ // Immediately-Invoked Function Expression (IIFE) [Ben Alman Blog Post](http://benalman.com/news/2010/11/immediately-invoked-function-expression/) that calls another IIFE that contains all of the plugin logic. I used this pattern so that anyone viewing this code would not have to scroll to the bottom of the page to view the local parameters that were passed to the main IIFE. (function(tocify) { // ECMAScript 5 Strict Mode: [John Resig Blog Post](http://ejohn.org/blog/ecmascript-5-strict-mode-json-and-more/) \"use strict\"; // Calls the second IIFE and locally passes in the global jQuery, window, and document objects tocify(window.jQuery, window, document); } // Locally passes in `jQuery`, the `window` object, the `document` object, and an `undefined` variable. The `jQuery`, `window` and `document` objects are passed in locally, to improve performance, since javascript first searches for a variable match within the local variables set before searching the global variables set. All of the global variables are also passed in locally to be minifier friendly. `undefined` can be passed in locally, because it is not a reserved word in JavaScript. (function($, window, document, undefined) { // ECMAScript 5 Strict Mode: [John Resig Blog Post](http://ejohn.org/blog/ecmascript-5-strict-mode-json-and-more/) \"use strict\"; var tocClassName = \"tocify\", tocClass = \".\" + tocClassName, tocFocusClassName = \"tocify-focus\", tocHoverClassName = \"tocify-hover\", hideTocClassName = \"tocify-hide\", hideTocClass = \".\" + hideTocClassName, headerClassName = \"tocify-header\", headerClass = \".\" + headerClassName, subheaderClassName = \"tocify-subheader\", subheaderClass = \".\" + subheaderClassName, itemClassName = \"tocify-item\", itemClass = \".\" + itemClassName, extendPageClassName = \"tocify-extend-page\", extendPageClass = \".\" + extendPageClassName; // Calling the jQueryUI Widget Factory Method $.widget(\"toc.tocify\", { //Plugin version version: \"1.9.1\", // These options will be used as defaults options: { // **context**: Accepts String: Any jQuery selector // The container element that holds all of the elements used to generate the table of contents context: \"body\", // **ignoreSelector**: Accepts String: Any jQuery selector // A selector to any element that would be matched by selectors that you wish to be ignored ignoreSelector: null, // **selectors**: Accepts an Array of Strings: Any jQuery selectors // The element's used to generate the table of contents. The order is very important since it will determine the table of content's nesting structure selectors: \"h1, h2, h3\", // **showAndHide**: Accepts a boolean: true or false // Used to determine if elements should be shown and hidden showAndHide: true, // **showEffect**: Accepts String: \"none\", \"fadeIn\", \"show\", or \"slideDown\" // Used to display any of the table of contents nested items showEffect: \"slideDown\", // **showEffectSpeed**: Accepts Number (milliseconds) or String: \"slow\", \"medium\", or \"fast\" // The time duration of the show animation showEffectSpeed: \"medium\", // **hideEffect**: Accepts String: \"none\", \"fadeOut\", \"hide\", or \"slideUp\" // Used to hide any of the table of contents nested items hideEffect: \"slideUp\", // **hideEffectSpeed**: Accepts Number (milliseconds) or String: \"slow\", \"medium\", or \"fast\" // The time duration of the hide animation hideEffectSpeed: \"medium\", // **smoothScroll**: Accepts a boolean: true or false // Determines if a jQuery animation should be used to scroll to specific table of contents items on the page smoothScroll: true, // **smoothScrollSpeed**: Accepts Number (milliseconds) or String: \"slow\", \"medium\", or \"fast\" // The time duration of the smoothScroll animation smoothScrollSpeed: \"medium\", // **scrollTo**: Accepts Number (pixels) // The amount of space between the top of page and the selected table of contents item after the page has been scrolled scrollTo: 0, // **showAndHideOnScroll**: Accepts a boolean: true or false // Determines if table of contents nested items should be shown and hidden while scrolling showAndHideOnScroll: true, // **highlightOnScroll**: Accepts a boolean: true or false // Determines if table of contents nested items should be highlighted (set to a different color) while scrolling highlightOnScroll: true, // **highlightOffset**: Accepts a number // The offset distance in pixels to trigger the next active table of contents item highlightOffset: 40, // **theme**: Accepts a string: \"bootstrap\", \"jqueryui\", or \"none\" // Determines if Twitter Bootstrap, jQueryUI, or Tocify classes should be added to the table of contents theme: \"bootstrap\", // **extendPage**: Accepts a boolean: true or false // If a user scrolls to the bottom of the page and the page is not tall enough to scroll to the last table of contents item, then the page height is increased extendPage: true, // **extendPageOffset**: Accepts a number: pixels // How close to the bottom of the page a user must scroll before the page is extended extendPageOffset: 100, // **history**: Accepts a boolean: true or false // Adds a hash to the page url to maintain history history: true, // **scrollHistory**: Accepts a boolean: true or false // Adds a hash to the page url, to maintain history, when scrolling to a TOC item scrollHistory: false, // **hashGenerator**: How the hash value (the anchor segment of the URL, following the // # character) will be generated. // // \"compact\" (default) - #CompressesEverythingTogether // \"pretty\" - #looks-like-a-nice-url-and-is-easily-readable // function(text, element){} - Your own hash generation function that accepts the text as an // argument, and returns the hash value. hashGenerator: \"compact\", // **highlightDefault**: Accepts a boolean: true or false // Set's the first TOC item as active if no other TOC item is active. highlightDefault: true }, // _Create // ------- // Constructs the plugin. Only called once. _create: function() { var self = this; self.extendPageScroll = true; // Internal array that keeps track of all TOC items (Helps to recognize if there are duplicate TOC item strings) self.items = []; // Generates the HTML for the dynamic table of contents self._generateToc(); // Adds CSS classes to the newly generated table of contents HTML self._addCSSClasses(); self.webkit = (function() { for (var prop in window) { if (prop) { if (prop.toLowerCase().indexOf(\"webkit\") !== -1) { return true; } } } return false; }()); // Adds jQuery event handlers to the newly generated table of contents self._setEventHandlers(); // Binding to the Window load event to make sure the correct scrollTop is calculated $(window).on(\"load\", function() { // Sets the active TOC item self._setActiveElement(true); // Once all animations on the page are complete, this callback function will be called $(\"html, body\").promise().done(function() { setTimeout(function() { self.extendPageScroll = false; }, 0); }); }); }, // _generateToc // ------------ // Generates the HTML for the dynamic table of contents _generateToc: function() { // _Local variables_ // Stores the plugin context in the self variable var self = this, // All of the HTML tags found within the context provided (i.e. body) that match the top level jQuery selector above firstElem, // Instantiated variable that will store the top level newly created unordered list DOM element ul, ignoreSelector = self.options.ignoreSelector; // Determine the element to start the toc with // get all the top level selectors firstElem = []; var selectors = this.options.selectors.replace(/ /g, \"\").split(\",\"); // find the first set that have at least one non-ignored element for(var i = 0; i < selectors.length; i++) { var foundSelectors = $(this.options.context).find(selectors[i]); for (var s = 0; s < foundSelectors.length; s++) { if (!$(foundSelectors[s]).is(ignoreSelector)) { firstElem = foundSelectors; break; } } if (firstElem.length> 0) break; } if (!firstElem.length) { self.element.addClass(hideTocClassName); return; } self.element.addClass(tocClassName); // Loops through each top level selector firstElem.each(function(index) { //If the element matches the ignoreSelector then we skip it if ($(this).is(ignoreSelector)) { return; } // Creates an unordered list HTML element and adds a dynamic ID and standard class name ul = $(\"\", { \"id\": headerClassName + index, \"class\": headerClassName }). // Appends a top level list item HTML element to the previously created HTML header append(self._nestElements($(this), index)); // Add the created unordered list element to the HTML element calling the plugin self.element.append(ul); // Finds all of the HTML tags between the header and subheader elements $(this).nextUntil(this.nodeName.toLowerCase()).each(function() { // If there are no nested subheader elemements if ($(this).find(self.options.selectors).length === 0) { // Loops through all of the subheader elements $(this).filter(self.options.selectors).each(function() { //If the element matches the ignoreSelector then we skip it if ($(this).is(ignoreSelector)) { return; } self._appendSubheaders.call(this, self, ul); }); } // If there are nested subheader elements else { // Loops through all of the subheader elements $(this).find(self.options.selectors).each(function() { //If the element matches the ignoreSelector then we skip it if ($(this).is(ignoreSelector)) { return; } self._appendSubheaders.call(this, self, ul); }); } }); }); }, _setActiveElement: function(pageload) { var self = this, hash = window.location.hash.substring(1), elem = self.element.find('li[data-unique=\"' + hash + '\"]'); if (hash.length) { // Removes highlighting from all of the list item's self.element.find(\".\" + self.focusClass).removeClass(self.focusClass); // Highlights the current list item that was clicked elem.addClass(self.focusClass); // Triggers the click event on the currently focused TOC item elem.click(); } else { // Removes highlighting from all of the list item's self.element.find(\".\" + self.focusClass).removeClass(self.focusClass); if (!hash.length && pageload && self.options.highlightDefault) { // Highlights the first TOC item if no other items are highlighted self.element.find(itemClass).first().addClass(self.focusClass); } } return self; }, // _nestElements // ------------- // Helps create the table of contents list by appending nested list items _nestElements: function(self, index) { var arr, item, hashValue; arr = $.grep(this.items, function(item) { return item === self.text(); }); // If there is already a duplicate TOC item if (arr.length) { // Adds the current TOC item text and index (for slight randomization) to the internal array this.items.push(self.text() + index); } // If there not a duplicate TOC item else { // Adds the current TOC item text to the internal array this.items.push(self.text()); } hashValue = this._generateHashValue(arr, self, index); // Appends a list item HTML element to the last unordered list HTML element found within the HTML element calling the plugin item = $(\"\", { // Sets a common class name to the list item \"class\": itemClassName, \"data-unique\": hashValue }); if (this.options.theme !== \"bootstrap3\") { item.append($(\"\", { \"html\": self.html() })); } else { item.html(self.html()); } // Adds an HTML anchor tag before the currently traversed HTML element self.before($(\"\", { // Sets a name attribute on the anchor tag to the text of the currently traversed HTML element (also making sure that all whitespace is replaced with an underscore) \"name\": hashValue, \"data-unique\": hashValue })); return item; }, // _generateHashValue // ------------------ // Generates the hash value that will be used to refer to each item. _generateHashValue: function(arr, self, index) { var hashValue = \"\", hashGeneratorOption = this.options.hashGenerator; if (hashGeneratorOption === \"pretty\") { // prettify the text hashValue = self.text().toLowerCase().replace(/\\s/g, \"-\"); // fix double hyphens while (hashValue.indexOf(\"--\") > -1) { hashValue = hashValue.replace(/--/g, \"-\"); } // fix colon-space instances while (hashValue.indexOf(\":-\") > -1) { hashValue = hashValue.replace(/:-/g, \"-\"); } } else if (typeof hashGeneratorOption === \"function\") { // call the function hashValue = hashGeneratorOption(self.text(), self); } else { // compact - the default hashValue = self.text().replace(/\\s/g, \"\"); } // add the index if we need to if (arr.length) { hashValue += \"\" + index; } // return the value return hashValue; }, // _appendElements // --------------- // Helps create the table of contents list by appending subheader elements _appendSubheaders: function(self, ul) { // The current element index var index = $(this).index(self.options.selectors), // Finds the previous header DOM element previousHeader = $(self.options.selectors).eq(index - 1), currentTagName = +$(this).prop(\"tagName\").charAt(1), previousTagName = +previousHeader.prop(\"tagName\").charAt(1), lastSubheader; // If the current header DOM element is smaller than the previous header DOM element or the first subheader if (currentTagName < previousTagName) { // Selects the last unordered list HTML found within the HTML element calling the plugin self.element.find(subheaderClass + \"[data-tag=\" + currentTagName + \"]\").last().append(self._nestElements($(this), index)); } // If the current header DOM element is the same type of header(eg. h4) as the previous header DOM element else if (currentTagName === previousTagName) { ul.find(itemClass).last().after(self._nestElements($(this), index)); } else { // Selects the last unordered list HTML found within the HTML element calling the plugin ul.find(itemClass).last(). // Appends an unorderedList HTML element to the dynamic `unorderedList` variable and sets a common class name after($(\"\", { \"class\": subheaderClassName, \"data-tag\": currentTagName })).next(subheaderClass). // Appends a list item HTML element to the last unordered list HTML element found within the HTML element calling the plugin append(self._nestElements($(this), index)); } }, // _setEventHandlers // ---------------- // Adds jQuery event handlers to the newly generated table of contents _setEventHandlers: function() { // _Local variables_ // Stores the plugin context in the self variable var self = this, // Instantiates a new variable that will be used to hold a specific element's context $self, // Instantiates a new variable that will be used to determine the smoothScroll animation time duration duration; // Event delegation that looks for any clicks on list item elements inside of the HTML element calling the plugin this.element.on(\"click.tocify\", \"li\", function(event) { if (self.options.history) { window.location.hash = $(this).attr(\"data-unique\"); } // Removes highlighting from all of the list item's self.element.find(\".\" + self.focusClass).removeClass(self.focusClass); // Highlights the current list item that was clicked $(this).addClass(self.focusClass); // If the showAndHide option is true if (self.options.showAndHide) { var elem = $('li[data-unique=\"' + $(this).attr(\"data-unique\") + '\"]'); self._triggerShow(elem); } self._scrollTo($(this)); }); // Mouseenter and Mouseleave event handlers for the list item's within the HTML element calling the plugin this.element.find(\"li\").on({ // Mouseenter event handler \"mouseenter.tocify\": function() { // Adds a hover CSS class to the current list item $(this).addClass(self.hoverClass); // Makes sure the cursor is set to the pointer icon $(this).css(\"cursor\", \"pointer\"); }, // Mouseleave event handler \"mouseleave.tocify\": function() { if (self.options.theme !== \"bootstrap\") { // Removes the hover CSS class from the current list item $(this).removeClass(self.hoverClass); } } }); // only attach handler if needed (expensive in IE) if (self.options.extendPage || self.options.highlightOnScroll || self.options.scrollHistory || self.options.showAndHideOnScroll) { // Window scroll event handler $(window).on(\"scroll.tocify\", function() { // Once all animations on the page are complete, this callback function will be called $(\"html, body\").promise().done(function() { // Local variables // Stores how far the user has scrolled var winScrollTop = $(window).scrollTop(), // Stores the height of the window winHeight = $(window).height(), // Stores the height of the document docHeight = $(document).height(), scrollHeight = $(\"body\")[0].scrollHeight, // Instantiates a variable that will be used to hold a selected HTML element elem, lastElem, lastElemOffset, currentElem; if (self.options.extendPage) { // If the user has scrolled to the bottom of the page and the last toc item is not focused if ((self.webkit && winScrollTop >= scrollHeight - winHeight - self.options.extendPageOffset) || (!self.webkit && winHeight + winScrollTop > docHeight - self.options.extendPageOffset)) { if (!$(extendPageClass).length) { lastElem = $('div[data-unique=\"' + $(itemClass).last().attr(\"data-unique\") + '\"]'); if (!lastElem.length) return; // Gets the top offset of the page header that is linked to the last toc item lastElemOffset = lastElem.offset().top; // Appends a div to the bottom of the page and sets the height to the difference of the window scrollTop and the last element's position top offset $(self.options.context).append($(\"\", { \"class\": extendPageClassName, \"height\": Math.abs(lastElemOffset - winScrollTop) + \"px\", \"data-unique\": extendPageClassName })); if (self.extendPageScroll) { currentElem = self.element.find('li.' + self.focusClass); self._scrollTo($('div[data-unique=\"' + currentElem.attr(\"data-unique\") + '\"]')); } } } } // The zero timeout ensures the following code is run after the scroll events setTimeout(function() { // _Local variables_ // Stores the distance to the closest anchor var closestAnchorDistance = null, // Stores the index of the closest anchor closestAnchorIdx = null, // Keeps a reference to all anchors anchors = $(self.options.context).find(\"div[data-unique]\"), anchorText; // Determines the index of the closest anchor anchors.each(function(idx) { var distance = Math.abs(($(this).next().length ? $(this).next() : $(this)).offset().top - winScrollTop - self.options.highlightOffset); if (closestAnchorDistance == null || distance < closestAnchorDistance) { closestAnchorDistance = distance; closestAnchorIdx = idx; } else { return false; } }); anchorText = $(anchors[closestAnchorIdx]).attr(\"data-unique\"); // Stores the list item HTML element that corresponds to the currently traversed anchor tag elem = $('li[data-unique=\"' + anchorText + '\"]'); // If the `highlightOnScroll` option is true and a next element is found if (self.options.highlightOnScroll && elem.length) { // Removes highlighting from all of the list item's self.element.find(\".\" + self.focusClass).removeClass(self.focusClass); // Highlights the corresponding list item elem.addClass(self.focusClass); } if (self.options.scrollHistory) { if (window.location.hash !== \"#\" + anchorText) { window.location.replace(\"#\" + anchorText); } } // If the `showAndHideOnScroll` option is true if (self.options.showAndHideOnScroll && self.options.showAndHide) { self._triggerShow(elem, true); } }, 0); }); }); } }, // Show // ---- // Opens the current sub-header show: function(elem, scroll) { // Stores the plugin context in the `self` variable var self = this, element = elem; // If the sub-header is not already visible if (!elem.is(\":visible\")) { // If the current element does not have any nested subheaders, is not a header, and its parent is not visible if (!elem.find(subheaderClass).length && !elem.parent().is(headerClass) && !elem.parent().is(\":visible\")) { // Sets the current element to all of the subheaders within the current header elem = elem.parents(subheaderClass).add(elem); } // If the current element does not have any nested subheaders and is not a header else if (!elem.children(subheaderClass).length && !elem.parent().is(headerClass)) { // Sets the current element to the closest subheader elem = elem.closest(subheaderClass); } //Determines what jQuery effect to use switch (self.options.showEffect) { //Uses `no effect` case \"none\": elem.show(); break; //Uses the jQuery `show` special effect case \"show\": elem.show(self.options.showEffectSpeed); break; //Uses the jQuery `slideDown` special effect case \"slideDown\": elem.slideDown(self.options.showEffectSpeed); break; //Uses the jQuery `fadeIn` special effect case \"fadeIn\": elem.fadeIn(self.options.showEffectSpeed); break; //If none of the above options were passed, then a `jQueryUI show effect` is expected default: elem.show(); break; } } // If the current subheader parent element is a header if (elem.parent().is(headerClass)) { // Hides all non-active sub-headers self.hide($(subheaderClass).not(elem)); } // If the current subheader parent element is not a header else { // Hides all non-active sub-headers self.hide($(subheaderClass).not(elem.closest(headerClass).find(subheaderClass).not(elem.siblings()))); } // Maintains chainablity return self; }, // Hide // ---- // Closes the current sub-header hide: function(elem) { // Stores the plugin context in the `self` variable var self = this; //Determines what jQuery effect to use switch (self.options.hideEffect) { // Uses `no effect` case \"none\": elem.hide(); break; // Uses the jQuery `hide` special effect case \"hide\": elem.hide(self.options.hideEffectSpeed); break; // Uses the jQuery `slideUp` special effect case \"slideUp\": elem.slideUp(self.options.hideEffectSpeed); break; // Uses the jQuery `fadeOut` special effect case \"fadeOut\": elem.fadeOut(self.options.hideEffectSpeed); break; // If none of the above options were passed, then a `jqueryUI hide effect` is expected default: elem.hide(); break; } // Maintains chainablity return self; }, // _triggerShow // ------------ // Determines what elements get shown on scroll and click _triggerShow: function(elem, scroll) { var self = this; // If the current element's parent is a header element or the next element is a nested subheader element if (elem.parent().is(headerClass) || elem.next().is(subheaderClass)) { // Shows the next sub-header element self.show(elem.next(subheaderClass), scroll); } // If the current element's parent is a subheader element else if (elem.parent().is(subheaderClass)) { // Shows the parent sub-header element self.show(elem.parent(), scroll); } // Maintains chainability return self; }, // _addCSSClasses // -------------- // Adds CSS classes to the newly generated table of contents HTML _addCSSClasses: function() { // If the user wants a jqueryUI theme if (this.options.theme === \"jqueryui\") { this.focusClass = \"ui-state-default\"; this.hoverClass = \"ui-state-hover\"; //Adds the default styling to the dropdown list this.element.addClass(\"ui-widget\").find(\".toc-title\").addClass(\"ui-widget-header\").end().find(\"li\").addClass(\"ui-widget-content\"); } // If the user wants a twitterBootstrap theme else if (this.options.theme === \"bootstrap\") { this.element.find(headerClass + \",\" + subheaderClass).addClass(\"nav nav-list\"); this.focusClass = \"active\"; } // If the user wants a twitterBootstrap theme else if (this.options.theme === \"bootstrap3\") { this.element.find(headerClass + \",\" + subheaderClass).addClass(\"list-group\"); this.element.find(itemClass).addClass(\"list-group-item\"); this.focusClass = \"active\"; } // If a user does not want a prebuilt theme else { // Adds more neutral classes (instead of jqueryui) this.focusClass = tocFocusClassName; this.hoverClass = tocHoverClassName; } //Maintains chainability return this; }, // setOption // --------- // Sets a single Tocify option after the plugin is invoked setOption: function() { // Calls the jQueryUI Widget Factory setOption method $.Widget.prototype._setOption.apply(this, arguments); }, // setOptions // ---------- // Sets a single or multiple Tocify options after the plugin is invoked setOptions: function() { // Calls the jQueryUI Widget Factory setOptions method $.Widget.prototype._setOptions.apply(this, arguments); }, // _scrollTo // --------- // Scrolls to a specific element _scrollTo: function(elem) { var self = this, duration = self.options.smoothScroll || 0, scrollTo = self.options.scrollTo, currentDiv = $('div[data-unique=\"' + elem.attr(\"data-unique\") + '\"]'); if (!currentDiv.length) { return self; } // Once all animations on the page are complete, this callback function will be called $(\"html, body\").promise().done(function() { // Animates the html and body element scrolltops $(\"html, body\").animate({ // Sets the jQuery `scrollTop` to the top offset of the HTML div tag that matches the current list item's `data-unique` tag \"scrollTop\": currentDiv.offset().top - ($.isFunction(scrollTo) ? scrollTo.call() : scrollTo) + \"px\" }, { // Sets the smoothScroll animation time duration to the smoothScrollSpeed option \"duration\": duration }); }); // Maintains chainability return self; } }); })); //end of plugin /** * jQuery Plugin: Sticky Tabs * * @author Aidan Lister * adapted by Ruben Arslan to activate parent tabs too * http://www.aidanlister.com/2014/03/persisting-the-tab-state-in-bootstrap/ */ (function($) { \"use strict\"; $.fn.rmarkdownStickyTabs = function() { var context = this; // Show the tab corresponding with the hash in the URL, or the first tab var showStuffFromHash = function() { var hash = window.location.hash; var selector = hash ? 'a[href=\"' + hash + '\"]' : 'li.active > a'; var $selector = $(selector, context); if($selector.data('toggle') === \"tab\") { $selector.tab('show'); // walk up the ancestors of this element, show any hidden tabs $selector.parents('.section.tabset').each(function(i, elm) { var link = $('a[href=\"#' + $(elm).attr('id') + '\"]'); if(link.data('toggle') === \"tab\") { link.tab(\"show\"); } }); } }; // Set the correct tab when the page loads showStuffFromHash(context); // Set the correct tab when a user uses their back/forward button $(window).on('hashchange', function() { showStuffFromHash(context); }); // Change the URL when tabs are clicked $('a', context).on('click', function(e) { history.pushState(null, null, this.href); showStuffFromHash(context); }); return this; }; }(jQuery)); window.buildTabsets = function(tocID) { // build a tabset from a section div with the .tabset class function buildTabset(tabset) { // check for fade and pills options var fade = tabset.hasClass(\"tabset-fade\"); var pills = tabset.hasClass(\"tabset-pills\"); var navClass = pills ? \"nav-pills\" : \"nav-tabs\"; // determine the heading level of the tabset and tabs var match = tabset.attr('class').match(/level(\\d) /); if (match === null) return; var tabsetLevel = Number(match[1]); var tabLevel = tabsetLevel + 1; // find all subheadings immediately below var tabs = tabset.find(\"div.section.level\" + tabLevel); if (!tabs.length) return; // create tablist and tab-content elements var tabList = $(''); $(tabs[0]).before(tabList); var tabContent = $(''); $(tabs[0]).before(tabContent); // build the tabset var activeTab = 0; tabs.each(function(i) { // get the tab div var tab = $(tabs[i]); // get the id then sanitize it for use with bootstrap tabs var id = tab.attr('id'); // see if this is marked as the active tab if (tab.hasClass('active')) activeTab = i; // remove any table of contents entries associated with // this ID (since we'll be removing the heading element) $(\"div#\" + tocID + \" li a[href='#\" + id + \"']\").parent().remove(); // sanitize the id for use with bootstrap tabs id = id.replace(/[.\\/?&!#]/g, '').replace(/\\s/g, '_'); tab.attr('id', id); // get the heading element within it, grab it's text, then remove it var heading = tab.find('h' + tabLevel + ':first'); var headingText = heading.html(); heading.remove(); // build and append the tab list item var a = $('' + headingText + ''); a.attr('href', '#' + id); a.attr('aria-controls', id); var li = $(''); li.append(a); tabList.append(li); // set it's attributes tab.attr('role', 'tabpanel'); tab.addClass('tab-pane'); tab.addClass('tabbed-pane'); if (fade) tab.addClass('fade'); // move it into the tab content div tab.detach().appendTo(tabContent); }); // set active tab $(tabList.children('li')[activeTab]).addClass('active'); var active = $(tabContent.children('div.section')[activeTab]); active.addClass('active'); if (fade) active.addClass('in'); if (tabset.hasClass(\"tabset-sticky\")) tabset.rmarkdownStickyTabs(); } // convert section divs with the .tabset class to tabsets var tabsets = $(\"div.section.tabset\"); tabsets.each(function(i) { buildTabset($(tabsets[i])); }); }; .hljs-literal { color: #990073; } .hljs-number { color: #099; } .hljs-comment { color: #998; font-style: italic; } .hljs-keyword { color: #900; font-weight: bold; } .hljs-string { color: #d14; } code{white-space: pre-wrap;} span.smallcaps{font-variant: small-caps;} span.underline{text-decoration: underline;} div.column{display: inline-block; vertical-align: top; width: 50%;} div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;} ul.task-list{list-style: none;} code{white-space: pre;} if (window.hljs) { hljs.configure({languages: []}); hljs.initHighlightingOnLoad(); if (document.readyState && document.readyState === \"complete\") { window.setTimeout(function() { hljs.initHighlighting(); }, 0); } } .main-container { max-width: 940px; margin-left: auto; margin-right: auto; } img { max-width:100%; } .tabbed-pane { padding-top: 12px; } .html-widget { margin-bottom: 20px; } button.code-folding-btn:focus { outline: none; } summary { display: list-item; } details > summary > p:only-child { display: inline; } pre code { padding: 0; } .tabset-dropdown > .nav-tabs { display: inline-table; max-height: 500px; min-height: 44px; overflow-y: auto; border: 1px solid #ddd; border-radius: 4px; } .tabset-dropdown > .nav-tabs > li.active:before { content: \"\"; font-family: 'Glyphicons Halflings'; display: inline-block; padding: 10px; border-right: 1px solid #ddd; } .tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before { content: \"\"; border: none; } .tabset-dropdown > .nav-tabs.nav-tabs-open:before { content: \"\"; font-family: 'Glyphicons Halflings'; display: inline-block; padding: 10px; border-right: 1px solid #ddd; } .tabset-dropdown > .nav-tabs > li.active { display: block; } .tabset-dropdown > .nav-tabs > li > a, .tabset-dropdown > .nav-tabs > li > a:focus, .tabset-dropdown > .nav-tabs > li > a:hover { border: none; display: inline-block; border-radius: 4px; background-color: transparent; } .tabset-dropdown > .nav-tabs.nav-tabs-open > li { display: block; float: none; } .tabset-dropdown > .nav-tabs > li { display: none; } #TOC { margin: 25px 0px 20px 0px; } @media (max-width: 768px) { #TOC { position: relative; width: 100%; } } @media print { .toc-content { /* see https://github.com/w3c/csswg-drafts/issues/4434 */ float: right; } } .toc-content { padding-left: 30px; padding-right: 40px; } div.main-container { max-width: 1200px; } div.tocify { width: 20%; max-width: 260px; max-height: 85%; } @media (min-width: 768px) and (max-width: 991px) { div.tocify { width: 25%; } } @media (max-width: 767px) { div.tocify { width: 100%; max-width: none; } } .tocify ul, .tocify li { line-height: 20px; } .tocify-subheader .tocify-item { font-size: 0.90em; } .tocify .list-group-item { border-radius: 0px; } R을 이용한 공공데이터 분석_제7장 2022-06-22 제7장 결측치, 이상치 처리 1단원 결측치 (158p) 결측치(결측값)이란? 데이터가 비어 있는 경우, 빈칸으로 둔다. 이를 결측치(결측값)이라고 한다. 데이터 분석을 할 때는 반드시 분석 전에 결측치를 처리해야 한다. 전체 데이터에 있는 결측치 비율이 높으면 결과가 외곡 될 수 있기에 그 데이터를 분석해서는 안된다. 결측치를 채우는 코드는 구글링하면 나온다. 다만 어떤 방법(평균값 적용/결측치 제외/평균값을 낼 수 없는 경우-패턴, 방정식, 빈도…)을 사용할지 논리를 갖고 판단을 내려야 한다. 해당 도메인(의료,무역,회계…)을 잘 알아야 결측치를 채우는 옳은 방법을 판단할 수 있다. 통계는 실험이다!! 분석가는 설득을 해야한다. 여러 분석 방법을 실험해 보고 가장 정확도가 높은 분석 방법을 사용하여 최종결정자를 설득 해야 한다. 0. 라이브러리 불러오기 library(dplyr) ## ## 다음의 패키지를 부착합니다: &#39;dplyr&#39; ## The following objects are masked from &#39;package:stats&#39;: ## ## filter, lag ## The following objects are masked from &#39;package:base&#39;: ## ## intersect, setdiff, setequal, union 1. 결측치를 확인하고 빈도구하기 R에서는 결측치를 NA로 표시한다. 1.1. is.na(): 결측치 확인 exam_na &lt;- read.csv(&quot;data/exam_na.csv&quot;) # 하위 경로 적어주기 is.na(&quot;exam_na.csv&quot;) # Is this yours? 결측치가 있니? 없니? ## [1] FALSE 1.2. table(is.na()) : 결측치 빈도구하기 table() : 빈도 구하기 table(is.na(데이터세트)) : 데이터세트의 결측치 ‘전체 빈도’ 구하기 table(is.na(데이터세트$변수)) : 데이터세트의 ’특정 변수’에 있는 결측치 빈도 구하기 summary(is.na(데이터세트)) : 데이터세트의 ‘모든 변수별로’ 결측치 빈도 구하기 table(is.na(exam_na)) ## ## FALSE TRUE ## 22 3 table(is.na(exam_na$korean)) ## ## FALSE TRUE ## 4 1 summary(is.na(exam_na)) ## id sex korean english ## Mode :logical Mode :logical Mode :logical Mode :logical ## FALSE:5 FALSE:5 FALSE:4 FALSE:3 ## TRUE :1 TRUE :2 ## math ## Mode :logical ## FALSE:5 ## summary(exam_na) ## id sex korean english math ## Min. :1 Length:5 Min. :87.00 Min. :84.00 Min. :80.0 ## 1st Qu.:2 Class :character 1st Qu.:87.00 1st Qu.:88.00 1st Qu.:82.0 ## Median :3 Mode :character Median :89.50 Median :92.00 Median :88.0 ## Mean :3 Mean :90.25 Mean :90.33 Mean :86.6 ## 3rd Qu.:4 3rd Qu.:92.75 3rd Qu.:93.50 3rd Qu.:90.0 ## Max. :5 Max. :95.00 Max. :95.00 Max. :93.0 ## NA&#39;s :1 NA&#39;s :2 2. 결측치 처리방법 결측치는 ’제거하고 처리’하기보다 &gt; ’다른 값으로 대체’하는게 더 중요하다. 2.1. 결측치를 제외하고 분석하기 1 na.rm = T (T-제거X. F-제거O) : 연산함수에서 결측치를 제외하는 명령 2 na.omit() : 결측치가 있는 행을 모두 제외하기 *가급적 사용하지 말기 3 filter(!is.na()) : filter() 함수로 결측치가 없는 행만 추출하기 # 1 mean(exam_na$korean) ## [1] NA mean(exam_na$korean,na.rm = TRUE) # 결측치를 제외하고 평균 구하기 ## [1] 90.25 mean(exam_na$korean,na.rm = T) ## [1] 90.25 # 3 exam_na %&gt;% filter(is.na(korean)) ## id sex korean english math ## 1 4 M NA 84 80 # filter(is.na()) : 결측치가 있는 행만 추츨해라. # exam_na의 korean 변수에서 결측치가 있는 행만 추출 exam_na %&gt;% filter(!is.na(korean)) ## id sex korean english math ## 1 1 M 87 NA 82 ## 2 2 F 92 95 93 ## 3 3 F 95 92 90 ## 4 5 F 87 NA 88 # filter(!is.na()) : 결측치가 아닌 행만 추츨해라. # exam_na의 korean 변수에서 결측치가 아닌 행만 추출 2.2. 결측치를 다른 값으로 대체하기 결측치 대체법(imputation) 대체값으로 평균값이 많이 쓰이지만 특정 값의 빈도가 매우 많을 때는 최빈값으로 대체한다. table() 함수 활용. 결측치를 대체할 때는 ifelse()함수 사용. 참고자료 A Solution to Missing Data: Imputation Using R R 결측값(NA) 제거, 대체 방법 2단원 이상치 (163p) 1. 이상치의 개념 데이터의 특정 값이 뭔가 ’이상’이 있다. (ex.오타) Case 1 : 정해진 범주에서 벗어난 데이터 (ex.2000.04.30/2000.40.30 -&gt;9999로 대체) Case 2 : 숫자, 아웃라이어(Outlier), 극단값 (ex.평균: 평균임금 320만원/손흥민 몇십억원, 평균의 함정) 2. 이상치 처리 mpg1_out &lt;- read.csv(&quot;data/mpg1_out.csv&quot;) glimpse(mpg1_out) ## Rows: 234 ## Columns: 3 ## $ trans &lt;int&gt; 1, 2, 2, 1, 1, 2, 1, 2, 1, 2, 1, 1, 2, 1, 2, 1, 1, 1, 1, 3, 1, 1… ## $ drv &lt;chr&gt; &quot;f&quot;, &quot;f&quot;, &quot;f&quot;, &quot;f&quot;, &quot;f&quot;, &quot;f&quot;, &quot;f&quot;, &quot;4&quot;, &quot;4&quot;, &quot;4&quot;, &quot;4&quot;, &quot;4&quot;, &quot;5&quot;,… ## $ cty &lt;int&gt; 18, 21, 20, 21, 16, 18, 18, 18, 16, 20, 19, 15, 17, 17, 15, 15, … # trans의 갯수를 구하자 table(mpg1_out$trans) ## ## 1 2 3 ## 154 76 4 # ifelse # 만약 ~라면, 내가 무엇을 할 것이다. (가정법) # if trans의 값이 3이라면, 결측치로 바꿔주세요. 나머지는 그대로 유지하세요. # ifelse(is.na(변수),대체값,변수) mpg1_out$trans&lt;-ifelse(mpg1_out$trans==3,NA, mpg1_out$trans) #3을 결측치 처리 table(is.na(mpg1_out$trans)) ## ## FALSE TRUE ## 230 4 # 결측치 제거 mpg1_out %&gt;% filter(!is.na(trans)) ## trans drv cty ## 1 1 f 18 ## 2 2 f 21 ## 3 2 f 20 ## 4 1 f 21 ## 5 1 f 16 ## 6 2 f 18 ## 7 1 f 18 ## 8 2 4 18 ## 9 1 4 16 ## 10 2 4 20 ## 11 1 4 19 ## 12 1 4 15 ## 13 2 5 17 ## 14 1 4 17 ## 15 2 4 15 ## 16 1 4 15 ## 17 1 4 17 ## 18 1 4 16 ## 19 1 r 14 ## 20 1 r 14 ## 21 1 r 13 ## 22 1 r 12 ## 23 2 r 16 ## 24 1 r 15 ## 25 2 r 16 ## 26 1 r 15 ## 27 1 4 14 ## 28 1 4 11 ## 29 1 4 11 ## 30 1 4 14 ## 31 1 f 19 ## 32 1 f 22 ## 33 1 f 18 ## 34 1 f 18 ## 35 1 f 17 ## 36 1 f 18 ## 37 1 f 17 ## 38 1 f 16 ## 39 1 f 16 ## 40 1 f 17 ## 41 1 f 17 ## 42 1 f 11 ## 43 1 f 15 ## 44 1 f 16 ## 45 1 f 16 ## 46 2 4 15 ## 47 1 4 14 ## 48 1 4 13 ## 49 2 4 14 ## 50 1 4 14 ## 51 1 4 14 ## 52 1 5 9 ## 53 2 4 11 ## 54 1 4 11 ## 55 1 4 13 ## 56 1 4 13 ## 57 1 4 9 ## 58 1 4 11 ## 59 1 4 13 ## 60 1 4 11 ## 61 2 4 12 ## 62 1 4 9 ## 63 1 4 13 ## 64 1 4 13 ## 65 2 4 12 ## 66 2 4 9 ## 67 1 4 11 ## 68 2 4 11 ## 69 1 4 13 ## 70 1 4 11 ## 71 1 r 11 ## 72 1 r 11 ## 73 1 r 12 ## 74 1 4 14 ## 75 2 4 15 ## 76 1 4 14 ## 77 1 4 13 ## 78 1 4 13 ## 79 1 5 13 ## 80 1 4 14 ## 81 2 4 14 ## 82 2 4 13 ## 83 1 4 13 ## 84 1 4 13 ## 85 1 4 11 ## 86 1 4 13 ## 87 2 r 18 ## 88 1 r 18 ## 89 2 r 17 ## 90 1 r 16 ## 91 1 r 15 ## 92 2 r 15 ## 93 2 r 15 ## 94 1 r 15 ## 95 2 r 14 ## 96 2 f 28 ## 97 1 f 24 ## 98 2 f 25 ## 99 2 f 23 ## 100 1 f 24 ## 101 2 f 26 ## 102 1 f 25 ## 103 1 f 24 ## 104 2 f 21 ## 105 1 f 18 ## 106 2 f 18 ## 107 1 f 21 ## 108 2 f 21 ## 109 1 f 18 ## 110 2 f 18 ## 111 1 f 19 ## 112 1 f 19 ## 113 2 f 19 ## 114 2 f 20 ## 115 1 f 20 ## 116 1 f 17 ## 117 2 f 16 ## 118 2 f 17 ## 119 1 4 17 ## 120 1 4 15 ## 121 1 4 15 ## 122 1 4 14 ## 123 1 4 9 ## 124 1 4 14 ## 125 1 4 13 ## 126 1 4 11 ## 127 1 4 11 ## 128 1 4 12 ## 129 1 4 12 ## 130 1 4 11 ## 131 1 r 11 ## 132 1 r 11 ## 133 1 r 12 ## 134 1 4 14 ## 135 1 4 13 ## 136 1 4 13 ## 137 1 4 13 ## 138 2 f 21 ## 139 1 f 19 ## 140 1 f 23 ## 141 2 f 23 ## 142 2 f 19 ## 143 1 f 19 ## 144 1 f 18 ## 145 2 f 19 ## 146 1 f 19 ## 147 1 4 14 ## 148 2 4 15 ## 149 1 4 14 ## 150 1 4 12 ## 151 1 f 18 ## 152 1 f 16 ## 153 1 f 17 ## 154 1 f 18 ## 155 1 f 16 ## 156 2 4 18 ## 157 1 4 18 ## 158 2 4 20 ## 159 2 4 19 ## 160 1 4 20 ## 161 1 4 18 ## 162 1 4 21 ## 163 2 4 19 ## 164 2 4 19 ## 165 1 4 19 ## 166 1 4 20 ## 167 1 4 20 ## 168 2 4 19 ## 169 2 4 20 ## 170 2 4 15 ## 171 1 4 16 ## 172 1 4 15 ## 173 2 4 15 ## 174 1 4 16 ## 175 1 4 14 ## 176 2 f 21 ## 177 1 f 21 ## 178 2 f 21 ## 179 1 f 21 ## 180 1 f 18 ## 181 2 f 18 ## 182 1 f 19 ## 183 1 f 21 ## 184 2 f 21 ## 185 2 f 21 ## 186 1 f 22 ## 187 1 f 18 ## 188 2 f 18 ## 189 1 f 18 ## 190 1 f 24 ## 191 1 f 24 ## 192 2 f 26 ## 193 2 f 28 ## 194 1 f 26 ## 195 1 4 11 ## 196 1 4 13 ## 197 2 4 15 ## 198 1 4 16 ## 199 2 4 17 ## 200 2 4 15 ## 201 1 4 15 ## 202 2 4 15 ## 203 1 4 16 ## 204 2 f 21 ## 205 1 f 19 ## 206 2 f 21 ## 207 1 f 22 ## 208 2 f 17 ## 209 2 f 33 ## 210 2 f 21 ## 211 1 f 19 ## 212 1 f 22 ## 213 2 f 21 ## 214 1 f 21 ## 215 2 f 21 ## 216 1 f 16 ## 217 2 f 17 ## 218 2 f 35 ## 219 1 f 29 ## 220 2 f 21 ## 221 1 f 19 ## 222 2 f 20 ## 223 1 f 20 ## 224 2 f 21 ## 225 1 f 18 ## 226 1 f 19 ## 227 2 f 21 ## 228 1 f 16 ## 229 2 f 18 ## 230 1 f 17 # 과정 정리 : 데이터 불러오기&gt;변수 trans의 종류가 각각 몇개씩 있는지 확인&gt;3이 너무 적어서 제거하고자 함&gt;3을 결측치로 변환해서&gt;결측치를 제거 # mpg1_out %&gt;% filter(trans==3) # 굳이 3을 결측치로 전환하지 않고 filter() 함수를 바로 사용하는 방법도 있다. 3. 극단치 처리 숫자 데이터 boxplot() boxplot() 함수를 통해서 극단치가 있는지 없는지 확인 가능 IQR : 3사분위 - 1사분위 경계값 : IQR +IQR * 1.5 상한 / IQR -IQR * 1.5 그러나 실무에서는 산업 별로 극단치를 처리하는 각각의 기준이 있다!! 때문에 실무에서 통계적으로 접근하여 극단치를 마음대로 제거하면 큰일 난다!! 상사한테 물어보기! mpg1 &lt;- read.csv(&quot;data/mpg1.csv&quot;) boxplot(mpg1$cty) # 1개의 변수 통계값 : boxplot(데이터세트$변수)$stats # 복수 변수의 통계값 : boxplot(데이터세트$변수1,데이터세트$변수2,...)$stats # 변수의 범주별 통계값 : boxplot(데이터세트$종속변수~데이터세트$범주변수)$stats boxplot(mpg1$cty)$stats ## [,1] ## [1,] 9 ## [2,] 14 ## [3,] 17 ## [4,] 19 ## [5,] 26 boxplot(mpg1$cty~mpg1$drv)$stats ## [,1] [,2] [,3] ## [1,] 9 15 11 ## [2,] 13 18 12 ## [3,] 14 19 15 ## [4,] 16 21 15 ## [5,] 20 25 18 // add bootstrap table styles to pandoc tables function bootstrapStylePandocTables() { $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed'); } $(document).ready(function () { bootstrapStylePandocTables(); }); $(document).ready(function () { window.buildTabsets(\"TOC\"); }); $(document).ready(function () { $('.tabset-dropdown > .nav-tabs > li').click(function () { $(this).parent().toggleClass('nav-tabs-open'); }); }); $(document).ready(function () { // temporarily add toc-ignore selector to headers for the consistency with Pandoc $('.unlisted.unnumbered').addClass('toc-ignore') // move toc-ignore selectors from section div to header $('div.section.toc-ignore') .removeClass('toc-ignore') .children('h1,h2,h3,h4,h5').addClass('toc-ignore'); // establish options var options = { selectors: \"h1,h2,h3\", theme: \"bootstrap3\", context: '.toc-content', hashGenerator: function (text) { return text.replace(/[.\\\\/?&!#]/g, '').replace(/\\s/g, '_'); }, ignoreSelector: \".toc-ignore\", scrollTo: 0 }; options.showAndHide = true; options.smoothScroll = true; // tocify var toc = $(\"#TOC\").tocify(options).data(\"toc-tocify\"); }); (function () { var script = document.createElement(\"script\"); script.type = \"text/javascript\"; script.src = \"https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML\"; document.getElementsByTagName(\"head\")[0].appendChild(script); })();"},{"title":"","date":"2022-06-24T03:19:25.143Z","updated":"2022-06-24T03:12:12.785Z","comments":true,"path":"images/R_8.html","permalink":"https://sallyzmk.github.io/images/R_8.html","excerpt":"","text":"R을 이용한 공공데이터 분석_제8장 // Pandoc 2.9 adds attributes on both header and div. We remove the former (to // be compatible with the behavior of Pandoc < 2.8). document.addEventListener('DOMContentLoaded', function(e) { var hs = document.querySelectorAll(\"div.section[class*='level'] > :first-child\"); var i, h, a; for (i = 0; i < hs.length; i++) { h = hs[i]; if (!/^h[1-6]$/i.test(h.tagName)) continue; // it should be a header h1-h6 a = h.attributes; while (a.length > 0) h.removeAttribute(a[0].name); } }); /*! jQuery v3.6.0 | (c) OpenJS Foundation and other contributors | jquery.org/license */ !function(e,t){\"use strict\";\"object\"==typeof module&&\"object\"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error(\"jQuery requires a window with a document\");return t(e)}:t(e)}(\"undefined\"!=typeof window?window:this,function(C,e){\"use strict\";var t=[],r=Object.getPrototypeOf,s=t.slice,g=t.flat?function(e){return t.flat.call(e)}:function(e){return t.concat.apply([],e)},u=t.push,i=t.indexOf,n={},o=n.toString,v=n.hasOwnProperty,a=v.toString,l=a.call(Object),y={},m=function(e){return\"function\"==typeof e&&\"number\"!=typeof e.nodeType&&\"function\"!=typeof e.item},x=function(e){return null!=e&&e===e.window},E=C.document,c={type:!0,src:!0,nonce:!0,noModule:!0};function b(e,t,n){var r,i,o=(n=n||E).createElement(\"script\");if(o.text=e,t)for(r in c)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function w(e){return null==e?e+\"\":\"object\"==typeof e||\"function\"==typeof e?n[o.call(e)]||\"object\":typeof e}var f=\"3.6.0\",S=function(e,t){return new S.fn.init(e,t)};function p(e){var t=!!e&&\"length\"in e&&e.length,n=w(e);return!m(e)&&!x(e)&&(\"array\"===n||0===t||\"number\"==typeof t&&0-1,f(u,function(e,t){t.cache=\"_\"+e,t.props.alpha={idx:3,type:\"percent\",def:1}}),l.fn=e.extend(l.prototype,{parse:function(n,o,r,h){if(n===t)return this._rgba=[null,null,null,null],this;(n.jquery||n.nodeType)&&(n=e(n).css(o),o=t);var d=this,c=e.type(n),p=this._rgba=[];return o!==t&&(n=[n,o,r,h],c=\"array\"),\"string\"===c?this.parse(s(n)||a._default):\"array\"===c?(f(u.rgba.props,function(e,t){p[t.idx]=i(n[t.idx],t)}),this):\"object\"===c?(n instanceof l?f(u,function(e,t){n[t.cache]&&(d[t.cache]=n[t.cache].slice())}):f(u,function(t,s){var a=s.cache;f(s.props,function(e,t){if(!d[a]&&s.to){if(\"alpha\"===e||null==n[e])return;d[a]=s.to(d._rgba)}d[a][t.idx]=i(n[e],t,!0)}),d[a]&&0>e.inArray(null,d[a].slice(0,3))&&(d[a][3]=1,s.from&&(d._rgba=s.from(d[a])))}),this):t},is:function(e){var i=l(e),s=!0,n=this;return f(u,function(e,a){var o,r=i[a.cache];return r&&(o=n[a.cache]||a.to&&a.to(n._rgba)||[],f(a.props,function(e,i){return null!=r[i.idx]?s=r[i.idx]===o[i.idx]:t})),s}),s},_space:function(){var e=[],t=this;return f(u,function(i,s){t[s.cache]&&e.push(i)}),e.pop()},transition:function(e,t){var s=l(e),n=s._space(),a=u[n],o=0===this.alpha()?l(\"transparent\"):this,r=o[a.cache]||a.to(o._rgba),h=r.slice();return s=s[a.cache],f(a.props,function(e,n){var a=n.idx,o=r[a],l=s[a],u=d[n.type]||{};null!==l&&(null===o?h[a]=l:(u.mod&&(l-o>u.mod/2?o+=u.mod:o-l>u.mod/2&&(o-=u.mod)),h[a]=i((l-o)*t+o,n)))}),this[n](h)},blend:function(t){if(1===this._rgba[3])return this;var i=this._rgba.slice(),s=i.pop(),n=l(t)._rgba;return l(e.map(i,function(e,t){return(1-s)*n[t]+s*e}))},toRgbaString:function(){var t=\"rgba(\",i=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===i[3]&&(i.pop(),t=\"rgb(\"),t+i.join()+\")\"},toHslaString:function(){var t=\"hsla(\",i=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+\"%\"),e});return 1===i[3]&&(i.pop(),t=\"hsl(\"),t+i.join()+\")\"},toHexString:function(t){var i=this._rgba.slice(),s=i.pop();return t&&i.push(~~(255*s)),\"#\"+e.map(i,function(e){return e=(e||0).toString(16),1===e.length?\"0\"+e:e}).join(\"\")},toString:function(){return 0===this._rgba[3]?\"transparent\":this.toRgbaString()}}),l.fn.parse.prototype=l.fn,u.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,i,s=e[0]/255,n=e[1]/255,a=e[2]/255,o=e[3],r=Math.max(s,n,a),h=Math.min(s,n,a),l=r-h,u=r+h,d=.5*u;return t=h===r?0:s===r?60*(n-a)/l+360:n===r?60*(a-s)/l+120:60*(s-n)/l+240,i=0===l?0:.5>=d?l/u:l/(2-u),[Math.round(t)%360,i,d,null==o?1:o]},u.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,i=e[1],s=e[2],a=e[3],o=.5>=s?s*(1+i):s+i-s*i,r=2*s-o;return[Math.round(255*n(r,o,t+1/3)),Math.round(255*n(r,o,t)),Math.round(255*n(r,o,t-1/3)),a]},f(u,function(s,n){var a=n.props,o=n.cache,h=n.to,u=n.from;l.fn[s]=function(s){if(h&&!this[o]&&(this[o]=h(this._rgba)),s===t)return this[o].slice();var n,r=e.type(s),d=\"array\"===r||\"object\"===r?s:arguments,c=this[o].slice();return f(a,function(e,t){var s=d[\"object\"===r?e:t.idx];null==s&&(s=c[t.idx]),c[t.idx]=i(s,t)}),u?(n=l(u(c)),n[o]=c,n):l(c)},f(a,function(t,i){l.fn[t]||(l.fn[t]=function(n){var a,o=e.type(n),h=\"alpha\"===t?this._hsla?\"hsla\":\"rgba\":s,l=this[h](),u=l[i.idx];return\"undefined\"===o?u:(\"function\"===o&&(n=n.call(this,u),o=e.type(n)),null==n&&i.empty?this:(\"string\"===o&&(a=r.exec(n),a&&(n=u+parseFloat(a[2])*(\"+\"===a[1]?1:-1))),l[i.idx]=n,this[h](l)))})})}),l.hook=function(t){var i=t.split(\" \");f(i,function(t,i){e.cssHooks[i]={set:function(t,n){var a,o,r=\"\";if(\"transparent\"!==n&&(\"string\"!==e.type(n)||(a=s(n)))){if(n=l(a||n),!c.rgba&&1!==n._rgba[3]){for(o=\"backgroundColor\"===i?t.parentNode:t;(\"\"===r||\"transparent\"===r)&&o&&o.style;)try{r=e.css(o,\"backgroundColor\"),o=o.parentNode}catch(h){}n=n.blend(r&&\"transparent\"!==r?r:\"_default\")}n=n.toRgbaString()}try{t.style[i]=n}catch(h){}}},e.fx.step[i]=function(t){t.colorInit||(t.start=l(t.elem,i),t.end=l(t.end),t.colorInit=!0),e.cssHooks[i].set(t.elem,t.start.transition(t.end,t.pos))}})},l.hook(o),e.cssHooks.borderColor={expand:function(e){var t={};return f([\"Top\",\"Right\",\"Bottom\",\"Left\"],function(i,s){t[\"border\"+s+\"Color\"]=e}),t}},a=e.Color.names={aqua:\"#00ffff\",black:\"#000000\",blue:\"#0000ff\",fuchsia:\"#ff00ff\",gray:\"#808080\",green:\"#008000\",lime:\"#00ff00\",maroon:\"#800000\",navy:\"#000080\",olive:\"#808000\",purple:\"#800080\",red:\"#ff0000\",silver:\"#c0c0c0\",teal:\"#008080\",white:\"#ffffff\",yellow:\"#ffff00\",transparent:[null,null,null,0],_default:\"#ffffff\"}}(p),function(){function t(t){var i,s,n=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,a={};if(n&&n.length&&n[0]&&n[n[0]])for(s=n.length;s--;)i=n[s],\"string\"==typeof n[i]&&(a[e.camelCase(i)]=n[i]);else for(i in n)\"string\"==typeof n[i]&&(a[i]=n[i]);return a}function i(t,i){var s,a,o={};for(s in i)a=i[s],t[s]!==a&&(n[s]||(e.fx.step[s]||!isNaN(parseFloat(a)))&&(o[s]=a));return o}var s=[\"add\",\"remove\",\"toggle\"],n={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each([\"borderLeftStyle\",\"borderRightStyle\",\"borderBottomStyle\",\"borderTopStyle\"],function(t,i){e.fx.step[i]=function(e){(\"none\"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(p.style(e.elem,i,e.end),e.setAttr=!0)}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(n,a,o,r){var h=e.speed(a,o,r);return this.queue(function(){var a,o=e(this),r=o.attr(\"class\")||\"\",l=h.children?o.find(\"*\").addBack():o;l=l.map(function(){var i=e(this);return{el:i,start:t(this)}}),a=function(){e.each(s,function(e,t){n[t]&&o[t+\"Class\"](n[t])})},a(),l=l.map(function(){return this.end=t(this.el[0]),this.diff=i(this.start,this.end),this}),o.attr(\"class\",r),l=l.map(function(){var t=this,i=e.Deferred(),s=e.extend({},h,{queue:!1,complete:function(){i.resolve(t)}});return this.el.animate(this.diff,s),i.promise()}),e.when.apply(e,l.get()).done(function(){a(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,\"\")})}),h.complete.call(o[0])})})},e.fn.extend({addClass:function(t){return function(i,s,n,a){return s?e.effects.animateClass.call(this,{add:i},s,n,a):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(i,s,n,a){return arguments.length>1?e.effects.animateClass.call(this,{remove:i},s,n,a):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(t){return function(i,s,n,a,o){return\"boolean\"==typeof s||void 0===s?n?e.effects.animateClass.call(this,s?{add:i}:{remove:i},n,a,o):t.apply(this,arguments):e.effects.animateClass.call(this,{toggle:i},s,n,a)}}(e.fn.toggleClass),switchClass:function(t,i,s,n,a){return e.effects.animateClass.call(this,{add:i,remove:t},s,n,a)}})}(),function(){function t(t,i,s,n){return e.isPlainObject(t)&&(i=t,t=t.effect),t={effect:t},null==i&&(i={}),e.isFunction(i)&&(n=i,s=null,i={}),(\"number\"==typeof i||e.fx.speeds[i])&&(n=s,s=i,i={}),e.isFunction(s)&&(n=s,s=null),i&&e.extend(t,i),s=s||i.duration,t.duration=e.fx.off?0:\"number\"==typeof s?s:s in e.fx.speeds?e.fx.speeds[s]:e.fx.speeds._default,t.complete=n||i.complete,t}function i(t){return!t||\"number\"==typeof t||e.fx.speeds[t]?!0:\"string\"!=typeof t||e.effects.effect[t]?e.isFunction(t)?!0:\"object\"!=typeof t||t.effect?!1:!0:!0}e.extend(e.effects,{version:\"1.11.4\",save:function(e,t){for(var i=0;t.length>i;i++)null!==t[i]&&e.data(c+t[i],e[0].style[t[i]])},restore:function(e,t){var i,s;for(s=0;t.length>s;s++)null!==t[s]&&(i=e.data(c+t[s]),void 0===i&&(i=\"\"),e.css(t[s],i))},setMode:function(e,t){return\"toggle\"===t&&(t=e.is(\":hidden\")?\"show\":\"hide\"),t},getBaseline:function(e,t){var i,s;switch(e[0]){case\"top\":i=0;break;case\"middle\":i=.5;break;case\"bottom\":i=1;break;default:i=e[0]/t.height}switch(e[1]){case\"left\":s=0;break;case\"center\":s=.5;break;case\"right\":s=1;break;default:s=e[1]/t.width}return{x:s,y:i}},createWrapper:function(t){if(t.parent().is(\".ui-effects-wrapper\"))return t.parent();var i={width:t.outerWidth(!0),height:t.outerHeight(!0),\"float\":t.css(\"float\")},s=e(\"\").addClass(\"ui-effects-wrapper\").css({fontSize:\"100%\",background:\"transparent\",border:\"none\",margin:0,padding:0}),n={width:t.width(),height:t.height()},a=document.activeElement;try{a.id}catch(o){a=document.body}return t.wrap(s),(t[0]===a||e.contains(t[0],a))&&e(a).focus(),s=t.parent(),\"static\"===t.css(\"position\")?(s.css({position:\"relative\"}),t.css({position:\"relative\"})):(e.extend(i,{position:t.css(\"position\"),zIndex:t.css(\"z-index\")}),e.each([\"top\",\"left\",\"bottom\",\"right\"],function(e,s){i[s]=t.css(s),isNaN(parseInt(i[s],10))&&(i[s]=\"auto\")}),t.css({position:\"relative\",top:0,left:0,right:\"auto\",bottom:\"auto\"})),t.css(n),s.css(i).show()},removeWrapper:function(t){var i=document.activeElement;return t.parent().is(\".ui-effects-wrapper\")&&(t.parent().replaceWith(t),(t[0]===i||e.contains(t[0],i))&&e(i).focus()),t},setTransition:function(t,i,s,n){return n=n||{},e.each(i,function(e,i){var a=t.cssUnit(i);a[0]>0&&(n[i]=a[0]*s+a[1])}),n}}),e.fn.extend({effect:function(){function i(t){function i(){e.isFunction(a)&&a.call(n[0]),e.isFunction(t)&&t()}var n=e(this),a=s.complete,r=s.mode;(n.is(\":hidden\")?\"hide\"===r:\"show\"===r)?(n[r](),i()):o.call(n[0],s,i)}var s=t.apply(this,arguments),n=s.mode,a=s.queue,o=e.effects.effect[s.effect];return e.fx.off||!o?n?this[n](s.duration,s.complete):this.each(function(){s.complete&&s.complete.call(this)}):a===!1?this.each(i):this.queue(a||\"fx\",i)},show:function(e){return function(s){if(i(s))return e.apply(this,arguments);var n=t.apply(this,arguments);return n.mode=\"show\",this.effect.call(this,n)}}(e.fn.show),hide:function(e){return function(s){if(i(s))return e.apply(this,arguments);var n=t.apply(this,arguments);return n.mode=\"hide\",this.effect.call(this,n)}}(e.fn.hide),toggle:function(e){return function(s){if(i(s)||\"boolean\"==typeof s)return e.apply(this,arguments);var n=t.apply(this,arguments);return n.mode=\"toggle\",this.effect.call(this,n)}}(e.fn.toggle),cssUnit:function(t){var i=this.css(t),s=[];return e.each([\"em\",\"px\",\"%\",\"pt\"],function(e,t){i.indexOf(t)>0&&(s=[parseFloat(i),t])}),s}})}(),function(){var t={};e.each([\"Quad\",\"Cubic\",\"Quart\",\"Quint\",\"Expo\"],function(e,i){t[i]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,i=4;((t=Math.pow(2,--i))-1)/11>e;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,i){e.easing[\"easeIn\"+t]=i,e.easing[\"easeOut\"+t]=function(e){return 1-i(1-e)},e.easing[\"easeInOut\"+t]=function(e){return.5>e?i(2*e)/2:1-i(-2*e+2)/2}})}(),e.effects,e.effects.effect.blind=function(t,i){var s,n,a,o=e(this),r=/up|down|vertical/,h=/up|left|vertical|horizontal/,l=[\"position\",\"top\",\"bottom\",\"left\",\"right\",\"height\",\"width\"],u=e.effects.setMode(o,t.mode||\"hide\"),d=t.direction||\"up\",c=r.test(d),p=c?\"height\":\"width\",f=c?\"top\":\"left\",m=h.test(d),g={},v=\"show\"===u;o.parent().is(\".ui-effects-wrapper\")?e.effects.save(o.parent(),l):e.effects.save(o,l),o.show(),s=e.effects.createWrapper(o).css({overflow:\"hidden\"}),n=s[p](),a=parseFloat(s.css(f))||0,g[p]=v?n:0,m||(o.css(c?\"bottom\":\"right\",0).css(c?\"top\":\"left\",\"auto\").css({position:\"absolute\"}),g[f]=v?a:n+a),v&&(s.css(p,0),m||s.css(f,a+n)),s.animate(g,{duration:t.duration,easing:t.easing,queue:!1,complete:function(){\"hide\"===u&&o.hide(),e.effects.restore(o,l),e.effects.removeWrapper(o),i() }})},e.effects.effect.bounce=function(t,i){var s,n,a,o=e(this),r=[\"position\",\"top\",\"bottom\",\"left\",\"right\",\"height\",\"width\"],h=e.effects.setMode(o,t.mode||\"effect\"),l=\"hide\"===h,u=\"show\"===h,d=t.direction||\"up\",c=t.distance,p=t.times||5,f=2*p+(u||l?1:0),m=t.duration/f,g=t.easing,v=\"up\"===d||\"down\"===d?\"top\":\"left\",y=\"up\"===d||\"left\"===d,b=o.queue(),_=b.length;for((u||l)&&r.push(\"opacity\"),e.effects.save(o,r),o.show(),e.effects.createWrapper(o),c||(c=o[\"top\"===v?\"outerHeight\":\"outerWidth\"]()/3),u&&(a={opacity:1},a[v]=0,o.css(\"opacity\",0).css(v,y?2*-c:2*c).animate(a,m,g)),l&&(c/=Math.pow(2,p-1)),a={},a[v]=0,s=0;p>s;s++)n={},n[v]=(y?\"-=\":\"+=\")+c,o.animate(n,m,g).animate(a,m,g),c=l?2*c:c/2;l&&(n={opacity:0},n[v]=(y?\"-=\":\"+=\")+c,o.animate(n,m,g)),o.queue(function(){l&&o.hide(),e.effects.restore(o,r),e.effects.removeWrapper(o),i()}),_>1&&b.splice.apply(b,[1,0].concat(b.splice(_,f+1))),o.dequeue()},e.effects.effect.clip=function(t,i){var s,n,a,o=e(this),r=[\"position\",\"top\",\"bottom\",\"left\",\"right\",\"height\",\"width\"],h=e.effects.setMode(o,t.mode||\"hide\"),l=\"show\"===h,u=t.direction||\"vertical\",d=\"vertical\"===u,c=d?\"height\":\"width\",p=d?\"top\":\"left\",f={};e.effects.save(o,r),o.show(),s=e.effects.createWrapper(o).css({overflow:\"hidden\"}),n=\"IMG\"===o[0].tagName?s:o,a=n[c](),l&&(n.css(c,0),n.css(p,a/2)),f[c]=l?a:0,f[p]=l?0:a/2,n.animate(f,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){l||o.hide(),e.effects.restore(o,r),e.effects.removeWrapper(o),i()}})},e.effects.effect.drop=function(t,i){var s,n=e(this),a=[\"position\",\"top\",\"bottom\",\"left\",\"right\",\"opacity\",\"height\",\"width\"],o=e.effects.setMode(n,t.mode||\"hide\"),r=\"show\"===o,h=t.direction||\"left\",l=\"up\"===h||\"down\"===h?\"top\":\"left\",u=\"up\"===h||\"left\"===h?\"pos\":\"neg\",d={opacity:r?1:0};e.effects.save(n,a),n.show(),e.effects.createWrapper(n),s=t.distance||n[\"top\"===l?\"outerHeight\":\"outerWidth\"](!0)/2,r&&n.css(\"opacity\",0).css(l,\"pos\"===u?-s:s),d[l]=(r?\"pos\"===u?\"+=\":\"-=\":\"pos\"===u?\"-=\":\"+=\")+s,n.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){\"hide\"===o&&n.hide(),e.effects.restore(n,a),e.effects.removeWrapper(n),i()}})},e.effects.effect.explode=function(t,i){function s(){b.push(this),b.length===d*c&&n()}function n(){p.css({visibility:\"visible\"}),e(b).remove(),m||p.hide(),i()}var a,o,r,h,l,u,d=t.pieces?Math.round(Math.sqrt(t.pieces)):3,c=d,p=e(this),f=e.effects.setMode(p,t.mode||\"hide\"),m=\"show\"===f,g=p.show().css(\"visibility\",\"hidden\").offset(),v=Math.ceil(p.outerWidth()/c),y=Math.ceil(p.outerHeight()/d),b=[];for(a=0;d>a;a++)for(h=g.top+a*y,u=a-(d-1)/2,o=0;c>o;o++)r=g.left+o*v,l=o-(c-1)/2,p.clone().appendTo(\"body\").wrap(\"\").css({position:\"absolute\",visibility:\"visible\",left:-o*v,top:-a*y}).parent().addClass(\"ui-effects-explode\").css({position:\"absolute\",overflow:\"hidden\",width:v,height:y,left:r+(m?l*v:0),top:h+(m?u*y:0),opacity:m?0:1}).animate({left:r+(m?0:l*v),top:h+(m?0:u*y),opacity:m?1:0},t.duration||500,t.easing,s)},e.effects.effect.fade=function(t,i){var s=e(this),n=e.effects.setMode(s,t.mode||\"toggle\");s.animate({opacity:n},{queue:!1,duration:t.duration,easing:t.easing,complete:i})},e.effects.effect.fold=function(t,i){var s,n,a=e(this),o=[\"position\",\"top\",\"bottom\",\"left\",\"right\",\"height\",\"width\"],r=e.effects.setMode(a,t.mode||\"hide\"),h=\"show\"===r,l=\"hide\"===r,u=t.size||15,d=/([0-9]+)%/.exec(u),c=!!t.horizFirst,p=h!==c,f=p?[\"width\",\"height\"]:[\"height\",\"width\"],m=t.duration/2,g={},v={};e.effects.save(a,o),a.show(),s=e.effects.createWrapper(a).css({overflow:\"hidden\"}),n=p?[s.width(),s.height()]:[s.height(),s.width()],d&&(u=parseInt(d[1],10)/100*n[l?0:1]),h&&s.css(c?{height:0,width:u}:{height:u,width:0}),g[f[0]]=h?n[0]:u,v[f[1]]=h?n[1]:0,s.animate(g,m,t.easing).animate(v,m,t.easing,function(){l&&a.hide(),e.effects.restore(a,o),e.effects.removeWrapper(a),i()})},e.effects.effect.highlight=function(t,i){var s=e(this),n=[\"backgroundImage\",\"backgroundColor\",\"opacity\"],a=e.effects.setMode(s,t.mode||\"show\"),o={backgroundColor:s.css(\"backgroundColor\")};\"hide\"===a&&(o.opacity=0),e.effects.save(s,n),s.show().css({backgroundImage:\"none\",backgroundColor:t.color||\"#ffff99\"}).animate(o,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){\"hide\"===a&&s.hide(),e.effects.restore(s,n),i()}})},e.effects.effect.size=function(t,i){var s,n,a,o=e(this),r=[\"position\",\"top\",\"bottom\",\"left\",\"right\",\"width\",\"height\",\"overflow\",\"opacity\"],h=[\"position\",\"top\",\"bottom\",\"left\",\"right\",\"overflow\",\"opacity\"],l=[\"width\",\"height\",\"overflow\"],u=[\"fontSize\"],d=[\"borderTopWidth\",\"borderBottomWidth\",\"paddingTop\",\"paddingBottom\"],c=[\"borderLeftWidth\",\"borderRightWidth\",\"paddingLeft\",\"paddingRight\"],p=e.effects.setMode(o,t.mode||\"effect\"),f=t.restore||\"effect\"!==p,m=t.scale||\"both\",g=t.origin||[\"middle\",\"center\"],v=o.css(\"position\"),y=f?r:h,b={height:0,width:0,outerHeight:0,outerWidth:0};\"show\"===p&&o.show(),s={height:o.height(),width:o.width(),outerHeight:o.outerHeight(),outerWidth:o.outerWidth()},\"toggle\"===t.mode&&\"show\"===p?(o.from=t.to||b,o.to=t.from||s):(o.from=t.from||(\"show\"===p?b:s),o.to=t.to||(\"hide\"===p?b:s)),a={from:{y:o.from.height/s.height,x:o.from.width/s.width},to:{y:o.to.height/s.height,x:o.to.width/s.width}},(\"box\"===m||\"both\"===m)&&(a.from.y!==a.to.y&&(y=y.concat(d),o.from=e.effects.setTransition(o,d,a.from.y,o.from),o.to=e.effects.setTransition(o,d,a.to.y,o.to)),a.from.x!==a.to.x&&(y=y.concat(c),o.from=e.effects.setTransition(o,c,a.from.x,o.from),o.to=e.effects.setTransition(o,c,a.to.x,o.to))),(\"content\"===m||\"both\"===m)&&a.from.y!==a.to.y&&(y=y.concat(u).concat(l),o.from=e.effects.setTransition(o,u,a.from.y,o.from),o.to=e.effects.setTransition(o,u,a.to.y,o.to)),e.effects.save(o,y),o.show(),e.effects.createWrapper(o),o.css(\"overflow\",\"hidden\").css(o.from),g&&(n=e.effects.getBaseline(g,s),o.from.top=(s.outerHeight-o.outerHeight())*n.y,o.from.left=(s.outerWidth-o.outerWidth())*n.x,o.to.top=(s.outerHeight-o.to.outerHeight)*n.y,o.to.left=(s.outerWidth-o.to.outerWidth)*n.x),o.css(o.from),(\"content\"===m||\"both\"===m)&&(d=d.concat([\"marginTop\",\"marginBottom\"]).concat(u),c=c.concat([\"marginLeft\",\"marginRight\"]),l=r.concat(d).concat(c),o.find(\"*[width]\").each(function(){var i=e(this),s={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};f&&e.effects.save(i,l),i.from={height:s.height*a.from.y,width:s.width*a.from.x,outerHeight:s.outerHeight*a.from.y,outerWidth:s.outerWidth*a.from.x},i.to={height:s.height*a.to.y,width:s.width*a.to.x,outerHeight:s.height*a.to.y,outerWidth:s.width*a.to.x},a.from.y!==a.to.y&&(i.from=e.effects.setTransition(i,d,a.from.y,i.from),i.to=e.effects.setTransition(i,d,a.to.y,i.to)),a.from.x!==a.to.x&&(i.from=e.effects.setTransition(i,c,a.from.x,i.from),i.to=e.effects.setTransition(i,c,a.to.x,i.to)),i.css(i.from),i.animate(i.to,t.duration,t.easing,function(){f&&e.effects.restore(i,l)})})),o.animate(o.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){0===o.to.opacity&&o.css(\"opacity\",o.from.opacity),\"hide\"===p&&o.hide(),e.effects.restore(o,y),f||(\"static\"===v?o.css({position:\"relative\",top:o.to.top,left:o.to.left}):e.each([\"top\",\"left\"],function(e,t){o.css(t,function(t,i){var s=parseInt(i,10),n=e?o.to.left:o.to.top;return\"auto\"===i?n+\"px\":s+n+\"px\"})})),e.effects.removeWrapper(o),i()}})},e.effects.effect.scale=function(t,i){var s=e(this),n=e.extend(!0,{},t),a=e.effects.setMode(s,t.mode||\"effect\"),o=parseInt(t.percent,10)||(0===parseInt(t.percent,10)?0:\"hide\"===a?0:100),r=t.direction||\"both\",h=t.origin,l={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()},u={y:\"horizontal\"!==r?o/100:1,x:\"vertical\"!==r?o/100:1};n.effect=\"size\",n.queue=!1,n.complete=i,\"effect\"!==a&&(n.origin=h||[\"middle\",\"center\"],n.restore=!0),n.from=t.from||(\"show\"===a?{height:0,width:0,outerHeight:0,outerWidth:0}:l),n.to={height:l.height*u.y,width:l.width*u.x,outerHeight:l.outerHeight*u.y,outerWidth:l.outerWidth*u.x},n.fade&&(\"show\"===a&&(n.from.opacity=0,n.to.opacity=1),\"hide\"===a&&(n.from.opacity=1,n.to.opacity=0)),s.effect(n)},e.effects.effect.puff=function(t,i){var s=e(this),n=e.effects.setMode(s,t.mode||\"hide\"),a=\"hide\"===n,o=parseInt(t.percent,10)||150,r=o/100,h={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()};e.extend(t,{effect:\"scale\",queue:!1,fade:!0,mode:n,complete:i,percent:a?o:100,from:a?h:{height:h.height*r,width:h.width*r,outerHeight:h.outerHeight*r,outerWidth:h.outerWidth*r}}),s.effect(t)},e.effects.effect.pulsate=function(t,i){var s,n=e(this),a=e.effects.setMode(n,t.mode||\"show\"),o=\"show\"===a,r=\"hide\"===a,h=o||\"hide\"===a,l=2*(t.times||5)+(h?1:0),u=t.duration/l,d=0,c=n.queue(),p=c.length;for((o||!n.is(\":visible\"))&&(n.css(\"opacity\",0).show(),d=1),s=1;l>s;s++)n.animate({opacity:d},u,t.easing),d=1-d;n.animate({opacity:d},u,t.easing),n.queue(function(){r&&n.hide(),i()}),p>1&&c.splice.apply(c,[1,0].concat(c.splice(p,l+1))),n.dequeue()},e.effects.effect.shake=function(t,i){var s,n=e(this),a=[\"position\",\"top\",\"bottom\",\"left\",\"right\",\"height\",\"width\"],o=e.effects.setMode(n,t.mode||\"effect\"),r=t.direction||\"left\",h=t.distance||20,l=t.times||3,u=2*l+1,d=Math.round(t.duration/u),c=\"up\"===r||\"down\"===r?\"top\":\"left\",p=\"up\"===r||\"left\"===r,f={},m={},g={},v=n.queue(),y=v.length;for(e.effects.save(n,a),n.show(),e.effects.createWrapper(n),f[c]=(p?\"-=\":\"+=\")+h,m[c]=(p?\"+=\":\"-=\")+2*h,g[c]=(p?\"-=\":\"+=\")+2*h,n.animate(f,d,t.easing),s=1;l>s;s++)n.animate(m,d,t.easing).animate(g,d,t.easing);n.animate(m,d,t.easing).animate(f,d/2,t.easing).queue(function(){\"hide\"===o&&n.hide(),e.effects.restore(n,a),e.effects.removeWrapper(n),i()}),y>1&&v.splice.apply(v,[1,0].concat(v.splice(y,u+1))),n.dequeue()},e.effects.effect.slide=function(t,i){var s,n=e(this),a=[\"position\",\"top\",\"bottom\",\"left\",\"right\",\"width\",\"height\"],o=e.effects.setMode(n,t.mode||\"show\"),r=\"show\"===o,h=t.direction||\"left\",l=\"up\"===h||\"down\"===h?\"top\":\"left\",u=\"up\"===h||\"left\"===h,d={};e.effects.save(n,a),n.show(),s=t.distance||n[\"top\"===l?\"outerHeight\":\"outerWidth\"](!0),e.effects.createWrapper(n).css({overflow:\"hidden\"}),r&&n.css(l,u?isNaN(s)?\"-\"+s:-s:s),d[l]=(r?u?\"+=\":\"-=\":u?\"-=\":\"+=\")+s,n.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){\"hide\"===o&&n.hide(),e.effects.restore(n,a),e.effects.removeWrapper(n),i()}})},e.effects.effect.transfer=function(t,i){var s=e(this),n=e(t.to),a=\"fixed\"===n.css(\"position\"),o=e(\"body\"),r=a?o.scrollTop():0,h=a?o.scrollLeft():0,l=n.offset(),u={top:l.top-r,left:l.left-h,height:n.innerHeight(),width:n.innerWidth()},d=s.offset(),c=e(\"\").appendTo(document.body).addClass(t.className).css({top:d.top-r,left:d.left-h,height:s.innerHeight(),width:s.innerWidth(),position:a?\"fixed\":\"absolute\"}).animate(u,t.duration,t.easing,function(){c.remove(),i()})}}); .tocify { width: 20%; max-height: 90%; overflow: auto; margin-left: 2%; position: fixed; border: 1px solid #ccc; border-radius: 6px; } .tocify ul, .tocify li { list-style: none; margin: 0; padding: 0; border: none; line-height: 30px; } .tocify-header { text-indent: 10px; } .tocify-subheader { text-indent: 20px; display: none; } .tocify-subheader li { font-size: 12px; } .tocify-subheader .tocify-subheader { text-indent: 30px; } .tocify-subheader .tocify-subheader .tocify-subheader { text-indent: 40px; } .tocify-subheader .tocify-subheader .tocify-subheader .tocify-subheader { text-indent: 50px; } .tocify-subheader .tocify-subheader .tocify-subheader .tocify-subheader .tocify-subheader { text-indent: 60px; } .tocify .tocify-item > a, .tocify .nav-list .nav-header { margin: 0px; } .tocify .tocify-item a, .tocify .list-group-item { padding: 5px; } .tocify .nav-pills > li { float: none; } /* jquery Tocify - v1.9.1 - 2013-10-22 * http://www.gregfranko.com/jquery.tocify.js/ * Copyright (c) 2013 Greg Franko; Licensed MIT */ // Immediately-Invoked Function Expression (IIFE) [Ben Alman Blog Post](http://benalman.com/news/2010/11/immediately-invoked-function-expression/) that calls another IIFE that contains all of the plugin logic. I used this pattern so that anyone viewing this code would not have to scroll to the bottom of the page to view the local parameters that were passed to the main IIFE. (function(tocify) { // ECMAScript 5 Strict Mode: [John Resig Blog Post](http://ejohn.org/blog/ecmascript-5-strict-mode-json-and-more/) \"use strict\"; // Calls the second IIFE and locally passes in the global jQuery, window, and document objects tocify(window.jQuery, window, document); } // Locally passes in `jQuery`, the `window` object, the `document` object, and an `undefined` variable. The `jQuery`, `window` and `document` objects are passed in locally, to improve performance, since javascript first searches for a variable match within the local variables set before searching the global variables set. All of the global variables are also passed in locally to be minifier friendly. `undefined` can be passed in locally, because it is not a reserved word in JavaScript. (function($, window, document, undefined) { // ECMAScript 5 Strict Mode: [John Resig Blog Post](http://ejohn.org/blog/ecmascript-5-strict-mode-json-and-more/) \"use strict\"; var tocClassName = \"tocify\", tocClass = \".\" + tocClassName, tocFocusClassName = \"tocify-focus\", tocHoverClassName = \"tocify-hover\", hideTocClassName = \"tocify-hide\", hideTocClass = \".\" + hideTocClassName, headerClassName = \"tocify-header\", headerClass = \".\" + headerClassName, subheaderClassName = \"tocify-subheader\", subheaderClass = \".\" + subheaderClassName, itemClassName = \"tocify-item\", itemClass = \".\" + itemClassName, extendPageClassName = \"tocify-extend-page\", extendPageClass = \".\" + extendPageClassName; // Calling the jQueryUI Widget Factory Method $.widget(\"toc.tocify\", { //Plugin version version: \"1.9.1\", // These options will be used as defaults options: { // **context**: Accepts String: Any jQuery selector // The container element that holds all of the elements used to generate the table of contents context: \"body\", // **ignoreSelector**: Accepts String: Any jQuery selector // A selector to any element that would be matched by selectors that you wish to be ignored ignoreSelector: null, // **selectors**: Accepts an Array of Strings: Any jQuery selectors // The element's used to generate the table of contents. The order is very important since it will determine the table of content's nesting structure selectors: \"h1, h2, h3\", // **showAndHide**: Accepts a boolean: true or false // Used to determine if elements should be shown and hidden showAndHide: true, // **showEffect**: Accepts String: \"none\", \"fadeIn\", \"show\", or \"slideDown\" // Used to display any of the table of contents nested items showEffect: \"slideDown\", // **showEffectSpeed**: Accepts Number (milliseconds) or String: \"slow\", \"medium\", or \"fast\" // The time duration of the show animation showEffectSpeed: \"medium\", // **hideEffect**: Accepts String: \"none\", \"fadeOut\", \"hide\", or \"slideUp\" // Used to hide any of the table of contents nested items hideEffect: \"slideUp\", // **hideEffectSpeed**: Accepts Number (milliseconds) or String: \"slow\", \"medium\", or \"fast\" // The time duration of the hide animation hideEffectSpeed: \"medium\", // **smoothScroll**: Accepts a boolean: true or false // Determines if a jQuery animation should be used to scroll to specific table of contents items on the page smoothScroll: true, // **smoothScrollSpeed**: Accepts Number (milliseconds) or String: \"slow\", \"medium\", or \"fast\" // The time duration of the smoothScroll animation smoothScrollSpeed: \"medium\", // **scrollTo**: Accepts Number (pixels) // The amount of space between the top of page and the selected table of contents item after the page has been scrolled scrollTo: 0, // **showAndHideOnScroll**: Accepts a boolean: true or false // Determines if table of contents nested items should be shown and hidden while scrolling showAndHideOnScroll: true, // **highlightOnScroll**: Accepts a boolean: true or false // Determines if table of contents nested items should be highlighted (set to a different color) while scrolling highlightOnScroll: true, // **highlightOffset**: Accepts a number // The offset distance in pixels to trigger the next active table of contents item highlightOffset: 40, // **theme**: Accepts a string: \"bootstrap\", \"jqueryui\", or \"none\" // Determines if Twitter Bootstrap, jQueryUI, or Tocify classes should be added to the table of contents theme: \"bootstrap\", // **extendPage**: Accepts a boolean: true or false // If a user scrolls to the bottom of the page and the page is not tall enough to scroll to the last table of contents item, then the page height is increased extendPage: true, // **extendPageOffset**: Accepts a number: pixels // How close to the bottom of the page a user must scroll before the page is extended extendPageOffset: 100, // **history**: Accepts a boolean: true or false // Adds a hash to the page url to maintain history history: true, // **scrollHistory**: Accepts a boolean: true or false // Adds a hash to the page url, to maintain history, when scrolling to a TOC item scrollHistory: false, // **hashGenerator**: How the hash value (the anchor segment of the URL, following the // # character) will be generated. // // \"compact\" (default) - #CompressesEverythingTogether // \"pretty\" - #looks-like-a-nice-url-and-is-easily-readable // function(text, element){} - Your own hash generation function that accepts the text as an // argument, and returns the hash value. hashGenerator: \"compact\", // **highlightDefault**: Accepts a boolean: true or false // Set's the first TOC item as active if no other TOC item is active. highlightDefault: true }, // _Create // ------- // Constructs the plugin. Only called once. _create: function() { var self = this; self.extendPageScroll = true; // Internal array that keeps track of all TOC items (Helps to recognize if there are duplicate TOC item strings) self.items = []; // Generates the HTML for the dynamic table of contents self._generateToc(); // Adds CSS classes to the newly generated table of contents HTML self._addCSSClasses(); self.webkit = (function() { for (var prop in window) { if (prop) { if (prop.toLowerCase().indexOf(\"webkit\") !== -1) { return true; } } } return false; }()); // Adds jQuery event handlers to the newly generated table of contents self._setEventHandlers(); // Binding to the Window load event to make sure the correct scrollTop is calculated $(window).on(\"load\", function() { // Sets the active TOC item self._setActiveElement(true); // Once all animations on the page are complete, this callback function will be called $(\"html, body\").promise().done(function() { setTimeout(function() { self.extendPageScroll = false; }, 0); }); }); }, // _generateToc // ------------ // Generates the HTML for the dynamic table of contents _generateToc: function() { // _Local variables_ // Stores the plugin context in the self variable var self = this, // All of the HTML tags found within the context provided (i.e. body) that match the top level jQuery selector above firstElem, // Instantiated variable that will store the top level newly created unordered list DOM element ul, ignoreSelector = self.options.ignoreSelector; // Determine the element to start the toc with // get all the top level selectors firstElem = []; var selectors = this.options.selectors.replace(/ /g, \"\").split(\",\"); // find the first set that have at least one non-ignored element for(var i = 0; i < selectors.length; i++) { var foundSelectors = $(this.options.context).find(selectors[i]); for (var s = 0; s < foundSelectors.length; s++) { if (!$(foundSelectors[s]).is(ignoreSelector)) { firstElem = foundSelectors; break; } } if (firstElem.length> 0) break; } if (!firstElem.length) { self.element.addClass(hideTocClassName); return; } self.element.addClass(tocClassName); // Loops through each top level selector firstElem.each(function(index) { //If the element matches the ignoreSelector then we skip it if ($(this).is(ignoreSelector)) { return; } // Creates an unordered list HTML element and adds a dynamic ID and standard class name ul = $(\"\", { \"id\": headerClassName + index, \"class\": headerClassName }). // Appends a top level list item HTML element to the previously created HTML header append(self._nestElements($(this), index)); // Add the created unordered list element to the HTML element calling the plugin self.element.append(ul); // Finds all of the HTML tags between the header and subheader elements $(this).nextUntil(this.nodeName.toLowerCase()).each(function() { // If there are no nested subheader elemements if ($(this).find(self.options.selectors).length === 0) { // Loops through all of the subheader elements $(this).filter(self.options.selectors).each(function() { //If the element matches the ignoreSelector then we skip it if ($(this).is(ignoreSelector)) { return; } self._appendSubheaders.call(this, self, ul); }); } // If there are nested subheader elements else { // Loops through all of the subheader elements $(this).find(self.options.selectors).each(function() { //If the element matches the ignoreSelector then we skip it if ($(this).is(ignoreSelector)) { return; } self._appendSubheaders.call(this, self, ul); }); } }); }); }, _setActiveElement: function(pageload) { var self = this, hash = window.location.hash.substring(1), elem = self.element.find('li[data-unique=\"' + hash + '\"]'); if (hash.length) { // Removes highlighting from all of the list item's self.element.find(\".\" + self.focusClass).removeClass(self.focusClass); // Highlights the current list item that was clicked elem.addClass(self.focusClass); // Triggers the click event on the currently focused TOC item elem.click(); } else { // Removes highlighting from all of the list item's self.element.find(\".\" + self.focusClass).removeClass(self.focusClass); if (!hash.length && pageload && self.options.highlightDefault) { // Highlights the first TOC item if no other items are highlighted self.element.find(itemClass).first().addClass(self.focusClass); } } return self; }, // _nestElements // ------------- // Helps create the table of contents list by appending nested list items _nestElements: function(self, index) { var arr, item, hashValue; arr = $.grep(this.items, function(item) { return item === self.text(); }); // If there is already a duplicate TOC item if (arr.length) { // Adds the current TOC item text and index (for slight randomization) to the internal array this.items.push(self.text() + index); } // If there not a duplicate TOC item else { // Adds the current TOC item text to the internal array this.items.push(self.text()); } hashValue = this._generateHashValue(arr, self, index); // Appends a list item HTML element to the last unordered list HTML element found within the HTML element calling the plugin item = $(\"\", { // Sets a common class name to the list item \"class\": itemClassName, \"data-unique\": hashValue }); if (this.options.theme !== \"bootstrap3\") { item.append($(\"\", { \"html\": self.html() })); } else { item.html(self.html()); } // Adds an HTML anchor tag before the currently traversed HTML element self.before($(\"\", { // Sets a name attribute on the anchor tag to the text of the currently traversed HTML element (also making sure that all whitespace is replaced with an underscore) \"name\": hashValue, \"data-unique\": hashValue })); return item; }, // _generateHashValue // ------------------ // Generates the hash value that will be used to refer to each item. _generateHashValue: function(arr, self, index) { var hashValue = \"\", hashGeneratorOption = this.options.hashGenerator; if (hashGeneratorOption === \"pretty\") { // prettify the text hashValue = self.text().toLowerCase().replace(/\\s/g, \"-\"); // fix double hyphens while (hashValue.indexOf(\"--\") > -1) { hashValue = hashValue.replace(/--/g, \"-\"); } // fix colon-space instances while (hashValue.indexOf(\":-\") > -1) { hashValue = hashValue.replace(/:-/g, \"-\"); } } else if (typeof hashGeneratorOption === \"function\") { // call the function hashValue = hashGeneratorOption(self.text(), self); } else { // compact - the default hashValue = self.text().replace(/\\s/g, \"\"); } // add the index if we need to if (arr.length) { hashValue += \"\" + index; } // return the value return hashValue; }, // _appendElements // --------------- // Helps create the table of contents list by appending subheader elements _appendSubheaders: function(self, ul) { // The current element index var index = $(this).index(self.options.selectors), // Finds the previous header DOM element previousHeader = $(self.options.selectors).eq(index - 1), currentTagName = +$(this).prop(\"tagName\").charAt(1), previousTagName = +previousHeader.prop(\"tagName\").charAt(1), lastSubheader; // If the current header DOM element is smaller than the previous header DOM element or the first subheader if (currentTagName < previousTagName) { // Selects the last unordered list HTML found within the HTML element calling the plugin self.element.find(subheaderClass + \"[data-tag=\" + currentTagName + \"]\").last().append(self._nestElements($(this), index)); } // If the current header DOM element is the same type of header(eg. h4) as the previous header DOM element else if (currentTagName === previousTagName) { ul.find(itemClass).last().after(self._nestElements($(this), index)); } else { // Selects the last unordered list HTML found within the HTML element calling the plugin ul.find(itemClass).last(). // Appends an unorderedList HTML element to the dynamic `unorderedList` variable and sets a common class name after($(\"\", { \"class\": subheaderClassName, \"data-tag\": currentTagName })).next(subheaderClass). // Appends a list item HTML element to the last unordered list HTML element found within the HTML element calling the plugin append(self._nestElements($(this), index)); } }, // _setEventHandlers // ---------------- // Adds jQuery event handlers to the newly generated table of contents _setEventHandlers: function() { // _Local variables_ // Stores the plugin context in the self variable var self = this, // Instantiates a new variable that will be used to hold a specific element's context $self, // Instantiates a new variable that will be used to determine the smoothScroll animation time duration duration; // Event delegation that looks for any clicks on list item elements inside of the HTML element calling the plugin this.element.on(\"click.tocify\", \"li\", function(event) { if (self.options.history) { window.location.hash = $(this).attr(\"data-unique\"); } // Removes highlighting from all of the list item's self.element.find(\".\" + self.focusClass).removeClass(self.focusClass); // Highlights the current list item that was clicked $(this).addClass(self.focusClass); // If the showAndHide option is true if (self.options.showAndHide) { var elem = $('li[data-unique=\"' + $(this).attr(\"data-unique\") + '\"]'); self._triggerShow(elem); } self._scrollTo($(this)); }); // Mouseenter and Mouseleave event handlers for the list item's within the HTML element calling the plugin this.element.find(\"li\").on({ // Mouseenter event handler \"mouseenter.tocify\": function() { // Adds a hover CSS class to the current list item $(this).addClass(self.hoverClass); // Makes sure the cursor is set to the pointer icon $(this).css(\"cursor\", \"pointer\"); }, // Mouseleave event handler \"mouseleave.tocify\": function() { if (self.options.theme !== \"bootstrap\") { // Removes the hover CSS class from the current list item $(this).removeClass(self.hoverClass); } } }); // only attach handler if needed (expensive in IE) if (self.options.extendPage || self.options.highlightOnScroll || self.options.scrollHistory || self.options.showAndHideOnScroll) { // Window scroll event handler $(window).on(\"scroll.tocify\", function() { // Once all animations on the page are complete, this callback function will be called $(\"html, body\").promise().done(function() { // Local variables // Stores how far the user has scrolled var winScrollTop = $(window).scrollTop(), // Stores the height of the window winHeight = $(window).height(), // Stores the height of the document docHeight = $(document).height(), scrollHeight = $(\"body\")[0].scrollHeight, // Instantiates a variable that will be used to hold a selected HTML element elem, lastElem, lastElemOffset, currentElem; if (self.options.extendPage) { // If the user has scrolled to the bottom of the page and the last toc item is not focused if ((self.webkit && winScrollTop >= scrollHeight - winHeight - self.options.extendPageOffset) || (!self.webkit && winHeight + winScrollTop > docHeight - self.options.extendPageOffset)) { if (!$(extendPageClass).length) { lastElem = $('div[data-unique=\"' + $(itemClass).last().attr(\"data-unique\") + '\"]'); if (!lastElem.length) return; // Gets the top offset of the page header that is linked to the last toc item lastElemOffset = lastElem.offset().top; // Appends a div to the bottom of the page and sets the height to the difference of the window scrollTop and the last element's position top offset $(self.options.context).append($(\"\", { \"class\": extendPageClassName, \"height\": Math.abs(lastElemOffset - winScrollTop) + \"px\", \"data-unique\": extendPageClassName })); if (self.extendPageScroll) { currentElem = self.element.find('li.' + self.focusClass); self._scrollTo($('div[data-unique=\"' + currentElem.attr(\"data-unique\") + '\"]')); } } } } // The zero timeout ensures the following code is run after the scroll events setTimeout(function() { // _Local variables_ // Stores the distance to the closest anchor var closestAnchorDistance = null, // Stores the index of the closest anchor closestAnchorIdx = null, // Keeps a reference to all anchors anchors = $(self.options.context).find(\"div[data-unique]\"), anchorText; // Determines the index of the closest anchor anchors.each(function(idx) { var distance = Math.abs(($(this).next().length ? $(this).next() : $(this)).offset().top - winScrollTop - self.options.highlightOffset); if (closestAnchorDistance == null || distance < closestAnchorDistance) { closestAnchorDistance = distance; closestAnchorIdx = idx; } else { return false; } }); anchorText = $(anchors[closestAnchorIdx]).attr(\"data-unique\"); // Stores the list item HTML element that corresponds to the currently traversed anchor tag elem = $('li[data-unique=\"' + anchorText + '\"]'); // If the `highlightOnScroll` option is true and a next element is found if (self.options.highlightOnScroll && elem.length) { // Removes highlighting from all of the list item's self.element.find(\".\" + self.focusClass).removeClass(self.focusClass); // Highlights the corresponding list item elem.addClass(self.focusClass); } if (self.options.scrollHistory) { if (window.location.hash !== \"#\" + anchorText) { window.location.replace(\"#\" + anchorText); } } // If the `showAndHideOnScroll` option is true if (self.options.showAndHideOnScroll && self.options.showAndHide) { self._triggerShow(elem, true); } }, 0); }); }); } }, // Show // ---- // Opens the current sub-header show: function(elem, scroll) { // Stores the plugin context in the `self` variable var self = this, element = elem; // If the sub-header is not already visible if (!elem.is(\":visible\")) { // If the current element does not have any nested subheaders, is not a header, and its parent is not visible if (!elem.find(subheaderClass).length && !elem.parent().is(headerClass) && !elem.parent().is(\":visible\")) { // Sets the current element to all of the subheaders within the current header elem = elem.parents(subheaderClass).add(elem); } // If the current element does not have any nested subheaders and is not a header else if (!elem.children(subheaderClass).length && !elem.parent().is(headerClass)) { // Sets the current element to the closest subheader elem = elem.closest(subheaderClass); } //Determines what jQuery effect to use switch (self.options.showEffect) { //Uses `no effect` case \"none\": elem.show(); break; //Uses the jQuery `show` special effect case \"show\": elem.show(self.options.showEffectSpeed); break; //Uses the jQuery `slideDown` special effect case \"slideDown\": elem.slideDown(self.options.showEffectSpeed); break; //Uses the jQuery `fadeIn` special effect case \"fadeIn\": elem.fadeIn(self.options.showEffectSpeed); break; //If none of the above options were passed, then a `jQueryUI show effect` is expected default: elem.show(); break; } } // If the current subheader parent element is a header if (elem.parent().is(headerClass)) { // Hides all non-active sub-headers self.hide($(subheaderClass).not(elem)); } // If the current subheader parent element is not a header else { // Hides all non-active sub-headers self.hide($(subheaderClass).not(elem.closest(headerClass).find(subheaderClass).not(elem.siblings()))); } // Maintains chainablity return self; }, // Hide // ---- // Closes the current sub-header hide: function(elem) { // Stores the plugin context in the `self` variable var self = this; //Determines what jQuery effect to use switch (self.options.hideEffect) { // Uses `no effect` case \"none\": elem.hide(); break; // Uses the jQuery `hide` special effect case \"hide\": elem.hide(self.options.hideEffectSpeed); break; // Uses the jQuery `slideUp` special effect case \"slideUp\": elem.slideUp(self.options.hideEffectSpeed); break; // Uses the jQuery `fadeOut` special effect case \"fadeOut\": elem.fadeOut(self.options.hideEffectSpeed); break; // If none of the above options were passed, then a `jqueryUI hide effect` is expected default: elem.hide(); break; } // Maintains chainablity return self; }, // _triggerShow // ------------ // Determines what elements get shown on scroll and click _triggerShow: function(elem, scroll) { var self = this; // If the current element's parent is a header element or the next element is a nested subheader element if (elem.parent().is(headerClass) || elem.next().is(subheaderClass)) { // Shows the next sub-header element self.show(elem.next(subheaderClass), scroll); } // If the current element's parent is a subheader element else if (elem.parent().is(subheaderClass)) { // Shows the parent sub-header element self.show(elem.parent(), scroll); } // Maintains chainability return self; }, // _addCSSClasses // -------------- // Adds CSS classes to the newly generated table of contents HTML _addCSSClasses: function() { // If the user wants a jqueryUI theme if (this.options.theme === \"jqueryui\") { this.focusClass = \"ui-state-default\"; this.hoverClass = \"ui-state-hover\"; //Adds the default styling to the dropdown list this.element.addClass(\"ui-widget\").find(\".toc-title\").addClass(\"ui-widget-header\").end().find(\"li\").addClass(\"ui-widget-content\"); } // If the user wants a twitterBootstrap theme else if (this.options.theme === \"bootstrap\") { this.element.find(headerClass + \",\" + subheaderClass).addClass(\"nav nav-list\"); this.focusClass = \"active\"; } // If the user wants a twitterBootstrap theme else if (this.options.theme === \"bootstrap3\") { this.element.find(headerClass + \",\" + subheaderClass).addClass(\"list-group\"); this.element.find(itemClass).addClass(\"list-group-item\"); this.focusClass = \"active\"; } // If a user does not want a prebuilt theme else { // Adds more neutral classes (instead of jqueryui) this.focusClass = tocFocusClassName; this.hoverClass = tocHoverClassName; } //Maintains chainability return this; }, // setOption // --------- // Sets a single Tocify option after the plugin is invoked setOption: function() { // Calls the jQueryUI Widget Factory setOption method $.Widget.prototype._setOption.apply(this, arguments); }, // setOptions // ---------- // Sets a single or multiple Tocify options after the plugin is invoked setOptions: function() { // Calls the jQueryUI Widget Factory setOptions method $.Widget.prototype._setOptions.apply(this, arguments); }, // _scrollTo // --------- // Scrolls to a specific element _scrollTo: function(elem) { var self = this, duration = self.options.smoothScroll || 0, scrollTo = self.options.scrollTo, currentDiv = $('div[data-unique=\"' + elem.attr(\"data-unique\") + '\"]'); if (!currentDiv.length) { return self; } // Once all animations on the page are complete, this callback function will be called $(\"html, body\").promise().done(function() { // Animates the html and body element scrolltops $(\"html, body\").animate({ // Sets the jQuery `scrollTop` to the top offset of the HTML div tag that matches the current list item's `data-unique` tag \"scrollTop\": currentDiv.offset().top - ($.isFunction(scrollTo) ? scrollTo.call() : scrollTo) + \"px\" }, { // Sets the smoothScroll animation time duration to the smoothScrollSpeed option \"duration\": duration }); }); // Maintains chainability return self; } }); })); //end of plugin /** * jQuery Plugin: Sticky Tabs * * @author Aidan Lister * adapted by Ruben Arslan to activate parent tabs too * http://www.aidanlister.com/2014/03/persisting-the-tab-state-in-bootstrap/ */ (function($) { \"use strict\"; $.fn.rmarkdownStickyTabs = function() { var context = this; // Show the tab corresponding with the hash in the URL, or the first tab var showStuffFromHash = function() { var hash = window.location.hash; var selector = hash ? 'a[href=\"' + hash + '\"]' : 'li.active > a'; var $selector = $(selector, context); if($selector.data('toggle') === \"tab\") { $selector.tab('show'); // walk up the ancestors of this element, show any hidden tabs $selector.parents('.section.tabset').each(function(i, elm) { var link = $('a[href=\"#' + $(elm).attr('id') + '\"]'); if(link.data('toggle') === \"tab\") { link.tab(\"show\"); } }); } }; // Set the correct tab when the page loads showStuffFromHash(context); // Set the correct tab when a user uses their back/forward button $(window).on('hashchange', function() { showStuffFromHash(context); }); // Change the URL when tabs are clicked $('a', context).on('click', function(e) { history.pushState(null, null, this.href); showStuffFromHash(context); }); return this; }; }(jQuery)); window.buildTabsets = function(tocID) { // build a tabset from a section div with the .tabset class function buildTabset(tabset) { // check for fade and pills options var fade = tabset.hasClass(\"tabset-fade\"); var pills = tabset.hasClass(\"tabset-pills\"); var navClass = pills ? \"nav-pills\" : \"nav-tabs\"; // determine the heading level of the tabset and tabs var match = tabset.attr('class').match(/level(\\d) /); if (match === null) return; var tabsetLevel = Number(match[1]); var tabLevel = tabsetLevel + 1; // find all subheadings immediately below var tabs = tabset.find(\"div.section.level\" + tabLevel); if (!tabs.length) return; // create tablist and tab-content elements var tabList = $(''); $(tabs[0]).before(tabList); var tabContent = $(''); $(tabs[0]).before(tabContent); // build the tabset var activeTab = 0; tabs.each(function(i) { // get the tab div var tab = $(tabs[i]); // get the id then sanitize it for use with bootstrap tabs var id = tab.attr('id'); // see if this is marked as the active tab if (tab.hasClass('active')) activeTab = i; // remove any table of contents entries associated with // this ID (since we'll be removing the heading element) $(\"div#\" + tocID + \" li a[href='#\" + id + \"']\").parent().remove(); // sanitize the id for use with bootstrap tabs id = id.replace(/[.\\/?&!#]/g, '').replace(/\\s/g, '_'); tab.attr('id', id); // get the heading element within it, grab it's text, then remove it var heading = tab.find('h' + tabLevel + ':first'); var headingText = heading.html(); heading.remove(); // build and append the tab list item var a = $('' + headingText + ''); a.attr('href', '#' + id); a.attr('aria-controls', id); var li = $(''); li.append(a); tabList.append(li); // set it's attributes tab.attr('role', 'tabpanel'); tab.addClass('tab-pane'); tab.addClass('tabbed-pane'); if (fade) tab.addClass('fade'); // move it into the tab content div tab.detach().appendTo(tabContent); }); // set active tab $(tabList.children('li')[activeTab]).addClass('active'); var active = $(tabContent.children('div.section')[activeTab]); active.addClass('active'); if (fade) active.addClass('in'); if (tabset.hasClass(\"tabset-sticky\")) tabset.rmarkdownStickyTabs(); } // convert section divs with the .tabset class to tabsets var tabsets = $(\"div.section.tabset\"); tabsets.each(function(i) { buildTabset($(tabsets[i])); }); }; .hljs-literal { color: #990073; } .hljs-number { color: #099; } .hljs-comment { color: #998; font-style: italic; } .hljs-keyword { color: #900; font-weight: bold; } .hljs-string { color: #d14; } code{white-space: pre-wrap;} span.smallcaps{font-variant: small-caps;} span.underline{text-decoration: underline;} div.column{display: inline-block; vertical-align: top; width: 50%;} div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;} ul.task-list{list-style: none;} code{white-space: pre;} if (window.hljs) { hljs.configure({languages: []}); hljs.initHighlightingOnLoad(); if (document.readyState && document.readyState === \"complete\") { window.setTimeout(function() { hljs.initHighlighting(); }, 0); } } .main-container { max-width: 940px; margin-left: auto; margin-right: auto; } img { max-width:100%; } .tabbed-pane { padding-top: 12px; } .html-widget { margin-bottom: 20px; } button.code-folding-btn:focus { outline: none; } summary { display: list-item; } details > summary > p:only-child { display: inline; } pre code { padding: 0; } .tabset-dropdown > .nav-tabs { display: inline-table; max-height: 500px; min-height: 44px; overflow-y: auto; border: 1px solid #ddd; border-radius: 4px; } .tabset-dropdown > .nav-tabs > li.active:before { content: \"\"; font-family: 'Glyphicons Halflings'; display: inline-block; padding: 10px; border-right: 1px solid #ddd; } .tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before { content: \"\"; border: none; } .tabset-dropdown > .nav-tabs.nav-tabs-open:before { content: \"\"; font-family: 'Glyphicons Halflings'; display: inline-block; padding: 10px; border-right: 1px solid #ddd; } .tabset-dropdown > .nav-tabs > li.active { display: block; } .tabset-dropdown > .nav-tabs > li > a, .tabset-dropdown > .nav-tabs > li > a:focus, .tabset-dropdown > .nav-tabs > li > a:hover { border: none; display: inline-block; border-radius: 4px; background-color: transparent; } .tabset-dropdown > .nav-tabs.nav-tabs-open > li { display: block; float: none; } .tabset-dropdown > .nav-tabs > li { display: none; } #TOC { margin: 25px 0px 20px 0px; } @media (max-width: 768px) { #TOC { position: relative; width: 100%; } } @media print { .toc-content { /* see https://github.com/w3c/csswg-drafts/issues/4434 */ float: right; } } .toc-content { padding-left: 30px; padding-right: 40px; } div.main-container { max-width: 1200px; } div.tocify { width: 20%; max-width: 260px; max-height: 85%; } @media (min-width: 768px) and (max-width: 991px) { div.tocify { width: 25%; } } @media (max-width: 767px) { div.tocify { width: 100%; max-width: none; } } .tocify ul, .tocify li { line-height: 20px; } .tocify-subheader .tocify-item { font-size: 0.90em; } .tocify .list-group-item { border-radius: 0px; } R을 이용한 공공데이터 분석_제8장 2022-06-22 02:00 제8장 통계분석 0단원 자율학습 ~~분석을 사용하야된다! -&gt; 선행연구를 찾아보기, 해당 분석 방법의 가설 설정 예시를 확인하기 크롤리의 통계학 강의(The R Book 축약본) The R Book) 강의 추천데이터사이언스를 위한 통계학입문Ⅰ 1단원 분석 방법 (172p) 1. 기술 통계 기술통계 : 평균, 최솟갑스 최댓값, 중간값 일반인들은 이정도만 알아도 업무가능. 2. 추론 통계 변수 간의 관계를 파악 / 새로운 사실을 발견(=추정) 2.1. 평균 차이 검정 [핵심] =평균분석, 숫자 가설 검정 : 평균의 차이를 검정 ex. 남자의 평균 키와 여자의 평균 키는 차이가 있을 것이다.(핵심키워드: 평균, 그룹_남/녀, 차이) 2.2. 교차분석 =빈도분석, 문자열 가설검정 : 각 범주별 빈도를 활용해서 관계성을 검정 ex. 작은 아파트에서의 대형 티비 구매율과 큰 평수 아파트의 대형 티비 구매율 비교 2.3. 상관관계분석 수치 데이터, 그래프가 1로 수렴 : 양의 상관관계(우상향 그래프) 그래프가 -1로 수렴 : 음의 상관관계(우하향 그래프프) 그래프가 0으로 수렴 : 두 수치 데이터 간에 상관관계가 없음(그래프가 엉망이면) 두 변수간의 상관관계가 있느냐 없느냐? ex. 기온에 따라 아이스 아메리카노 판매량을 비교 2.4. 회귀분석 [핵심] 회귀 분석: 독립변수와 종속변수 간의 인과관계를 분석하는 통계적 방법 단순회귀분석: 독립변수가 1석, 다중회귀본석: 독립변수가 2개 단순회귀분석: y(종속변수) = a(기울기)x+b(상수항) 가설검정 x값이 y값에 영향을 주느냐? ex. 기온(독립변수)이 판매량(종속변수)에 [긍정적인/부정적인인]영향을 주고 있을 것이다. 2단원 통계 검정 (176p) 1. 가설 (hypothesis) 귀무가설: 두 집단의 평균 차이가 없다. 대립가설: 두 집단의 평균 차이가 있다. (평소 우리가 궁금해 하는 분야) 2. 유의수준(反오차범위) 유의수준_p-value(p값): 귀무설(평균 차이 X)이 맞는데도 대립가설(평균 차이 O)을 채택할 확률 예외가 있을 수는 있으나, 이를 인정해주되(허용할 수 있는 예외 범위) 일반화할 수는 없다. 가설 검정에서 인정하는 유의 수준 [5%, 1%, 0.1%, 10%] 유의수준의 범위가 넓으면 연구 결과를 얻기 쉽지만 정확성이 떨어짐. 유의수준의 범위가 좁으면 연구 결과를 얻기 어렵만 정확성이 높아짐. 2.(2) 오차범위 오차범위=신뢰수준(confidence level) 오차범위 내에 있다 -&gt; 이 설문을 다음에 또 해보면 결과가 다르게 나올 수 있다. 아직까지 차이가 크지 않다. 오차범위 밖에 있다 -&gt; 이 설문을 다음에 또 해보면 결과가 똑같게 나온다. 최종결과 굳어짐. 3. 척도 [SKIP] 척도: 측정도구, 수치로 표시됨. 명목척도: 대상의 특성이나 범주 구분, 산술연산 X ex.성별, 결혼유무, 종교, 인종 서열척도: 대상의 등급순위, 산술연산 X ex.계급, 사회계층, 자격등급 등간척도: 대상을 일정 간격으로 구분, 덧셈과 뺄젬 O ex.온도, 학력, 시험점수 비율척도: 대상을 비율로 구분, 4칙연산 O ex.연령, 무게 3단원 통계 분석 사례 (178p) [통계 검정 사전 준비] 분석을 위한 데이터가 적절한지 검정 등분산 검정, 정규성 검정(수치 데이터가 정규 분포를 이루는가) 귀무가설, 대립가설을 적절하게 설정 +ex. 서울이 부산보다 잘 살것이다-&gt;가설이 아님 +ex. 서울의 평균 임금과 부산의 평균 임금이 차이가 있을 것이다. +선행연구(논문)을 찾아 양식을 응용하기 [통계검정 종류] 평균 차이 검점: (두 그룹 간의) 수치 데이터 + 범주 데이터 +중급이상_ 세 그룹 이상 평균 차이 검정 비율 차이 검정(교차분석): 범주 데이터 상관관계: 수치 데이터 회귀: [테스트] t.test, chisq.test, cor.test p.value +p.value &gt; 0.05 -&gt; 귀무가설 지지 +p.value &lt; 0.05 -&gt; 대립가설 지지 1. 두 집단의 평균 차이 검정 t.test 어떻게 데이터를 입력하는지 확인 결과가 나오면 p-value 확인, 유의수준 0.05이상-&gt;귀무가설, 유의수준 0.05이하-&gt;대립가설 t.test(data=데이터세트,종속변수_반응변수_y(비교값)~독립변수_설명변수_x(비교대상)) t.test(데이터세트\\(종속변수(비교값)~데이터세트\\)독립변수(비교대상)) 등분산 검정: 두 그룹의 평균 차이 검정이전에 사전 필수 검증이 필요하다. 데이터 양이 비슷한가. 조건이 비슷한가. ex.10건 vs 100건 비교할 수 없음. 두 그룹간의 분산이 비슷하면 –&gt; t.test(모수검정) 두 구룹간의 분산이 다르면 –&gt; 비모수 검정 귀무가설: 두 그룹간의 분산이 비슷하다. 대립가설: 두 그룹간의 분산이 다르다. 등분산 검정에서는 귀무가설을 지지해야 t.test를 사용할 수 있다. mpg1 &lt;-read.csv(&quot;data/mpg1.csv&quot;,stringsAsFactors = F) str(mpg1) ## &#39;data.frame&#39;: 234 obs. of 5 variables: ## $ manufacturer: chr &quot;audi&quot; &quot;audi&quot; &quot;audi&quot; &quot;audi&quot; ... ## $ trans : chr &quot;auto&quot; &quot;manual&quot; &quot;manual&quot; &quot;auto&quot; ... ## $ drv : chr &quot;f&quot; &quot;f&quot; &quot;f&quot; &quot;f&quot; ... ## $ cty : int 18 21 20 21 16 18 18 18 16 20 ... ## $ hwy : int 29 29 31 30 26 26 27 26 25 28 ... # 시각화 library(ggplot2) ggplot(mpg1,aes(x=trans,y=cty))+ geom_boxplot() # 평균값이 크게 차이나는지 확인하기 애매하다 # 때문에 t.test 통계검정을 한다. # 귀무가설 : auto와 manual의 cty 평균은 차이가 없다. # 대립가설 : auto와 manual의 cty 평균은 차이가 있다. t.test(data = mpg1,cty ~ trans) ## ## Welch Two Sample t-test ## ## data: cty by trans ## t = -4.5375, df = 132.32, p-value = 1.263e-05 ## alternative hypothesis: true difference in means between group auto and group manual is not equal to 0 ## 95 percent confidence interval: ## -3.887311 -1.527033 ## sample estimates: ## mean in group auto mean in group manual ## 15.96815 18.67532 # 종속변수 ~ 독립변수 # 반응변수 ~ 설명변수 # y x # 등분산 검정, 귀무가설이어야 t.test를 사용할 수 있다. p-value 0.05 이상여야함. var.test(data = mpg1, cty~trans) ## ## F test to compare two variances ## ## data: cty by trans ## F = 0.73539, num df = 156, denom df = 76, p-value = 0.1101 ## alternative hypothesis: true ratio of variances is not equal to 1 ## 95 percent confidence interval: ## 0.4912917 1.0719468 ## sample estimates: ## ratio of variances ## 0.7353887 # 시각화 방법 1 ggplot(mpg1, aes(x = cty, fill = trans)) + geom_histogram() ## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`. # 시각화 방법 2 ggplot(mpg1, aes(x = cty, fill = trans)) + geom_density(alpha = 0.1) 2. 교차분석 chisq.test() 함수 활용 교차분석: 범주형 변수들이 관계가 있다는 것을 입증. 평균의 차이가 아니라 ’비율에 차이’가 있는지를 검정합니다. 교차분석 검정은 R의 chisq.test() 함수로 진행 귀무가설 : trans에 따라 drv(4,f,r)의 (비율)차이가 없다. 대립가설 : trans에 따라 drv의 차이가 있다. # 빈도표 table(mpg1$trans,mpg1$drv) # 교차분석 ## ## 4 f r ## auto 75 65 17 ## manual 28 41 8 # 비율 prop.table(table(mpg1$trans, mpg1$drv),1) ## ## 4 f r ## auto 0.4777070 0.4140127 0.1082803 ## manual 0.3636364 0.5324675 0.1038961 # 결과- auto 4륜 구동(4)인 47.8%, manual 전륜구동(f) 53.2%가 가장 많음 # 가정- 실제로 통계적으로 봤을 때, 차이가 있는지 검정 # 귀무가설 : trans에 따라 drv(4,f,r)의 (비율)차이가 없다. # 대립가설 : trans에 따라 drv의 차이가 있다. # 방법 1 chisq.test(mpg1$trans,mpg1$drv) ## ## Pearson&#39;s Chi-squared test ## ## data: mpg1$trans and mpg1$drv ## X-squared = 3.1368, df = 2, p-value = 0.2084 # 방법 2 chisq.test(table(mpg1$trans,mpg1$drv)) ## ## Pearson&#39;s Chi-squared test ## ## data: table(mpg1$trans, mpg1$drv) ## X-squared = 3.1368, df = 2, p-value = 0.2084 # 방법 3 summary(table(mpg1$trans,mpg1$drv)) ## Number of cases in table: 234 ## Number of factors: 2 ## Test for independence of all factors: ## Chisq = 3.1368, df = 2, p-value = 0.2084 # p-value를 확인하고 귀무/대립가설인지 확인 # 결과- trans에 따라 drv(4,f,r)의 (비율)차이가 없다. 3. 상관관계분석 cor.test() 함수 활용 mpg1 &lt;-read.csv(&quot;data/mpg1.csv&quot;, stringsAsFactors = F) cor.test(mpg1$cty,mpg1$hwy) # 상관관계 분석 ## ## Pearson&#39;s product-moment correlation ## ## data: mpg1$cty and mpg1$hwy ## t = 49.585, df = 232, p-value &lt; 2.2e-16 ## alternative hypothesis: true correlation is not equal to 0 ## 95 percent confidence interval: ## 0.9433129 0.9657663 ## sample estimates: ## cor ## 0.9559159 # 결과 - p-value 가 2.2/10의16승 보다 작다. -&gt; 0.05보다 작음 -&gt; 대립가설 채택, # sample estimates: 0.9559159 상관관계가 1에 가까움 -&gt; 상관관계가 높다 4. 회귀분석) 회귀: (기초통계에서) 어떤 특정한 결과에 ’영향’을 주는 주 요인이 무엇이냐? 이를 찾는 것이 회귀. +ex. 매출에 영향을 주는 주 요인을 찾기 -날씨, 유명인 홍보, 음식 맛이 변함... [귀무가설 &amp; 대립가설 존재] 귀무가설 : x(독립변수)가 y(종속변수)에 영향을 주지 않는다. 대립가설 : x(독립변수)가 y(종속변수)에 영향을 준다. lm() 함수 사용: lm(종속변수~독립변수, data) 회귀의 중요성 [회귀 분석 종류] (확장성이 높음) 1세대 회귀 방법론 : 다항회귀분석, 다중회귀분석, 포아송회귀분석, etc 2세대 회귀 방법론 : 구조방정식 [머신러닝, 인공지능] (예측기능을 제공) y = ax + b 4.1. 단순회귀분석 단순회귀분석: 독립변수가 1개, 종속변수가 1개일 때 분석하는 방식. 또한 회귀분석의 변수는 독립변수와 종속변수 모두 등간척도 또는 비율척도이어야 한다. lm(data=데이터세트,종속변수~독립변수) lm(종속변수~독립변수,) lm(데이터세트\\(종속변수~데이터세트\\)독립변수) RA &lt;- lm(data = mtcars,mpg~disp) # 회귀분석 결과를 RA에 넣기 summary(RA) # 상세한 분석 결과 출력력 ## ## Call: ## lm(formula = mpg ~ disp, data = mtcars) ## ## Residuals: ## Min 1Q Median 3Q Max ## -4.8922 -2.2022 -0.9631 1.6272 7.2305 ## ## Coefficients: ## Estimate Std. Error t value Pr(&gt;|t|) ## (Intercept) 29.599855 1.229720 24.070 &lt; 2e-16 *** ## disp -0.041215 0.004712 -8.747 9.38e-10 *** ## --- ## Signif. codes: 0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1 ## ## Residual standard error: 3.251 on 30 degrees of freedom ## Multiple R-squared: 0.7183, Adjusted R-squared: 0.709 ## F-statistic: 76.51 on 1 and 30 DF, p-value: 9.38e-10 # [결과 확인] # 1. 우선 전체 식에 대한 p-value 확인 # p-value가 0.05 이상= 귀무가설이라면 # →데이터 처리 (쓸데없는 데이터 처리/데이터수집) # →회귀는 영향을 주는 요인을 찾는 것이기 때문 # 2. 개별 요인의 Pr(&gt;|t|)(=p-value) 확인 # p-value가 0.05 이상= 귀무가설이라면 # →해당 요인을 한.개.씩 제거하고 다시 lm() 함수 돌리기 # (한꺼번에 여러 요인을 지우면 안된다.) # →1번부터 반복 # 3. ANOVA (분산분석) # 1,2번 모두 p-value &lt; 0.05 (대립가설)이 되는 y 식을 찾으면 서로 같은 식인지 비교확인해야함. # 식1 : y = disp + var1 + var2 + var3 # 식2 : y = disp + var1 + var2 # 때문에 요인을 적당히 사전에 차출해야한다. # 컬럼 갯수가 100개 -&gt; 변수를 선택해야함 # [변수 선택법] # 전진선택법, 후진소거법, 단계적선택법 # 4. R-squared # R-squared (결정계수) = 설명력 = 0 ~ 1 # 1로 수렴할 수록 설명력이 좋다. # R-squared는 결정계수, Adjusted R-squared는 수정된 결정계수 # 두 수치 모두 1에 가까울 수록 회귀계수의 설명력이 높음 # 결정계수는 독립변수가 많아질 수 록 증가하는 특징이 있음.(다중회귀분석 해당당) # Multiple R-squared: 0.7183 -&gt; 70% 원인 이를 100으로 채우기 위해 요인을 찾아서 1에 가깝게 만들도록 한다. 4.2. 다중회귀분석 다중회귀분석: 종속변수에 영향을 주는 독립변수가 복수일 때 분석하는 방식. 여러 독립변수들은 서로 영향을 주면서 종속변수에 영향을 주기 때문에 한 독립변수가 종속변수에 미치는 영향력은 단순회귀분석을 했을 때와 다중회귀분석을 했을 때에 달라집니다. lm(data=데이터세트,종속변수~독립변수1+독립변수2+…) lm(종속변수~독립변수1+독립변수2+…,) lm(데이터세트\\(종속변수~데이터세트\\)독립변수1+독립변수2+…) lm(data=mtcars,mpg~disp+hp+wt) ## ## Call: ## lm(formula = mpg ~ disp + hp + wt, data = mtcars) ## ## Coefficients: ## (Intercept) disp hp wt ## 37.105505 -0.000937 -0.031157 -3.800891 RA &lt;-lm(data=mtcars,mpg~disp+hp+wt) # 회귀분석 결과를 RA에 넣기 summary(RA) ## ## Call: ## lm(formula = mpg ~ disp + hp + wt, data = mtcars) ## ## Residuals: ## Min 1Q Median 3Q Max ## -3.891 -1.640 -0.172 1.061 5.861 ## ## Coefficients: ## Estimate Std. Error t value Pr(&gt;|t|) ## (Intercept) 37.105505 2.110815 17.579 &lt; 2e-16 *** ## disp -0.000937 0.010350 -0.091 0.92851 ## hp -0.031157 0.011436 -2.724 0.01097 * ## wt -3.800891 1.066191 -3.565 0.00133 ** ## --- ## Signif. codes: 0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1 ## ## Residual standard error: 2.639 on 28 degrees of freedom ## Multiple R-squared: 0.8268, Adjusted R-squared: 0.8083 ## F-statistic: 44.57 on 3 and 28 DF, p-value: 8.65e-11 # [결과] # 1. p-value: 8.65e-11 -&gt; 0.01보다 작음 -&gt; 회귀모형 적합 # 2. 개별 요인의 Pr(&gt;|t|)(=p-value) 확인 # 3. Adjusted R-squared: 0.8083 -&gt; 결정계수ㅏ 0.0로 놏아져서 회귀모델의 설명력이 높아짐. // add bootstrap table styles to pandoc tables function bootstrapStylePandocTables() { $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed'); } $(document).ready(function () { bootstrapStylePandocTables(); }); $(document).ready(function () { window.buildTabsets(\"TOC\"); }); $(document).ready(function () { $('.tabset-dropdown > .nav-tabs > li').click(function () { $(this).parent().toggleClass('nav-tabs-open'); }); }); $(document).ready(function () { // temporarily add toc-ignore selector to headers for the consistency with Pandoc $('.unlisted.unnumbered').addClass('toc-ignore') // move toc-ignore selectors from section div to header $('div.section.toc-ignore') .removeClass('toc-ignore') .children('h1,h2,h3,h4,h5').addClass('toc-ignore'); // establish options var options = { selectors: \"h1,h2,h3\", theme: \"bootstrap3\", context: '.toc-content', hashGenerator: function (text) { return text.replace(/[.\\\\/?&!#]/g, '').replace(/\\s/g, '_'); }, ignoreSelector: \".toc-ignore\", scrollTo: 0 }; options.showAndHide = true; options.smoothScroll = true; // tocify var toc = $(\"#TOC\").tocify(options).data(\"toc-tocify\"); }); (function () { var script = document.createElement(\"script\"); script.type = \"text/javascript\"; script.src = \"https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML\"; document.getElementsByTagName(\"head\")[0].appendChild(script); })();"},{"title":"","date":"2022-06-23T08:58:20.408Z","updated":"2022-06-23T08:58:13.439Z","comments":true,"path":"images/R_9.html","permalink":"https://sallyzmk.github.io/images/R_9.html","excerpt":"","text":"R을 이용한 공공데이터 분석_제9장 // Pandoc 2.9 adds attributes on both header and div. We remove the former (to // be compatible with the behavior of Pandoc < 2.8). document.addEventListener('DOMContentLoaded', function(e) { var hs = document.querySelectorAll(\"div.section[class*='level'] > :first-child\"); var i, h, a; for (i = 0; i < hs.length; i++) { h = hs[i]; if (!/^h[1-6]$/i.test(h.tagName)) continue; // it should be a header h1-h6 a = h.attributes; while (a.length > 0) h.removeAttribute(a[0].name); } }); /*! jQuery v3.6.0 | (c) OpenJS Foundation and other contributors | jquery.org/license */ !function(e,t){\"use strict\";\"object\"==typeof module&&\"object\"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error(\"jQuery requires a window with a document\");return t(e)}:t(e)}(\"undefined\"!=typeof window?window:this,function(C,e){\"use strict\";var t=[],r=Object.getPrototypeOf,s=t.slice,g=t.flat?function(e){return t.flat.call(e)}:function(e){return t.concat.apply([],e)},u=t.push,i=t.indexOf,n={},o=n.toString,v=n.hasOwnProperty,a=v.toString,l=a.call(Object),y={},m=function(e){return\"function\"==typeof e&&\"number\"!=typeof e.nodeType&&\"function\"!=typeof e.item},x=function(e){return null!=e&&e===e.window},E=C.document,c={type:!0,src:!0,nonce:!0,noModule:!0};function b(e,t,n){var r,i,o=(n=n||E).createElement(\"script\");if(o.text=e,t)for(r in c)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function w(e){return null==e?e+\"\":\"object\"==typeof e||\"function\"==typeof e?n[o.call(e)]||\"object\":typeof e}var f=\"3.6.0\",S=function(e,t){return new S.fn.init(e,t)};function p(e){var t=!!e&&\"length\"in e&&e.length,n=w(e);return!m(e)&&!x(e)&&(\"array\"===n||0===t||\"number\"==typeof t&&0-1,f(u,function(e,t){t.cache=\"_\"+e,t.props.alpha={idx:3,type:\"percent\",def:1}}),l.fn=e.extend(l.prototype,{parse:function(n,o,r,h){if(n===t)return this._rgba=[null,null,null,null],this;(n.jquery||n.nodeType)&&(n=e(n).css(o),o=t);var d=this,c=e.type(n),p=this._rgba=[];return o!==t&&(n=[n,o,r,h],c=\"array\"),\"string\"===c?this.parse(s(n)||a._default):\"array\"===c?(f(u.rgba.props,function(e,t){p[t.idx]=i(n[t.idx],t)}),this):\"object\"===c?(n instanceof l?f(u,function(e,t){n[t.cache]&&(d[t.cache]=n[t.cache].slice())}):f(u,function(t,s){var a=s.cache;f(s.props,function(e,t){if(!d[a]&&s.to){if(\"alpha\"===e||null==n[e])return;d[a]=s.to(d._rgba)}d[a][t.idx]=i(n[e],t,!0)}),d[a]&&0>e.inArray(null,d[a].slice(0,3))&&(d[a][3]=1,s.from&&(d._rgba=s.from(d[a])))}),this):t},is:function(e){var i=l(e),s=!0,n=this;return f(u,function(e,a){var o,r=i[a.cache];return r&&(o=n[a.cache]||a.to&&a.to(n._rgba)||[],f(a.props,function(e,i){return null!=r[i.idx]?s=r[i.idx]===o[i.idx]:t})),s}),s},_space:function(){var e=[],t=this;return f(u,function(i,s){t[s.cache]&&e.push(i)}),e.pop()},transition:function(e,t){var s=l(e),n=s._space(),a=u[n],o=0===this.alpha()?l(\"transparent\"):this,r=o[a.cache]||a.to(o._rgba),h=r.slice();return s=s[a.cache],f(a.props,function(e,n){var a=n.idx,o=r[a],l=s[a],u=d[n.type]||{};null!==l&&(null===o?h[a]=l:(u.mod&&(l-o>u.mod/2?o+=u.mod:o-l>u.mod/2&&(o-=u.mod)),h[a]=i((l-o)*t+o,n)))}),this[n](h)},blend:function(t){if(1===this._rgba[3])return this;var i=this._rgba.slice(),s=i.pop(),n=l(t)._rgba;return l(e.map(i,function(e,t){return(1-s)*n[t]+s*e}))},toRgbaString:function(){var t=\"rgba(\",i=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===i[3]&&(i.pop(),t=\"rgb(\"),t+i.join()+\")\"},toHslaString:function(){var t=\"hsla(\",i=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+\"%\"),e});return 1===i[3]&&(i.pop(),t=\"hsl(\"),t+i.join()+\")\"},toHexString:function(t){var i=this._rgba.slice(),s=i.pop();return t&&i.push(~~(255*s)),\"#\"+e.map(i,function(e){return e=(e||0).toString(16),1===e.length?\"0\"+e:e}).join(\"\")},toString:function(){return 0===this._rgba[3]?\"transparent\":this.toRgbaString()}}),l.fn.parse.prototype=l.fn,u.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,i,s=e[0]/255,n=e[1]/255,a=e[2]/255,o=e[3],r=Math.max(s,n,a),h=Math.min(s,n,a),l=r-h,u=r+h,d=.5*u;return t=h===r?0:s===r?60*(n-a)/l+360:n===r?60*(a-s)/l+120:60*(s-n)/l+240,i=0===l?0:.5>=d?l/u:l/(2-u),[Math.round(t)%360,i,d,null==o?1:o]},u.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,i=e[1],s=e[2],a=e[3],o=.5>=s?s*(1+i):s+i-s*i,r=2*s-o;return[Math.round(255*n(r,o,t+1/3)),Math.round(255*n(r,o,t)),Math.round(255*n(r,o,t-1/3)),a]},f(u,function(s,n){var a=n.props,o=n.cache,h=n.to,u=n.from;l.fn[s]=function(s){if(h&&!this[o]&&(this[o]=h(this._rgba)),s===t)return this[o].slice();var n,r=e.type(s),d=\"array\"===r||\"object\"===r?s:arguments,c=this[o].slice();return f(a,function(e,t){var s=d[\"object\"===r?e:t.idx];null==s&&(s=c[t.idx]),c[t.idx]=i(s,t)}),u?(n=l(u(c)),n[o]=c,n):l(c)},f(a,function(t,i){l.fn[t]||(l.fn[t]=function(n){var a,o=e.type(n),h=\"alpha\"===t?this._hsla?\"hsla\":\"rgba\":s,l=this[h](),u=l[i.idx];return\"undefined\"===o?u:(\"function\"===o&&(n=n.call(this,u),o=e.type(n)),null==n&&i.empty?this:(\"string\"===o&&(a=r.exec(n),a&&(n=u+parseFloat(a[2])*(\"+\"===a[1]?1:-1))),l[i.idx]=n,this[h](l)))})})}),l.hook=function(t){var i=t.split(\" \");f(i,function(t,i){e.cssHooks[i]={set:function(t,n){var a,o,r=\"\";if(\"transparent\"!==n&&(\"string\"!==e.type(n)||(a=s(n)))){if(n=l(a||n),!c.rgba&&1!==n._rgba[3]){for(o=\"backgroundColor\"===i?t.parentNode:t;(\"\"===r||\"transparent\"===r)&&o&&o.style;)try{r=e.css(o,\"backgroundColor\"),o=o.parentNode}catch(h){}n=n.blend(r&&\"transparent\"!==r?r:\"_default\")}n=n.toRgbaString()}try{t.style[i]=n}catch(h){}}},e.fx.step[i]=function(t){t.colorInit||(t.start=l(t.elem,i),t.end=l(t.end),t.colorInit=!0),e.cssHooks[i].set(t.elem,t.start.transition(t.end,t.pos))}})},l.hook(o),e.cssHooks.borderColor={expand:function(e){var t={};return f([\"Top\",\"Right\",\"Bottom\",\"Left\"],function(i,s){t[\"border\"+s+\"Color\"]=e}),t}},a=e.Color.names={aqua:\"#00ffff\",black:\"#000000\",blue:\"#0000ff\",fuchsia:\"#ff00ff\",gray:\"#808080\",green:\"#008000\",lime:\"#00ff00\",maroon:\"#800000\",navy:\"#000080\",olive:\"#808000\",purple:\"#800080\",red:\"#ff0000\",silver:\"#c0c0c0\",teal:\"#008080\",white:\"#ffffff\",yellow:\"#ffff00\",transparent:[null,null,null,0],_default:\"#ffffff\"}}(p),function(){function t(t){var i,s,n=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,a={};if(n&&n.length&&n[0]&&n[n[0]])for(s=n.length;s--;)i=n[s],\"string\"==typeof n[i]&&(a[e.camelCase(i)]=n[i]);else for(i in n)\"string\"==typeof n[i]&&(a[i]=n[i]);return a}function i(t,i){var s,a,o={};for(s in i)a=i[s],t[s]!==a&&(n[s]||(e.fx.step[s]||!isNaN(parseFloat(a)))&&(o[s]=a));return o}var s=[\"add\",\"remove\",\"toggle\"],n={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each([\"borderLeftStyle\",\"borderRightStyle\",\"borderBottomStyle\",\"borderTopStyle\"],function(t,i){e.fx.step[i]=function(e){(\"none\"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(p.style(e.elem,i,e.end),e.setAttr=!0)}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(n,a,o,r){var h=e.speed(a,o,r);return this.queue(function(){var a,o=e(this),r=o.attr(\"class\")||\"\",l=h.children?o.find(\"*\").addBack():o;l=l.map(function(){var i=e(this);return{el:i,start:t(this)}}),a=function(){e.each(s,function(e,t){n[t]&&o[t+\"Class\"](n[t])})},a(),l=l.map(function(){return this.end=t(this.el[0]),this.diff=i(this.start,this.end),this}),o.attr(\"class\",r),l=l.map(function(){var t=this,i=e.Deferred(),s=e.extend({},h,{queue:!1,complete:function(){i.resolve(t)}});return this.el.animate(this.diff,s),i.promise()}),e.when.apply(e,l.get()).done(function(){a(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,\"\")})}),h.complete.call(o[0])})})},e.fn.extend({addClass:function(t){return function(i,s,n,a){return s?e.effects.animateClass.call(this,{add:i},s,n,a):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(i,s,n,a){return arguments.length>1?e.effects.animateClass.call(this,{remove:i},s,n,a):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(t){return function(i,s,n,a,o){return\"boolean\"==typeof s||void 0===s?n?e.effects.animateClass.call(this,s?{add:i}:{remove:i},n,a,o):t.apply(this,arguments):e.effects.animateClass.call(this,{toggle:i},s,n,a)}}(e.fn.toggleClass),switchClass:function(t,i,s,n,a){return e.effects.animateClass.call(this,{add:i,remove:t},s,n,a)}})}(),function(){function t(t,i,s,n){return e.isPlainObject(t)&&(i=t,t=t.effect),t={effect:t},null==i&&(i={}),e.isFunction(i)&&(n=i,s=null,i={}),(\"number\"==typeof i||e.fx.speeds[i])&&(n=s,s=i,i={}),e.isFunction(s)&&(n=s,s=null),i&&e.extend(t,i),s=s||i.duration,t.duration=e.fx.off?0:\"number\"==typeof s?s:s in e.fx.speeds?e.fx.speeds[s]:e.fx.speeds._default,t.complete=n||i.complete,t}function i(t){return!t||\"number\"==typeof t||e.fx.speeds[t]?!0:\"string\"!=typeof t||e.effects.effect[t]?e.isFunction(t)?!0:\"object\"!=typeof t||t.effect?!1:!0:!0}e.extend(e.effects,{version:\"1.11.4\",save:function(e,t){for(var i=0;t.length>i;i++)null!==t[i]&&e.data(c+t[i],e[0].style[t[i]])},restore:function(e,t){var i,s;for(s=0;t.length>s;s++)null!==t[s]&&(i=e.data(c+t[s]),void 0===i&&(i=\"\"),e.css(t[s],i))},setMode:function(e,t){return\"toggle\"===t&&(t=e.is(\":hidden\")?\"show\":\"hide\"),t},getBaseline:function(e,t){var i,s;switch(e[0]){case\"top\":i=0;break;case\"middle\":i=.5;break;case\"bottom\":i=1;break;default:i=e[0]/t.height}switch(e[1]){case\"left\":s=0;break;case\"center\":s=.5;break;case\"right\":s=1;break;default:s=e[1]/t.width}return{x:s,y:i}},createWrapper:function(t){if(t.parent().is(\".ui-effects-wrapper\"))return t.parent();var i={width:t.outerWidth(!0),height:t.outerHeight(!0),\"float\":t.css(\"float\")},s=e(\"\").addClass(\"ui-effects-wrapper\").css({fontSize:\"100%\",background:\"transparent\",border:\"none\",margin:0,padding:0}),n={width:t.width(),height:t.height()},a=document.activeElement;try{a.id}catch(o){a=document.body}return t.wrap(s),(t[0]===a||e.contains(t[0],a))&&e(a).focus(),s=t.parent(),\"static\"===t.css(\"position\")?(s.css({position:\"relative\"}),t.css({position:\"relative\"})):(e.extend(i,{position:t.css(\"position\"),zIndex:t.css(\"z-index\")}),e.each([\"top\",\"left\",\"bottom\",\"right\"],function(e,s){i[s]=t.css(s),isNaN(parseInt(i[s],10))&&(i[s]=\"auto\")}),t.css({position:\"relative\",top:0,left:0,right:\"auto\",bottom:\"auto\"})),t.css(n),s.css(i).show()},removeWrapper:function(t){var i=document.activeElement;return t.parent().is(\".ui-effects-wrapper\")&&(t.parent().replaceWith(t),(t[0]===i||e.contains(t[0],i))&&e(i).focus()),t},setTransition:function(t,i,s,n){return n=n||{},e.each(i,function(e,i){var a=t.cssUnit(i);a[0]>0&&(n[i]=a[0]*s+a[1])}),n}}),e.fn.extend({effect:function(){function i(t){function i(){e.isFunction(a)&&a.call(n[0]),e.isFunction(t)&&t()}var n=e(this),a=s.complete,r=s.mode;(n.is(\":hidden\")?\"hide\"===r:\"show\"===r)?(n[r](),i()):o.call(n[0],s,i)}var s=t.apply(this,arguments),n=s.mode,a=s.queue,o=e.effects.effect[s.effect];return e.fx.off||!o?n?this[n](s.duration,s.complete):this.each(function(){s.complete&&s.complete.call(this)}):a===!1?this.each(i):this.queue(a||\"fx\",i)},show:function(e){return function(s){if(i(s))return e.apply(this,arguments);var n=t.apply(this,arguments);return n.mode=\"show\",this.effect.call(this,n)}}(e.fn.show),hide:function(e){return function(s){if(i(s))return e.apply(this,arguments);var n=t.apply(this,arguments);return n.mode=\"hide\",this.effect.call(this,n)}}(e.fn.hide),toggle:function(e){return function(s){if(i(s)||\"boolean\"==typeof s)return e.apply(this,arguments);var n=t.apply(this,arguments);return n.mode=\"toggle\",this.effect.call(this,n)}}(e.fn.toggle),cssUnit:function(t){var i=this.css(t),s=[];return e.each([\"em\",\"px\",\"%\",\"pt\"],function(e,t){i.indexOf(t)>0&&(s=[parseFloat(i),t])}),s}})}(),function(){var t={};e.each([\"Quad\",\"Cubic\",\"Quart\",\"Quint\",\"Expo\"],function(e,i){t[i]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,i=4;((t=Math.pow(2,--i))-1)/11>e;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,i){e.easing[\"easeIn\"+t]=i,e.easing[\"easeOut\"+t]=function(e){return 1-i(1-e)},e.easing[\"easeInOut\"+t]=function(e){return.5>e?i(2*e)/2:1-i(-2*e+2)/2}})}(),e.effects,e.effects.effect.blind=function(t,i){var s,n,a,o=e(this),r=/up|down|vertical/,h=/up|left|vertical|horizontal/,l=[\"position\",\"top\",\"bottom\",\"left\",\"right\",\"height\",\"width\"],u=e.effects.setMode(o,t.mode||\"hide\"),d=t.direction||\"up\",c=r.test(d),p=c?\"height\":\"width\",f=c?\"top\":\"left\",m=h.test(d),g={},v=\"show\"===u;o.parent().is(\".ui-effects-wrapper\")?e.effects.save(o.parent(),l):e.effects.save(o,l),o.show(),s=e.effects.createWrapper(o).css({overflow:\"hidden\"}),n=s[p](),a=parseFloat(s.css(f))||0,g[p]=v?n:0,m||(o.css(c?\"bottom\":\"right\",0).css(c?\"top\":\"left\",\"auto\").css({position:\"absolute\"}),g[f]=v?a:n+a),v&&(s.css(p,0),m||s.css(f,a+n)),s.animate(g,{duration:t.duration,easing:t.easing,queue:!1,complete:function(){\"hide\"===u&&o.hide(),e.effects.restore(o,l),e.effects.removeWrapper(o),i() }})},e.effects.effect.bounce=function(t,i){var s,n,a,o=e(this),r=[\"position\",\"top\",\"bottom\",\"left\",\"right\",\"height\",\"width\"],h=e.effects.setMode(o,t.mode||\"effect\"),l=\"hide\"===h,u=\"show\"===h,d=t.direction||\"up\",c=t.distance,p=t.times||5,f=2*p+(u||l?1:0),m=t.duration/f,g=t.easing,v=\"up\"===d||\"down\"===d?\"top\":\"left\",y=\"up\"===d||\"left\"===d,b=o.queue(),_=b.length;for((u||l)&&r.push(\"opacity\"),e.effects.save(o,r),o.show(),e.effects.createWrapper(o),c||(c=o[\"top\"===v?\"outerHeight\":\"outerWidth\"]()/3),u&&(a={opacity:1},a[v]=0,o.css(\"opacity\",0).css(v,y?2*-c:2*c).animate(a,m,g)),l&&(c/=Math.pow(2,p-1)),a={},a[v]=0,s=0;p>s;s++)n={},n[v]=(y?\"-=\":\"+=\")+c,o.animate(n,m,g).animate(a,m,g),c=l?2*c:c/2;l&&(n={opacity:0},n[v]=(y?\"-=\":\"+=\")+c,o.animate(n,m,g)),o.queue(function(){l&&o.hide(),e.effects.restore(o,r),e.effects.removeWrapper(o),i()}),_>1&&b.splice.apply(b,[1,0].concat(b.splice(_,f+1))),o.dequeue()},e.effects.effect.clip=function(t,i){var s,n,a,o=e(this),r=[\"position\",\"top\",\"bottom\",\"left\",\"right\",\"height\",\"width\"],h=e.effects.setMode(o,t.mode||\"hide\"),l=\"show\"===h,u=t.direction||\"vertical\",d=\"vertical\"===u,c=d?\"height\":\"width\",p=d?\"top\":\"left\",f={};e.effects.save(o,r),o.show(),s=e.effects.createWrapper(o).css({overflow:\"hidden\"}),n=\"IMG\"===o[0].tagName?s:o,a=n[c](),l&&(n.css(c,0),n.css(p,a/2)),f[c]=l?a:0,f[p]=l?0:a/2,n.animate(f,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){l||o.hide(),e.effects.restore(o,r),e.effects.removeWrapper(o),i()}})},e.effects.effect.drop=function(t,i){var s,n=e(this),a=[\"position\",\"top\",\"bottom\",\"left\",\"right\",\"opacity\",\"height\",\"width\"],o=e.effects.setMode(n,t.mode||\"hide\"),r=\"show\"===o,h=t.direction||\"left\",l=\"up\"===h||\"down\"===h?\"top\":\"left\",u=\"up\"===h||\"left\"===h?\"pos\":\"neg\",d={opacity:r?1:0};e.effects.save(n,a),n.show(),e.effects.createWrapper(n),s=t.distance||n[\"top\"===l?\"outerHeight\":\"outerWidth\"](!0)/2,r&&n.css(\"opacity\",0).css(l,\"pos\"===u?-s:s),d[l]=(r?\"pos\"===u?\"+=\":\"-=\":\"pos\"===u?\"-=\":\"+=\")+s,n.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){\"hide\"===o&&n.hide(),e.effects.restore(n,a),e.effects.removeWrapper(n),i()}})},e.effects.effect.explode=function(t,i){function s(){b.push(this),b.length===d*c&&n()}function n(){p.css({visibility:\"visible\"}),e(b).remove(),m||p.hide(),i()}var a,o,r,h,l,u,d=t.pieces?Math.round(Math.sqrt(t.pieces)):3,c=d,p=e(this),f=e.effects.setMode(p,t.mode||\"hide\"),m=\"show\"===f,g=p.show().css(\"visibility\",\"hidden\").offset(),v=Math.ceil(p.outerWidth()/c),y=Math.ceil(p.outerHeight()/d),b=[];for(a=0;d>a;a++)for(h=g.top+a*y,u=a-(d-1)/2,o=0;c>o;o++)r=g.left+o*v,l=o-(c-1)/2,p.clone().appendTo(\"body\").wrap(\"\").css({position:\"absolute\",visibility:\"visible\",left:-o*v,top:-a*y}).parent().addClass(\"ui-effects-explode\").css({position:\"absolute\",overflow:\"hidden\",width:v,height:y,left:r+(m?l*v:0),top:h+(m?u*y:0),opacity:m?0:1}).animate({left:r+(m?0:l*v),top:h+(m?0:u*y),opacity:m?1:0},t.duration||500,t.easing,s)},e.effects.effect.fade=function(t,i){var s=e(this),n=e.effects.setMode(s,t.mode||\"toggle\");s.animate({opacity:n},{queue:!1,duration:t.duration,easing:t.easing,complete:i})},e.effects.effect.fold=function(t,i){var s,n,a=e(this),o=[\"position\",\"top\",\"bottom\",\"left\",\"right\",\"height\",\"width\"],r=e.effects.setMode(a,t.mode||\"hide\"),h=\"show\"===r,l=\"hide\"===r,u=t.size||15,d=/([0-9]+)%/.exec(u),c=!!t.horizFirst,p=h!==c,f=p?[\"width\",\"height\"]:[\"height\",\"width\"],m=t.duration/2,g={},v={};e.effects.save(a,o),a.show(),s=e.effects.createWrapper(a).css({overflow:\"hidden\"}),n=p?[s.width(),s.height()]:[s.height(),s.width()],d&&(u=parseInt(d[1],10)/100*n[l?0:1]),h&&s.css(c?{height:0,width:u}:{height:u,width:0}),g[f[0]]=h?n[0]:u,v[f[1]]=h?n[1]:0,s.animate(g,m,t.easing).animate(v,m,t.easing,function(){l&&a.hide(),e.effects.restore(a,o),e.effects.removeWrapper(a),i()})},e.effects.effect.highlight=function(t,i){var s=e(this),n=[\"backgroundImage\",\"backgroundColor\",\"opacity\"],a=e.effects.setMode(s,t.mode||\"show\"),o={backgroundColor:s.css(\"backgroundColor\")};\"hide\"===a&&(o.opacity=0),e.effects.save(s,n),s.show().css({backgroundImage:\"none\",backgroundColor:t.color||\"#ffff99\"}).animate(o,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){\"hide\"===a&&s.hide(),e.effects.restore(s,n),i()}})},e.effects.effect.size=function(t,i){var s,n,a,o=e(this),r=[\"position\",\"top\",\"bottom\",\"left\",\"right\",\"width\",\"height\",\"overflow\",\"opacity\"],h=[\"position\",\"top\",\"bottom\",\"left\",\"right\",\"overflow\",\"opacity\"],l=[\"width\",\"height\",\"overflow\"],u=[\"fontSize\"],d=[\"borderTopWidth\",\"borderBottomWidth\",\"paddingTop\",\"paddingBottom\"],c=[\"borderLeftWidth\",\"borderRightWidth\",\"paddingLeft\",\"paddingRight\"],p=e.effects.setMode(o,t.mode||\"effect\"),f=t.restore||\"effect\"!==p,m=t.scale||\"both\",g=t.origin||[\"middle\",\"center\"],v=o.css(\"position\"),y=f?r:h,b={height:0,width:0,outerHeight:0,outerWidth:0};\"show\"===p&&o.show(),s={height:o.height(),width:o.width(),outerHeight:o.outerHeight(),outerWidth:o.outerWidth()},\"toggle\"===t.mode&&\"show\"===p?(o.from=t.to||b,o.to=t.from||s):(o.from=t.from||(\"show\"===p?b:s),o.to=t.to||(\"hide\"===p?b:s)),a={from:{y:o.from.height/s.height,x:o.from.width/s.width},to:{y:o.to.height/s.height,x:o.to.width/s.width}},(\"box\"===m||\"both\"===m)&&(a.from.y!==a.to.y&&(y=y.concat(d),o.from=e.effects.setTransition(o,d,a.from.y,o.from),o.to=e.effects.setTransition(o,d,a.to.y,o.to)),a.from.x!==a.to.x&&(y=y.concat(c),o.from=e.effects.setTransition(o,c,a.from.x,o.from),o.to=e.effects.setTransition(o,c,a.to.x,o.to))),(\"content\"===m||\"both\"===m)&&a.from.y!==a.to.y&&(y=y.concat(u).concat(l),o.from=e.effects.setTransition(o,u,a.from.y,o.from),o.to=e.effects.setTransition(o,u,a.to.y,o.to)),e.effects.save(o,y),o.show(),e.effects.createWrapper(o),o.css(\"overflow\",\"hidden\").css(o.from),g&&(n=e.effects.getBaseline(g,s),o.from.top=(s.outerHeight-o.outerHeight())*n.y,o.from.left=(s.outerWidth-o.outerWidth())*n.x,o.to.top=(s.outerHeight-o.to.outerHeight)*n.y,o.to.left=(s.outerWidth-o.to.outerWidth)*n.x),o.css(o.from),(\"content\"===m||\"both\"===m)&&(d=d.concat([\"marginTop\",\"marginBottom\"]).concat(u),c=c.concat([\"marginLeft\",\"marginRight\"]),l=r.concat(d).concat(c),o.find(\"*[width]\").each(function(){var i=e(this),s={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};f&&e.effects.save(i,l),i.from={height:s.height*a.from.y,width:s.width*a.from.x,outerHeight:s.outerHeight*a.from.y,outerWidth:s.outerWidth*a.from.x},i.to={height:s.height*a.to.y,width:s.width*a.to.x,outerHeight:s.height*a.to.y,outerWidth:s.width*a.to.x},a.from.y!==a.to.y&&(i.from=e.effects.setTransition(i,d,a.from.y,i.from),i.to=e.effects.setTransition(i,d,a.to.y,i.to)),a.from.x!==a.to.x&&(i.from=e.effects.setTransition(i,c,a.from.x,i.from),i.to=e.effects.setTransition(i,c,a.to.x,i.to)),i.css(i.from),i.animate(i.to,t.duration,t.easing,function(){f&&e.effects.restore(i,l)})})),o.animate(o.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){0===o.to.opacity&&o.css(\"opacity\",o.from.opacity),\"hide\"===p&&o.hide(),e.effects.restore(o,y),f||(\"static\"===v?o.css({position:\"relative\",top:o.to.top,left:o.to.left}):e.each([\"top\",\"left\"],function(e,t){o.css(t,function(t,i){var s=parseInt(i,10),n=e?o.to.left:o.to.top;return\"auto\"===i?n+\"px\":s+n+\"px\"})})),e.effects.removeWrapper(o),i()}})},e.effects.effect.scale=function(t,i){var s=e(this),n=e.extend(!0,{},t),a=e.effects.setMode(s,t.mode||\"effect\"),o=parseInt(t.percent,10)||(0===parseInt(t.percent,10)?0:\"hide\"===a?0:100),r=t.direction||\"both\",h=t.origin,l={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()},u={y:\"horizontal\"!==r?o/100:1,x:\"vertical\"!==r?o/100:1};n.effect=\"size\",n.queue=!1,n.complete=i,\"effect\"!==a&&(n.origin=h||[\"middle\",\"center\"],n.restore=!0),n.from=t.from||(\"show\"===a?{height:0,width:0,outerHeight:0,outerWidth:0}:l),n.to={height:l.height*u.y,width:l.width*u.x,outerHeight:l.outerHeight*u.y,outerWidth:l.outerWidth*u.x},n.fade&&(\"show\"===a&&(n.from.opacity=0,n.to.opacity=1),\"hide\"===a&&(n.from.opacity=1,n.to.opacity=0)),s.effect(n)},e.effects.effect.puff=function(t,i){var s=e(this),n=e.effects.setMode(s,t.mode||\"hide\"),a=\"hide\"===n,o=parseInt(t.percent,10)||150,r=o/100,h={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()};e.extend(t,{effect:\"scale\",queue:!1,fade:!0,mode:n,complete:i,percent:a?o:100,from:a?h:{height:h.height*r,width:h.width*r,outerHeight:h.outerHeight*r,outerWidth:h.outerWidth*r}}),s.effect(t)},e.effects.effect.pulsate=function(t,i){var s,n=e(this),a=e.effects.setMode(n,t.mode||\"show\"),o=\"show\"===a,r=\"hide\"===a,h=o||\"hide\"===a,l=2*(t.times||5)+(h?1:0),u=t.duration/l,d=0,c=n.queue(),p=c.length;for((o||!n.is(\":visible\"))&&(n.css(\"opacity\",0).show(),d=1),s=1;l>s;s++)n.animate({opacity:d},u,t.easing),d=1-d;n.animate({opacity:d},u,t.easing),n.queue(function(){r&&n.hide(),i()}),p>1&&c.splice.apply(c,[1,0].concat(c.splice(p,l+1))),n.dequeue()},e.effects.effect.shake=function(t,i){var s,n=e(this),a=[\"position\",\"top\",\"bottom\",\"left\",\"right\",\"height\",\"width\"],o=e.effects.setMode(n,t.mode||\"effect\"),r=t.direction||\"left\",h=t.distance||20,l=t.times||3,u=2*l+1,d=Math.round(t.duration/u),c=\"up\"===r||\"down\"===r?\"top\":\"left\",p=\"up\"===r||\"left\"===r,f={},m={},g={},v=n.queue(),y=v.length;for(e.effects.save(n,a),n.show(),e.effects.createWrapper(n),f[c]=(p?\"-=\":\"+=\")+h,m[c]=(p?\"+=\":\"-=\")+2*h,g[c]=(p?\"-=\":\"+=\")+2*h,n.animate(f,d,t.easing),s=1;l>s;s++)n.animate(m,d,t.easing).animate(g,d,t.easing);n.animate(m,d,t.easing).animate(f,d/2,t.easing).queue(function(){\"hide\"===o&&n.hide(),e.effects.restore(n,a),e.effects.removeWrapper(n),i()}),y>1&&v.splice.apply(v,[1,0].concat(v.splice(y,u+1))),n.dequeue()},e.effects.effect.slide=function(t,i){var s,n=e(this),a=[\"position\",\"top\",\"bottom\",\"left\",\"right\",\"width\",\"height\"],o=e.effects.setMode(n,t.mode||\"show\"),r=\"show\"===o,h=t.direction||\"left\",l=\"up\"===h||\"down\"===h?\"top\":\"left\",u=\"up\"===h||\"left\"===h,d={};e.effects.save(n,a),n.show(),s=t.distance||n[\"top\"===l?\"outerHeight\":\"outerWidth\"](!0),e.effects.createWrapper(n).css({overflow:\"hidden\"}),r&&n.css(l,u?isNaN(s)?\"-\"+s:-s:s),d[l]=(r?u?\"+=\":\"-=\":u?\"-=\":\"+=\")+s,n.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){\"hide\"===o&&n.hide(),e.effects.restore(n,a),e.effects.removeWrapper(n),i()}})},e.effects.effect.transfer=function(t,i){var s=e(this),n=e(t.to),a=\"fixed\"===n.css(\"position\"),o=e(\"body\"),r=a?o.scrollTop():0,h=a?o.scrollLeft():0,l=n.offset(),u={top:l.top-r,left:l.left-h,height:n.innerHeight(),width:n.innerWidth()},d=s.offset(),c=e(\"\").appendTo(document.body).addClass(t.className).css({top:d.top-r,left:d.left-h,height:s.innerHeight(),width:s.innerWidth(),position:a?\"fixed\":\"absolute\"}).animate(u,t.duration,t.easing,function(){c.remove(),i()})}}); .tocify { width: 20%; max-height: 90%; overflow: auto; margin-left: 2%; position: fixed; border: 1px solid #ccc; border-radius: 6px; } .tocify ul, .tocify li { list-style: none; margin: 0; padding: 0; border: none; line-height: 30px; } .tocify-header { text-indent: 10px; } .tocify-subheader { text-indent: 20px; display: none; } .tocify-subheader li { font-size: 12px; } .tocify-subheader .tocify-subheader { text-indent: 30px; } .tocify-subheader .tocify-subheader .tocify-subheader { text-indent: 40px; } .tocify-subheader .tocify-subheader .tocify-subheader .tocify-subheader { text-indent: 50px; } .tocify-subheader .tocify-subheader .tocify-subheader .tocify-subheader .tocify-subheader { text-indent: 60px; } .tocify .tocify-item > a, .tocify .nav-list .nav-header { margin: 0px; } .tocify .tocify-item a, .tocify .list-group-item { padding: 5px; } .tocify .nav-pills > li { float: none; } /* jquery Tocify - v1.9.1 - 2013-10-22 * http://www.gregfranko.com/jquery.tocify.js/ * Copyright (c) 2013 Greg Franko; Licensed MIT */ // Immediately-Invoked Function Expression (IIFE) [Ben Alman Blog Post](http://benalman.com/news/2010/11/immediately-invoked-function-expression/) that calls another IIFE that contains all of the plugin logic. I used this pattern so that anyone viewing this code would not have to scroll to the bottom of the page to view the local parameters that were passed to the main IIFE. (function(tocify) { // ECMAScript 5 Strict Mode: [John Resig Blog Post](http://ejohn.org/blog/ecmascript-5-strict-mode-json-and-more/) \"use strict\"; // Calls the second IIFE and locally passes in the global jQuery, window, and document objects tocify(window.jQuery, window, document); } // Locally passes in `jQuery`, the `window` object, the `document` object, and an `undefined` variable. The `jQuery`, `window` and `document` objects are passed in locally, to improve performance, since javascript first searches for a variable match within the local variables set before searching the global variables set. All of the global variables are also passed in locally to be minifier friendly. `undefined` can be passed in locally, because it is not a reserved word in JavaScript. (function($, window, document, undefined) { // ECMAScript 5 Strict Mode: [John Resig Blog Post](http://ejohn.org/blog/ecmascript-5-strict-mode-json-and-more/) \"use strict\"; var tocClassName = \"tocify\", tocClass = \".\" + tocClassName, tocFocusClassName = \"tocify-focus\", tocHoverClassName = \"tocify-hover\", hideTocClassName = \"tocify-hide\", hideTocClass = \".\" + hideTocClassName, headerClassName = \"tocify-header\", headerClass = \".\" + headerClassName, subheaderClassName = \"tocify-subheader\", subheaderClass = \".\" + subheaderClassName, itemClassName = \"tocify-item\", itemClass = \".\" + itemClassName, extendPageClassName = \"tocify-extend-page\", extendPageClass = \".\" + extendPageClassName; // Calling the jQueryUI Widget Factory Method $.widget(\"toc.tocify\", { //Plugin version version: \"1.9.1\", // These options will be used as defaults options: { // **context**: Accepts String: Any jQuery selector // The container element that holds all of the elements used to generate the table of contents context: \"body\", // **ignoreSelector**: Accepts String: Any jQuery selector // A selector to any element that would be matched by selectors that you wish to be ignored ignoreSelector: null, // **selectors**: Accepts an Array of Strings: Any jQuery selectors // The element's used to generate the table of contents. The order is very important since it will determine the table of content's nesting structure selectors: \"h1, h2, h3\", // **showAndHide**: Accepts a boolean: true or false // Used to determine if elements should be shown and hidden showAndHide: true, // **showEffect**: Accepts String: \"none\", \"fadeIn\", \"show\", or \"slideDown\" // Used to display any of the table of contents nested items showEffect: \"slideDown\", // **showEffectSpeed**: Accepts Number (milliseconds) or String: \"slow\", \"medium\", or \"fast\" // The time duration of the show animation showEffectSpeed: \"medium\", // **hideEffect**: Accepts String: \"none\", \"fadeOut\", \"hide\", or \"slideUp\" // Used to hide any of the table of contents nested items hideEffect: \"slideUp\", // **hideEffectSpeed**: Accepts Number (milliseconds) or String: \"slow\", \"medium\", or \"fast\" // The time duration of the hide animation hideEffectSpeed: \"medium\", // **smoothScroll**: Accepts a boolean: true or false // Determines if a jQuery animation should be used to scroll to specific table of contents items on the page smoothScroll: true, // **smoothScrollSpeed**: Accepts Number (milliseconds) or String: \"slow\", \"medium\", or \"fast\" // The time duration of the smoothScroll animation smoothScrollSpeed: \"medium\", // **scrollTo**: Accepts Number (pixels) // The amount of space between the top of page and the selected table of contents item after the page has been scrolled scrollTo: 0, // **showAndHideOnScroll**: Accepts a boolean: true or false // Determines if table of contents nested items should be shown and hidden while scrolling showAndHideOnScroll: true, // **highlightOnScroll**: Accepts a boolean: true or false // Determines if table of contents nested items should be highlighted (set to a different color) while scrolling highlightOnScroll: true, // **highlightOffset**: Accepts a number // The offset distance in pixels to trigger the next active table of contents item highlightOffset: 40, // **theme**: Accepts a string: \"bootstrap\", \"jqueryui\", or \"none\" // Determines if Twitter Bootstrap, jQueryUI, or Tocify classes should be added to the table of contents theme: \"bootstrap\", // **extendPage**: Accepts a boolean: true or false // If a user scrolls to the bottom of the page and the page is not tall enough to scroll to the last table of contents item, then the page height is increased extendPage: true, // **extendPageOffset**: Accepts a number: pixels // How close to the bottom of the page a user must scroll before the page is extended extendPageOffset: 100, // **history**: Accepts a boolean: true or false // Adds a hash to the page url to maintain history history: true, // **scrollHistory**: Accepts a boolean: true or false // Adds a hash to the page url, to maintain history, when scrolling to a TOC item scrollHistory: false, // **hashGenerator**: How the hash value (the anchor segment of the URL, following the // # character) will be generated. // // \"compact\" (default) - #CompressesEverythingTogether // \"pretty\" - #looks-like-a-nice-url-and-is-easily-readable // function(text, element){} - Your own hash generation function that accepts the text as an // argument, and returns the hash value. hashGenerator: \"compact\", // **highlightDefault**: Accepts a boolean: true or false // Set's the first TOC item as active if no other TOC item is active. highlightDefault: true }, // _Create // ------- // Constructs the plugin. Only called once. _create: function() { var self = this; self.extendPageScroll = true; // Internal array that keeps track of all TOC items (Helps to recognize if there are duplicate TOC item strings) self.items = []; // Generates the HTML for the dynamic table of contents self._generateToc(); // Adds CSS classes to the newly generated table of contents HTML self._addCSSClasses(); self.webkit = (function() { for (var prop in window) { if (prop) { if (prop.toLowerCase().indexOf(\"webkit\") !== -1) { return true; } } } return false; }()); // Adds jQuery event handlers to the newly generated table of contents self._setEventHandlers(); // Binding to the Window load event to make sure the correct scrollTop is calculated $(window).on(\"load\", function() { // Sets the active TOC item self._setActiveElement(true); // Once all animations on the page are complete, this callback function will be called $(\"html, body\").promise().done(function() { setTimeout(function() { self.extendPageScroll = false; }, 0); }); }); }, // _generateToc // ------------ // Generates the HTML for the dynamic table of contents _generateToc: function() { // _Local variables_ // Stores the plugin context in the self variable var self = this, // All of the HTML tags found within the context provided (i.e. body) that match the top level jQuery selector above firstElem, // Instantiated variable that will store the top level newly created unordered list DOM element ul, ignoreSelector = self.options.ignoreSelector; // Determine the element to start the toc with // get all the top level selectors firstElem = []; var selectors = this.options.selectors.replace(/ /g, \"\").split(\",\"); // find the first set that have at least one non-ignored element for(var i = 0; i < selectors.length; i++) { var foundSelectors = $(this.options.context).find(selectors[i]); for (var s = 0; s < foundSelectors.length; s++) { if (!$(foundSelectors[s]).is(ignoreSelector)) { firstElem = foundSelectors; break; } } if (firstElem.length> 0) break; } if (!firstElem.length) { self.element.addClass(hideTocClassName); return; } self.element.addClass(tocClassName); // Loops through each top level selector firstElem.each(function(index) { //If the element matches the ignoreSelector then we skip it if ($(this).is(ignoreSelector)) { return; } // Creates an unordered list HTML element and adds a dynamic ID and standard class name ul = $(\"\", { \"id\": headerClassName + index, \"class\": headerClassName }). // Appends a top level list item HTML element to the previously created HTML header append(self._nestElements($(this), index)); // Add the created unordered list element to the HTML element calling the plugin self.element.append(ul); // Finds all of the HTML tags between the header and subheader elements $(this).nextUntil(this.nodeName.toLowerCase()).each(function() { // If there are no nested subheader elemements if ($(this).find(self.options.selectors).length === 0) { // Loops through all of the subheader elements $(this).filter(self.options.selectors).each(function() { //If the element matches the ignoreSelector then we skip it if ($(this).is(ignoreSelector)) { return; } self._appendSubheaders.call(this, self, ul); }); } // If there are nested subheader elements else { // Loops through all of the subheader elements $(this).find(self.options.selectors).each(function() { //If the element matches the ignoreSelector then we skip it if ($(this).is(ignoreSelector)) { return; } self._appendSubheaders.call(this, self, ul); }); } }); }); }, _setActiveElement: function(pageload) { var self = this, hash = window.location.hash.substring(1), elem = self.element.find('li[data-unique=\"' + hash + '\"]'); if (hash.length) { // Removes highlighting from all of the list item's self.element.find(\".\" + self.focusClass).removeClass(self.focusClass); // Highlights the current list item that was clicked elem.addClass(self.focusClass); // Triggers the click event on the currently focused TOC item elem.click(); } else { // Removes highlighting from all of the list item's self.element.find(\".\" + self.focusClass).removeClass(self.focusClass); if (!hash.length && pageload && self.options.highlightDefault) { // Highlights the first TOC item if no other items are highlighted self.element.find(itemClass).first().addClass(self.focusClass); } } return self; }, // _nestElements // ------------- // Helps create the table of contents list by appending nested list items _nestElements: function(self, index) { var arr, item, hashValue; arr = $.grep(this.items, function(item) { return item === self.text(); }); // If there is already a duplicate TOC item if (arr.length) { // Adds the current TOC item text and index (for slight randomization) to the internal array this.items.push(self.text() + index); } // If there not a duplicate TOC item else { // Adds the current TOC item text to the internal array this.items.push(self.text()); } hashValue = this._generateHashValue(arr, self, index); // Appends a list item HTML element to the last unordered list HTML element found within the HTML element calling the plugin item = $(\"\", { // Sets a common class name to the list item \"class\": itemClassName, \"data-unique\": hashValue }); if (this.options.theme !== \"bootstrap3\") { item.append($(\"\", { \"html\": self.html() })); } else { item.html(self.html()); } // Adds an HTML anchor tag before the currently traversed HTML element self.before($(\"\", { // Sets a name attribute on the anchor tag to the text of the currently traversed HTML element (also making sure that all whitespace is replaced with an underscore) \"name\": hashValue, \"data-unique\": hashValue })); return item; }, // _generateHashValue // ------------------ // Generates the hash value that will be used to refer to each item. _generateHashValue: function(arr, self, index) { var hashValue = \"\", hashGeneratorOption = this.options.hashGenerator; if (hashGeneratorOption === \"pretty\") { // prettify the text hashValue = self.text().toLowerCase().replace(/\\s/g, \"-\"); // fix double hyphens while (hashValue.indexOf(\"--\") > -1) { hashValue = hashValue.replace(/--/g, \"-\"); } // fix colon-space instances while (hashValue.indexOf(\":-\") > -1) { hashValue = hashValue.replace(/:-/g, \"-\"); } } else if (typeof hashGeneratorOption === \"function\") { // call the function hashValue = hashGeneratorOption(self.text(), self); } else { // compact - the default hashValue = self.text().replace(/\\s/g, \"\"); } // add the index if we need to if (arr.length) { hashValue += \"\" + index; } // return the value return hashValue; }, // _appendElements // --------------- // Helps create the table of contents list by appending subheader elements _appendSubheaders: function(self, ul) { // The current element index var index = $(this).index(self.options.selectors), // Finds the previous header DOM element previousHeader = $(self.options.selectors).eq(index - 1), currentTagName = +$(this).prop(\"tagName\").charAt(1), previousTagName = +previousHeader.prop(\"tagName\").charAt(1), lastSubheader; // If the current header DOM element is smaller than the previous header DOM element or the first subheader if (currentTagName < previousTagName) { // Selects the last unordered list HTML found within the HTML element calling the plugin self.element.find(subheaderClass + \"[data-tag=\" + currentTagName + \"]\").last().append(self._nestElements($(this), index)); } // If the current header DOM element is the same type of header(eg. h4) as the previous header DOM element else if (currentTagName === previousTagName) { ul.find(itemClass).last().after(self._nestElements($(this), index)); } else { // Selects the last unordered list HTML found within the HTML element calling the plugin ul.find(itemClass).last(). // Appends an unorderedList HTML element to the dynamic `unorderedList` variable and sets a common class name after($(\"\", { \"class\": subheaderClassName, \"data-tag\": currentTagName })).next(subheaderClass). // Appends a list item HTML element to the last unordered list HTML element found within the HTML element calling the plugin append(self._nestElements($(this), index)); } }, // _setEventHandlers // ---------------- // Adds jQuery event handlers to the newly generated table of contents _setEventHandlers: function() { // _Local variables_ // Stores the plugin context in the self variable var self = this, // Instantiates a new variable that will be used to hold a specific element's context $self, // Instantiates a new variable that will be used to determine the smoothScroll animation time duration duration; // Event delegation that looks for any clicks on list item elements inside of the HTML element calling the plugin this.element.on(\"click.tocify\", \"li\", function(event) { if (self.options.history) { window.location.hash = $(this).attr(\"data-unique\"); } // Removes highlighting from all of the list item's self.element.find(\".\" + self.focusClass).removeClass(self.focusClass); // Highlights the current list item that was clicked $(this).addClass(self.focusClass); // If the showAndHide option is true if (self.options.showAndHide) { var elem = $('li[data-unique=\"' + $(this).attr(\"data-unique\") + '\"]'); self._triggerShow(elem); } self._scrollTo($(this)); }); // Mouseenter and Mouseleave event handlers for the list item's within the HTML element calling the plugin this.element.find(\"li\").on({ // Mouseenter event handler \"mouseenter.tocify\": function() { // Adds a hover CSS class to the current list item $(this).addClass(self.hoverClass); // Makes sure the cursor is set to the pointer icon $(this).css(\"cursor\", \"pointer\"); }, // Mouseleave event handler \"mouseleave.tocify\": function() { if (self.options.theme !== \"bootstrap\") { // Removes the hover CSS class from the current list item $(this).removeClass(self.hoverClass); } } }); // only attach handler if needed (expensive in IE) if (self.options.extendPage || self.options.highlightOnScroll || self.options.scrollHistory || self.options.showAndHideOnScroll) { // Window scroll event handler $(window).on(\"scroll.tocify\", function() { // Once all animations on the page are complete, this callback function will be called $(\"html, body\").promise().done(function() { // Local variables // Stores how far the user has scrolled var winScrollTop = $(window).scrollTop(), // Stores the height of the window winHeight = $(window).height(), // Stores the height of the document docHeight = $(document).height(), scrollHeight = $(\"body\")[0].scrollHeight, // Instantiates a variable that will be used to hold a selected HTML element elem, lastElem, lastElemOffset, currentElem; if (self.options.extendPage) { // If the user has scrolled to the bottom of the page and the last toc item is not focused if ((self.webkit && winScrollTop >= scrollHeight - winHeight - self.options.extendPageOffset) || (!self.webkit && winHeight + winScrollTop > docHeight - self.options.extendPageOffset)) { if (!$(extendPageClass).length) { lastElem = $('div[data-unique=\"' + $(itemClass).last().attr(\"data-unique\") + '\"]'); if (!lastElem.length) return; // Gets the top offset of the page header that is linked to the last toc item lastElemOffset = lastElem.offset().top; // Appends a div to the bottom of the page and sets the height to the difference of the window scrollTop and the last element's position top offset $(self.options.context).append($(\"\", { \"class\": extendPageClassName, \"height\": Math.abs(lastElemOffset - winScrollTop) + \"px\", \"data-unique\": extendPageClassName })); if (self.extendPageScroll) { currentElem = self.element.find('li.' + self.focusClass); self._scrollTo($('div[data-unique=\"' + currentElem.attr(\"data-unique\") + '\"]')); } } } } // The zero timeout ensures the following code is run after the scroll events setTimeout(function() { // _Local variables_ // Stores the distance to the closest anchor var closestAnchorDistance = null, // Stores the index of the closest anchor closestAnchorIdx = null, // Keeps a reference to all anchors anchors = $(self.options.context).find(\"div[data-unique]\"), anchorText; // Determines the index of the closest anchor anchors.each(function(idx) { var distance = Math.abs(($(this).next().length ? $(this).next() : $(this)).offset().top - winScrollTop - self.options.highlightOffset); if (closestAnchorDistance == null || distance < closestAnchorDistance) { closestAnchorDistance = distance; closestAnchorIdx = idx; } else { return false; } }); anchorText = $(anchors[closestAnchorIdx]).attr(\"data-unique\"); // Stores the list item HTML element that corresponds to the currently traversed anchor tag elem = $('li[data-unique=\"' + anchorText + '\"]'); // If the `highlightOnScroll` option is true and a next element is found if (self.options.highlightOnScroll && elem.length) { // Removes highlighting from all of the list item's self.element.find(\".\" + self.focusClass).removeClass(self.focusClass); // Highlights the corresponding list item elem.addClass(self.focusClass); } if (self.options.scrollHistory) { if (window.location.hash !== \"#\" + anchorText) { window.location.replace(\"#\" + anchorText); } } // If the `showAndHideOnScroll` option is true if (self.options.showAndHideOnScroll && self.options.showAndHide) { self._triggerShow(elem, true); } }, 0); }); }); } }, // Show // ---- // Opens the current sub-header show: function(elem, scroll) { // Stores the plugin context in the `self` variable var self = this, element = elem; // If the sub-header is not already visible if (!elem.is(\":visible\")) { // If the current element does not have any nested subheaders, is not a header, and its parent is not visible if (!elem.find(subheaderClass).length && !elem.parent().is(headerClass) && !elem.parent().is(\":visible\")) { // Sets the current element to all of the subheaders within the current header elem = elem.parents(subheaderClass).add(elem); } // If the current element does not have any nested subheaders and is not a header else if (!elem.children(subheaderClass).length && !elem.parent().is(headerClass)) { // Sets the current element to the closest subheader elem = elem.closest(subheaderClass); } //Determines what jQuery effect to use switch (self.options.showEffect) { //Uses `no effect` case \"none\": elem.show(); break; //Uses the jQuery `show` special effect case \"show\": elem.show(self.options.showEffectSpeed); break; //Uses the jQuery `slideDown` special effect case \"slideDown\": elem.slideDown(self.options.showEffectSpeed); break; //Uses the jQuery `fadeIn` special effect case \"fadeIn\": elem.fadeIn(self.options.showEffectSpeed); break; //If none of the above options were passed, then a `jQueryUI show effect` is expected default: elem.show(); break; } } // If the current subheader parent element is a header if (elem.parent().is(headerClass)) { // Hides all non-active sub-headers self.hide($(subheaderClass).not(elem)); } // If the current subheader parent element is not a header else { // Hides all non-active sub-headers self.hide($(subheaderClass).not(elem.closest(headerClass).find(subheaderClass).not(elem.siblings()))); } // Maintains chainablity return self; }, // Hide // ---- // Closes the current sub-header hide: function(elem) { // Stores the plugin context in the `self` variable var self = this; //Determines what jQuery effect to use switch (self.options.hideEffect) { // Uses `no effect` case \"none\": elem.hide(); break; // Uses the jQuery `hide` special effect case \"hide\": elem.hide(self.options.hideEffectSpeed); break; // Uses the jQuery `slideUp` special effect case \"slideUp\": elem.slideUp(self.options.hideEffectSpeed); break; // Uses the jQuery `fadeOut` special effect case \"fadeOut\": elem.fadeOut(self.options.hideEffectSpeed); break; // If none of the above options were passed, then a `jqueryUI hide effect` is expected default: elem.hide(); break; } // Maintains chainablity return self; }, // _triggerShow // ------------ // Determines what elements get shown on scroll and click _triggerShow: function(elem, scroll) { var self = this; // If the current element's parent is a header element or the next element is a nested subheader element if (elem.parent().is(headerClass) || elem.next().is(subheaderClass)) { // Shows the next sub-header element self.show(elem.next(subheaderClass), scroll); } // If the current element's parent is a subheader element else if (elem.parent().is(subheaderClass)) { // Shows the parent sub-header element self.show(elem.parent(), scroll); } // Maintains chainability return self; }, // _addCSSClasses // -------------- // Adds CSS classes to the newly generated table of contents HTML _addCSSClasses: function() { // If the user wants a jqueryUI theme if (this.options.theme === \"jqueryui\") { this.focusClass = \"ui-state-default\"; this.hoverClass = \"ui-state-hover\"; //Adds the default styling to the dropdown list this.element.addClass(\"ui-widget\").find(\".toc-title\").addClass(\"ui-widget-header\").end().find(\"li\").addClass(\"ui-widget-content\"); } // If the user wants a twitterBootstrap theme else if (this.options.theme === \"bootstrap\") { this.element.find(headerClass + \",\" + subheaderClass).addClass(\"nav nav-list\"); this.focusClass = \"active\"; } // If the user wants a twitterBootstrap theme else if (this.options.theme === \"bootstrap3\") { this.element.find(headerClass + \",\" + subheaderClass).addClass(\"list-group\"); this.element.find(itemClass).addClass(\"list-group-item\"); this.focusClass = \"active\"; } // If a user does not want a prebuilt theme else { // Adds more neutral classes (instead of jqueryui) this.focusClass = tocFocusClassName; this.hoverClass = tocHoverClassName; } //Maintains chainability return this; }, // setOption // --------- // Sets a single Tocify option after the plugin is invoked setOption: function() { // Calls the jQueryUI Widget Factory setOption method $.Widget.prototype._setOption.apply(this, arguments); }, // setOptions // ---------- // Sets a single or multiple Tocify options after the plugin is invoked setOptions: function() { // Calls the jQueryUI Widget Factory setOptions method $.Widget.prototype._setOptions.apply(this, arguments); }, // _scrollTo // --------- // Scrolls to a specific element _scrollTo: function(elem) { var self = this, duration = self.options.smoothScroll || 0, scrollTo = self.options.scrollTo, currentDiv = $('div[data-unique=\"' + elem.attr(\"data-unique\") + '\"]'); if (!currentDiv.length) { return self; } // Once all animations on the page are complete, this callback function will be called $(\"html, body\").promise().done(function() { // Animates the html and body element scrolltops $(\"html, body\").animate({ // Sets the jQuery `scrollTop` to the top offset of the HTML div tag that matches the current list item's `data-unique` tag \"scrollTop\": currentDiv.offset().top - ($.isFunction(scrollTo) ? scrollTo.call() : scrollTo) + \"px\" }, { // Sets the smoothScroll animation time duration to the smoothScrollSpeed option \"duration\": duration }); }); // Maintains chainability return self; } }); })); //end of plugin /** * jQuery Plugin: Sticky Tabs * * @author Aidan Lister * adapted by Ruben Arslan to activate parent tabs too * http://www.aidanlister.com/2014/03/persisting-the-tab-state-in-bootstrap/ */ (function($) { \"use strict\"; $.fn.rmarkdownStickyTabs = function() { var context = this; // Show the tab corresponding with the hash in the URL, or the first tab var showStuffFromHash = function() { var hash = window.location.hash; var selector = hash ? 'a[href=\"' + hash + '\"]' : 'li.active > a'; var $selector = $(selector, context); if($selector.data('toggle') === \"tab\") { $selector.tab('show'); // walk up the ancestors of this element, show any hidden tabs $selector.parents('.section.tabset').each(function(i, elm) { var link = $('a[href=\"#' + $(elm).attr('id') + '\"]'); if(link.data('toggle') === \"tab\") { link.tab(\"show\"); } }); } }; // Set the correct tab when the page loads showStuffFromHash(context); // Set the correct tab when a user uses their back/forward button $(window).on('hashchange', function() { showStuffFromHash(context); }); // Change the URL when tabs are clicked $('a', context).on('click', function(e) { history.pushState(null, null, this.href); showStuffFromHash(context); }); return this; }; }(jQuery)); window.buildTabsets = function(tocID) { // build a tabset from a section div with the .tabset class function buildTabset(tabset) { // check for fade and pills options var fade = tabset.hasClass(\"tabset-fade\"); var pills = tabset.hasClass(\"tabset-pills\"); var navClass = pills ? \"nav-pills\" : \"nav-tabs\"; // determine the heading level of the tabset and tabs var match = tabset.attr('class').match(/level(\\d) /); if (match === null) return; var tabsetLevel = Number(match[1]); var tabLevel = tabsetLevel + 1; // find all subheadings immediately below var tabs = tabset.find(\"div.section.level\" + tabLevel); if (!tabs.length) return; // create tablist and tab-content elements var tabList = $(''); $(tabs[0]).before(tabList); var tabContent = $(''); $(tabs[0]).before(tabContent); // build the tabset var activeTab = 0; tabs.each(function(i) { // get the tab div var tab = $(tabs[i]); // get the id then sanitize it for use with bootstrap tabs var id = tab.attr('id'); // see if this is marked as the active tab if (tab.hasClass('active')) activeTab = i; // remove any table of contents entries associated with // this ID (since we'll be removing the heading element) $(\"div#\" + tocID + \" li a[href='#\" + id + \"']\").parent().remove(); // sanitize the id for use with bootstrap tabs id = id.replace(/[.\\/?&!#]/g, '').replace(/\\s/g, '_'); tab.attr('id', id); // get the heading element within it, grab it's text, then remove it var heading = tab.find('h' + tabLevel + ':first'); var headingText = heading.html(); heading.remove(); // build and append the tab list item var a = $('' + headingText + ''); a.attr('href', '#' + id); a.attr('aria-controls', id); var li = $(''); li.append(a); tabList.append(li); // set it's attributes tab.attr('role', 'tabpanel'); tab.addClass('tab-pane'); tab.addClass('tabbed-pane'); if (fade) tab.addClass('fade'); // move it into the tab content div tab.detach().appendTo(tabContent); }); // set active tab $(tabList.children('li')[activeTab]).addClass('active'); var active = $(tabContent.children('div.section')[activeTab]); active.addClass('active'); if (fade) active.addClass('in'); if (tabset.hasClass(\"tabset-sticky\")) tabset.rmarkdownStickyTabs(); } // convert section divs with the .tabset class to tabsets var tabsets = $(\"div.section.tabset\"); tabsets.each(function(i) { buildTabset($(tabsets[i])); }); }; .hljs-literal { color: #990073; } .hljs-number { color: #099; } .hljs-comment { color: #998; font-style: italic; } .hljs-keyword { color: #900; font-weight: bold; } .hljs-string { color: #d14; } code{white-space: pre-wrap;} span.smallcaps{font-variant: small-caps;} span.underline{text-decoration: underline;} div.column{display: inline-block; vertical-align: top; width: 50%;} div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;} ul.task-list{list-style: none;} code{white-space: pre;} if (window.hljs) { hljs.configure({languages: []}); hljs.initHighlightingOnLoad(); if (document.readyState && document.readyState === \"complete\") { window.setTimeout(function() { hljs.initHighlighting(); }, 0); } } .main-container { max-width: 940px; margin-left: auto; margin-right: auto; } img { max-width:100%; } .tabbed-pane { padding-top: 12px; } .html-widget { margin-bottom: 20px; } button.code-folding-btn:focus { outline: none; } summary { display: list-item; } details > summary > p:only-child { display: inline; } pre code { padding: 0; } .tabset-dropdown > .nav-tabs { display: inline-table; max-height: 500px; min-height: 44px; overflow-y: auto; border: 1px solid #ddd; border-radius: 4px; } .tabset-dropdown > .nav-tabs > li.active:before { content: \"\"; font-family: 'Glyphicons Halflings'; display: inline-block; padding: 10px; border-right: 1px solid #ddd; } .tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before { content: \"\"; border: none; } .tabset-dropdown > .nav-tabs.nav-tabs-open:before { content: \"\"; font-family: 'Glyphicons Halflings'; display: inline-block; padding: 10px; border-right: 1px solid #ddd; } .tabset-dropdown > .nav-tabs > li.active { display: block; } .tabset-dropdown > .nav-tabs > li > a, .tabset-dropdown > .nav-tabs > li > a:focus, .tabset-dropdown > .nav-tabs > li > a:hover { border: none; display: inline-block; border-radius: 4px; background-color: transparent; } .tabset-dropdown > .nav-tabs.nav-tabs-open > li { display: block; float: none; } .tabset-dropdown > .nav-tabs > li { display: none; } #TOC { margin: 25px 0px 20px 0px; } @media (max-width: 768px) { #TOC { position: relative; width: 100%; } } @media print { .toc-content { /* see https://github.com/w3c/csswg-drafts/issues/4434 */ float: right; } } .toc-content { padding-left: 30px; padding-right: 40px; } div.main-container { max-width: 1200px; } div.tocify { width: 20%; max-width: 260px; max-height: 85%; } @media (min-width: 768px) and (max-width: 991px) { div.tocify { width: 25%; } } @media (max-width: 767px) { div.tocify { width: 100%; max-width: none; } } .tocify ul, .tocify li { line-height: 20px; } .tocify-subheader .tocify-item { font-size: 0.90em; } .tocify .list-group-item { border-radius: 0px; } R을 이용한 공공데이터 분석_제9장 2022-06-23 제9장 그래프 그리기 0단원 자율학습 3장데이터 시각화 ggplot2 자체 사이트 1단원 기본 지식 (192p) [SKIP] 그래프를 그리는 목적 2가지: 1분석하는 데이터의 특징을 탐색적으로 알아보기 위해 간략하게 그리는 경우 2 데이터 분석 결과를 보고서에 싣기 위해서 정교한 그래프를 그리는 경우. 2단원 R 제공 그래프 함수 : plot(), barplot(), hist(), boxplot() (193p) [SKIP] 0. 라이브러리 불러오기 library(ggplot2) 1. plot() 함수 2개의 좌표로 표시된 데이터를 그래프로 그림.산점도(scatter plot)를 표현할 때 사용. # 한 점 그리기 plot(2,2) # 복수의 점 그리기 x=1:20 y=x^2 plot(x,y) 2. barplot() 함수 명목형 변수의 빈도를 박대그래프로 그릴 때 사용 mpg1 &lt;- read.csv(&quot;data/mpg1.csv&quot;) a&lt;-table(mpg1$drv) a ## ## 4 f r ## 103 106 25 barplot(a) a&lt;-table(mpg1$drv) a ## ## 4 f r ## 103 106 25 barplot(a,hoiz = T) # 가로로 표시 ## Warning in plot.window(xlim, ylim, log = log, ...): &quot;hoiz&quot;는 그래픽 매개변수가 ## 아닙니다 ## Warning in axis(if (horiz) 2 else 1, at = at.l, labels = names.arg, lty = ## axis.lty, : &quot;hoiz&quot;는 그래픽 매개변수가 아닙니다 ## Warning in title(main = main, sub = sub, xlab = xlab, ylab = ylab, ...): ## &quot;hoiz&quot;는 그래픽 매개변수가 아닙니다 ## Warning in axis(if (horiz) 1 else 2, cex.axis = cex.axis, ...): &quot;hoiz&quot;는 그래픽 ## 매개변수가 아닙니다 3. hist() 함수 히스토그램(histogram, 도수분포표)을 그리는 그래프. barplot() 함수는 X축에 명목형 변수를 두고 변수의 빈도수를 그림으로 그리지만, hist()함수에서는 X축이 수치형 연속형 변수이야한다. # 6개 구간으로 구분 hist(mpg1$cty) # 지정한 20 구간으로 구분 hist(mpg1$cty,breaks = 20) # prob=T : 빈도수를 기준으로 확율밀도를 구해서 그래프를 그린다. # y 축에 빈도수 대신 확률밀도가 표시. hist(mpg1$cty,breaks = 20,prob=T) hist(mpg1$cty,breaks = 20,prob=T) lines(density(mpg1$cty)) 4. boxplot() 함수 설명 3단원 ggplot 그래프 (201p) 여기부터!!! 1. 기본개념 ggplot2는 그래프를 한꺼번에 그리지 않고 전체 그림의 일부를 투명한 그림판에 나눠 그린 후에 그림판을 겹쳐서 완성한다. 그림한을 레이어(layer)라고 한다. # install.packages(&quot;ggplot2&quot;) library(ggplot2) 2. 그래프 그리기 2.1. geom_point : 산점도 그리기 diamonds&lt;-ggplot2::diamonds # diamonds 데이터세트를 새 객체 diamonds에 입력 #Step 1. x축 y축 지정 ggplot(data=diamonds,aes(x=carat,y=price)) #Step 2. geom_point()라는 산점도 그래프로 데이터를 표시 ggplot(data=diamonds,aes(x=carat,y=price)) +geom_point() 2.2. 막대그래프 그리기 1 geom_bar() : ggplot2가 원자료에서 범주별 크기를 구해서 막대그래프 그리기 # 방법 1. x축에 범주형 변수만 지정, ggplot2가 범주별 빈도수를 구해 막대 그래프로 표시 ggplot(diamonds,aes(x=cut))+geom_bar() table(diamonds$cut) ## ## Fair Good Very Good Premium Ideal ## 1610 4906 12082 13791 21551 # 방법 2. x축에 범주형 변수, y축에 연속형 변수 # 이때는 geom_bar()안에 stat = &quot;identity&quot;를 적어줘야함 ggplot(diamonds,aes(x=cut,y=price))+geom_bar(stat = &quot;identity&quot;) - 2 geom_col() : 범주별로 정해진 값을 토대로 막대그래프 그리기 library(dplyr) ## ## 다음의 패키지를 부착합니다: &#39;dplyr&#39; ## The following objects are masked from &#39;package:stats&#39;: ## ## filter, lag ## The following objects are masked from &#39;package:base&#39;: ## ## intersect, setdiff, setequal, union # cut 범주별 평균 가격 구하기 cut_price &lt;-diamonds %&gt;% group_by(cut) %&gt;% # cut 범주별 데이터 분류 summarise(mean_price=mean(price)) #cut의 범주별 평균가격 구하기 cut_price # cut의 범주별 평균가격 ## # A tibble: 5 × 2 ## cut mean_price ## &lt;ord&gt; &lt;dbl&gt; ## 1 Fair 4359. ## 2 Good 3929. ## 3 Very Good 3982. ## 4 Premium 4584. ## 5 Ideal 3458. 2.3. geom_histogram() : 히스토그램(도수분포표) 그리기 ggplot(data = diamonds,aes(x=carat))+geom_histogram() ## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`. range(diamonds$carat) ## [1] 0.20 5.01 (5.01-.020)/30 ## [1] 0.1663333 ggplot(data=diamonds,aes(x=carat)) + geom_histogram(binwidth = 1) ggplot(data=diamonds,aes(x=carat)) + geom_histogram(binwidth = 0.01) 2.4. geom_density() : 커널 밀도 곡선 ggplot(data=diamonds,aes(x=carat))+geom_density() 2.5. geom_boxplot() : 상자그림 그래프 그리기 ggplot(data=diamonds,aes(x=1,y=price)) +geom_boxplot() ggplot(data = diamonds,aes(x=cut,y=price)) + geom_boxplot() 2.6. geom_line() : 선그래프 그리기 str(cars) ## &#39;data.frame&#39;: 50 obs. of 2 variables: ## $ speed: num 4 4 7 7 8 9 10 10 10 11 ... ## $ dist : num 2 10 4 22 16 10 18 26 34 17 ... ggplot(data = cars,aes(x=speed,y=dist)) + geom_line() # 실업자수 변화 ggplot(data = economics,aes(x=date,y=unemploy)) + geom_line() # 개인저축률 변화 ggplot(data = economics,aes(x=date,y=psavert))+geom_line() # 두 개 데이터를 한 화면에 비교 ggplot()+ geom_line(data=economics,aes(x=date,y=uempmed, color=&quot;red&quot;))+ geom_line(data = economics,aes(x=date, y=psavert)) 4단원 ggplot() 함수를 정교하게 그리기 (215p) 1. col=, fill= : 1개의 그래프에 2개 변수를 반영하기 1.1. ‘col=’+geom_point() : 산점도에 변수를 추가해서 그리기 ggplot(data = diamonds,aes(x=carat,y=price))+geom_point() ggplot(data = diamonds,aes(x=carat,y=price,col=cut)) + geom_point() #col(color) 1.2. ‘fill=’+geom_bar() : 막대그래프에 2개 범주 내용을 반영하기 ggplot(diamonds,aes(x = color)) + geom_bar() ggplot(diamonds,aes(x = color, fill=cut)) + geom_bar() ggplot(diamonds,aes(x = color, fill=cut)) + geom_bar(position = &quot;dodge&quot;) ggplot(diamonds,aes(x = color, fill=cut)) + geom_bar(position = &quot;fill&quot;) 1.3. ‘col=’+geom_line() : 선그래프에 2개 범주 내용을 반영하기 leisure &lt;-read.csv(&quot;data/leisure.csv&quot;) str(leisure) ## &#39;data.frame&#39;: 200 obs. of 3 variables: ## $ age : int 2 2 3 3 4 4 5 5 6 6 ... ## $ sex : chr &quot;female&quot; &quot;male&quot; &quot;female&quot; &quot;male&quot; ... ## $ expense: num 25.8 21 30 16.3 25.7 ... ggplot(data=leisure,aes(x=age,y=expense))+geom_line() # 색상 추가 ggplot(data=leisure,aes(x=age,y=expense,col=sex))+geom_line() # 그래프 사이즈, 라인 생김새 변경 ggplot(data=leisure,aes(x=age,y=expense,col=sex))+geom_line(size = 1.5, linetype = 3) 2. 막대그래프의 순서 변경 막대그래프에서 막대는 기본적으로 범주이름의 순서대로 정렬됨. 이런 경우 막대의 크기가 들쭉날쭉해서 분석 결과를 한눈에 알기 어려움. 2.1. reorder() : 크기 순으로 정렬 library(dplyr) mpg1&lt;- read.csv(&quot;data/mpg1.csv&quot;,stringsAsFactors = F) drv_hwy &lt;-mpg1 %&gt;% group_by(drv) %&gt;% summarise(mean_hwy=mean(hwy)) # 기본그래프 ggplot(data = drv_hwy,aes(x=drv,y=mean_hwy))+geom_col() # 오름차순 ggplot(data = drv_hwy,aes(x=reorder(drv,mean_hwy),y=mean_hwy)) + geom_col() # 내림차순 ggplot(data = drv_hwy,aes(x=reorder(drv,-mean_hwy),y=mean_hwy))+geom_col() # 옵션 ggplot(data = drv_hwy,aes(x=reorder(drv,-mean_hwy), y=mean_hwy))+ geom_col() + labs( title = &quot;그래프 제목&quot;, subtitle = &quot;그래프 소제목&quot;, x = &quot;x변수명&quot;, y = &quot;y변수명&quot;, caption = &quot;데이터 출처&quot; ) 2.2. scale_x_discrete(limits=c()) : 그래프 순서를 직접 정하기 [SKIP] # &#39;r,f,s&#39; 순서대로 그리기 ggplot(data = drv_hwy,aes(x=drv, y=mean_hwy))+ geom_col()+ scale_x_discrete(limits=c(&quot;r&quot;, &quot;f&quot;, &quot;4&quot;)) # 일부만 선택해서 그래프 그리기. ggplot(data = drv_hwy,aes(x=drv, y=mean_hwy))+ geom_col()+ scale_x_discrete(limits=c(&quot;r&quot;, &quot;f&quot;)) ## Warning: Removed 1 rows containing missing values (position_stack). 2.3. coord_flip() : 막대그래프를 90도 회전해서 수평으로 그리기 [SKIP] # 기본 형태 ggplot(data = drv_hwy,aes(x=drv, y=mean_hwy)) + geom_col() # 수평으로 그리기 ggplot(data = drv_hwy,aes(x=drv, y=mean_hwy)) + geom_col() + coord_flip() 2.4. xlim(), ylim() : x축과 y축의 범위 지정하기 [SKIP] 그래프 모양은 전체 화면에 고르게 그려지는 것이 보기에 좋다. 데이터가 한 곳으로 몰려있지 않게 축의 범위를 지정할 수 있다. # 기본 형태 ggplot(data = diamonds,aes(x=carat, y=price)) + geom_point() # 범위 지정 했을 때 ggplot(data = diamonds,aes(x=carat, y=price)) + geom_point()+ xlim(0,3) + ylim(0,18000) ## Warning: Removed 332 rows containing missing values (geom_point). 2.5. ggtitle(), xlab(), ylab() : 그래프와 축에 이름 붙이기 [SKIP] 뒤에 ’5단원 &gt; 3.옵션 &gt; theme_classic() : 그래프 테마 바꾸는 법’이 더욱 디테일하게 관리 가능. ggplot(data = diamonds,aes(x=carat, y=price)) + geom_point()+ ggtitle(&quot;다이아몬드 캐럿별 가격 분포&quot;)+ xlab(&quot;캐럿&quot;)+ ylab(&quot;가격&quot;) 5단원 ggplot2 강의 (책X) 1. 산점도 그래프 그리는 방법 산점도 : X축 수치형 연속형 데이터, y축 수치형 연속형 데이터 색상 값: adobe colour 옵션 사용법 코드는 깃허브 R 파일 안에 있다. library(readxl) library(ggplot2) # 데이터 불러오기 who_disease &lt;- read_xlsx(&quot;data/who_disease.xlsx&quot;) # 기본 시각화 ggplot(who_disease,aes(x = year, y = cases)) + geom_point() #aes는 축을 관리함함 # + 뒤에는 그래프 종류 ?geom_point ## httpd 도움말 서버를 시작합니다 ... 완료 # 옵션 1. alpha : 투명도 주기 ggplot(who_disease,aes(x = year, y = cases)) + geom_point(alpha=0.1) # 옵션 2. colour : 색상 변화 ggplot(who_disease,aes(x = year, y = cases)) + geom_point(alpha=0.1, colour=&quot;red&quot;) ggplot(who_disease,aes(x = year, y = cases)) + geom_point(alpha=0.1, colour=&quot;#9FCFE3&quot;) #adode 가서 색상 # 옵션 3. fill 색상을 채워 넣을 때 ggplot(who_disease,aes(x = year, y = cases)) + geom_point(fill=&quot;#BCF8FA&quot;) # 옵션 4. group ggplot(who_disease,aes(x = year, y = cases)) + geom_point() # 옵션 5. shape : 모양 ggplot(who_disease,aes(x = year, y = cases)) + geom_point(shape=1) # 옵션 6. size : 크기 ggplot(who_disease,aes(x = year, y = cases)) + geom_point(size=8) # 옵션 7. stroke ggplot(who_disease,aes(x = year, y = cases)) + geom_point() 1.1. colour 입력 위치 변경해보기 원래 : geom_point(colour=red_색상값) aes 안에 colour_옵션을 넣을 땐 ()에 컬럼명 넣기! ggplot(데이터, aes(x= 변수, y= 변수, colour=컬럼명, 옵션=컬럼명)) + geom_point() # colour 입력 위치 변경해보기 str(iris) ## &#39;data.frame&#39;: 150 obs. of 5 variables: ## $ Sepal.Length: num 5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ... ## $ Sepal.Width : num 3.5 3 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 ... ## $ Petal.Length: num 1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ... ## $ Petal.Width : num 0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.1 ... ## $ Species : Factor w/ 3 levels &quot;setosa&quot;,&quot;versicolor&quot;,..: 1 1 1 1 1 1 1 1 1 1 ... ggplot(iris, aes(x= Sepal.Length, y= Sepal.Width, colour=Species)) + geom_point() # 컬럼별로 색상이 나뉜다. 2. 히스토그램 그리기 히스토그램은 데이터 분포가 어느 지역에 몰려있는지 확인해야한다. 질병데이터 region = AMR, year = 1980, disease= 백일해(pertussis) 그래프는 변수에 따라 달라진다. 그래프는 가공을 하고 그래프를 그려야한다. 참고 자료 : RStudio &gt; Help &gt; Cheat Sheets &gt; data visualization with ggplot2 # 데이터 가공 library(dplyr) str(who_disease) ## tibble [43,262 × 6] (S3: tbl_df/tbl/data.frame) ## $ region : chr [1:43262] &quot;EMR&quot; &quot;EUR&quot; &quot;AFR&quot; &quot;EUR&quot; ... ## $ countryCode: chr [1:43262] &quot;AFG&quot; &quot;ALB&quot; &quot;DZA&quot; &quot;AND&quot; ... ## $ country : chr [1:43262] &quot;Afghanistan&quot; &quot;Albania&quot; &quot;Algeria&quot; &quot;Andorra&quot; ... ## $ disease : chr [1:43262] &quot;measles&quot; &quot;measles&quot; &quot;measles&quot; &quot;measles&quot; ... ## $ year : num [1:43262] 2016 2016 2016 2016 2016 ... ## $ cases : num [1:43262] 638 17 41 0 53 0 0 2 99 27 ... data2 &lt;-who_disease %&gt;% filter(region ==&#39;AMR&#39;, year == 1980, disease == &#39;pertussis&#39;, cases &gt;0) -&gt; data2 # 가공된 데이터로 그래프 그리기 ggplot(data2,aes(x=cases)) + geom_histogram(fill=&quot;#BCF8FA&quot;) ## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`. ggplot(data2,aes(x=cases)) + geom_histogram() ## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`. ggplot(data2, aes(x=country, y= cases)) + geom_col() # 글씨가 겹쳐서 하나도 안보임 ggplot(data2, aes(x=country, y= cases)) + geom_col(fill=&quot;#BCF8FA&quot;) + coord_flip() # 옵션, 글씨를 알아볼 수 있도록 글씨 방향을 돌려줌 3. 옵션 그래프 옵션, ggplot expansion package # labs() : 그래프에 설명을 추가 library(ggplot2) ggplot(data = iris,aes(x=Sepal.Length, y=Sepal.Width))+ geom_col() + labs( title = &quot;그래프 제목&quot;, subtitle = &quot;그래프 소제목&quot;, x = &quot;x변수명&quot;, y = &quot;y변수명&quot;, caption = &quot;데이터 출처&quot; ) # scale_color_manual() : 컬럼별로 색상을 나눌 때, 지정된 색상을 내가 바꾸는 법 library(ggplot2) str(iris) ## &#39;data.frame&#39;: 150 obs. of 5 variables: ## $ Sepal.Length: num 5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ... ## $ Sepal.Width : num 3.5 3 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 ... ## $ Petal.Length: num 1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ... ## $ Petal.Width : num 0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.1 ... ## $ Species : Factor w/ 3 levels &quot;setosa&quot;,&quot;versicolor&quot;,..: 1 1 1 1 1 1 1 1 1 1 ... ggplot(data = iris,aes(x=Sepal.Length, y=Sepal.Width, color=Species)) + geom_point() + labs( tile = &quot;제목&quot;, x=&quot;길이&quot;, y=&quot;넓이&quot;) + scale_color_manual( labels = c(&quot;setosa&quot;, &quot;versicolor&quot;, &quot;virginica&quot;), values = c(&quot;orange&quot;, &quot;blue&quot;, &quot;yellow&quot;)) # theme_classic() : 그래프 테마 바꾸는 법 library(ggplot2) str(iris) ## &#39;data.frame&#39;: 150 obs. of 5 variables: ## $ Sepal.Length: num 5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ... ## $ Sepal.Width : num 3.5 3 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 ... ## $ Petal.Length: num 1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ... ## $ Petal.Width : num 0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.1 ... ## $ Species : Factor w/ 3 levels &quot;setosa&quot;,&quot;versicolor&quot;,..: 1 1 1 1 1 1 1 1 1 1 ... ggplot(iris, aes(x = Sepal.Length, y = Sepal.Width, colour = Species)) + geom_point() + labs( title = &quot;제목&quot;, x = &quot;길이&quot;, y = &quot;너비&quot; ) + scale_color_manual( labels = c(&quot;setosa&quot;, &quot;versicolor&quot;, &quot;virginica&quot;), values = c(&quot;orange&quot;, &quot;blue&quot;, &quot;yellow&quot;) ) + theme_classic() // add bootstrap table styles to pandoc tables function bootstrapStylePandocTables() { $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed'); } $(document).ready(function () { bootstrapStylePandocTables(); }); $(document).ready(function () { window.buildTabsets(\"TOC\"); }); $(document).ready(function () { $('.tabset-dropdown > .nav-tabs > li').click(function () { $(this).parent().toggleClass('nav-tabs-open'); }); }); $(document).ready(function () { // temporarily add toc-ignore selector to headers for the consistency with Pandoc $('.unlisted.unnumbered').addClass('toc-ignore') // move toc-ignore selectors from section div to header $('div.section.toc-ignore') .removeClass('toc-ignore') .children('h1,h2,h3,h4,h5').addClass('toc-ignore'); // establish options var options = { selectors: \"h1,h2,h3\", theme: \"bootstrap3\", context: '.toc-content', hashGenerator: function (text) { return text.replace(/[.\\\\/?&!#]/g, '').replace(/\\s/g, '_'); }, ignoreSelector: \".toc-ignore\", scrollTo: 0 }; options.showAndHide = true; options.smoothScroll = true; // tocify var toc = $(\"#TOC\").tocify(options).data(\"toc-tocify\"); }); (function () { var script = document.createElement(\"script\"); script.type = \"text/javascript\"; script.src = \"https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML\"; document.getElementsByTagName(\"head\")[0].appendChild(script); })();"}],"posts":[{"title":"R을 이용한 공공데이터 분석 필기모음","slug":"R_home","date":"2022-06-28T00:00:00.000Z","updated":"2022-06-28T04:35:34.801Z","comments":true,"path":"2022/06/28/R_home/","link":"","permalink":"https://sallyzmk.github.io/2022/06/28/R_home/","excerpt":"","text":"제3장제4장제6장제7장제8장제9장","categories":[],"tags":[]},{"title":"구글 코랩(Phython)을 GitHub에 업로드하는 방법","slug":"구글 코랩(Phython)을 GitHub에 업로드하는 방ᄇ 4fc35a56f73945b0a1a4e729c6fff10b","date":"2022-06-26T16:00:00.000Z","updated":"2022-06-27T04:36:20.852Z","comments":true,"path":"2022/06/27/구글 코랩(Phython)을 GitHub에 업로드하는 방ᄇ 4fc35a56f73945b0a1a4e729c6fff10b/","link":"","permalink":"https://sallyzmk.github.io/2022/06/27/%EA%B5%AC%EA%B8%80%20%EC%BD%94%EB%9E%A9(Phython)%EC%9D%84%20GitHub%EC%97%90%20%EC%97%85%EB%A1%9C%EB%93%9C%ED%95%98%EB%8A%94%20%EB%B0%A9%E1%84%87%204fc35a56f73945b0a1a4e729c6fff10b/","excerpt":"","text":"[GitHub Repository 초기 설정] 우선 Github에 가서 새 repository를 만든다. ’Add a README file’ 체크 ’Add .gitignore &gt; .gitignore template:Python’ 으로 변경 파일 용량이 너무 크면 GitHub에 안 올라간다. 그래서 미리 data 파일 안에 있는 내용은 안 올라가게 설정해둘 수 있다. .gitignore 파일을 열어 아래 코드를 적는다. 123# datadata/파일명.csv # 특정 파일만 업로드 Xdata # data 파일 내에 있는 전체 파일 업로드 X 터미널에서 git add, commit, push를 할 때 gitignore 부터 git add . 해줘야 반영이 된다. 123git add .gitignoregit commit -m &quot;update&quot;git push 초기 설정 때 한 번만 git add .gitignore해주고 이후로는 이전처럼 커밋(업로드)하면 된다. 123git add .git commit -m “update”git push -u origin main 이제 Python을 사용해 보자. 파이썬을 실행할 수 있는 도구는 다양하다. 그 중에서 구글 코랩으로 파이썬을 사용했을 시에 GitHub에 저장하는 방법을 알아보자. [구글 코랩 기본설정] 우선 구글 코랩에서 인공지능과 관련하여 파이썬을 실행 할 때는 시작과 동시에 구글코랩 GPU로 바꿔줘야한다!! 중요!! 귀여운 것 설정 (소소한 행복이다) 코드 창 왼쪽에 코드 행 번호 표시하는 설정 [구글 코랩을 GitHub에 커밋하는 방법 1] MD 파일로 전환 및 다운로드하여 각각 blog, python_lectures에 커밋하는 방법. 구글 코랩에서 ‘다운로드 &gt; .ipynb 다운로드’를 한다. 구글 코랩에서 다운로드 받은 파일을 python_lectures로 복붙한다. 아나콘다 네비게이터 &gt; 관리자 권한으로 실행한다. 아나콘대 네비게이터에서 Jupyter lab&#x2F; Jupyter notebook 을 실행하여 해당 파일을 찾아간다. markdown로 바꿔준다. MD 파일로 저장 Jupyter lab은 save and~ markdown으로 저장 Jupyter note은 download as &gt; markdown으로 저장 저장된 MD 파일을 각각 blog, python_lectures &gt; source파일에 복붙해서 커밋한다. [구글 코랩을 GitHub에 커밋하는 방법 2] 복잡, 비추 GitHub에 바로 저장하는 방법. 경로 지정 잘 하기, 블로그에 올릴 거라면 다운로드가 편하다. 주의 나중에 로컬에서 깃허브로 업로드 할 때 git pull 먼저 해야 git push가 실행된다.","categories":[],"tags":[]},{"title":"R을 이용한 공공데이터 분석_제9장","slug":"R_9","date":"2022-06-23T00:00:00.000Z","updated":"2022-06-23T09:00:42.149Z","comments":true,"path":"2022/06/23/R_9/","link":"","permalink":"https://sallyzmk.github.io/2022/06/23/R_9/","excerpt":"","text":"제9장 그래프 그리기0단원 자율학습 3장데이터 시각화 ggplot2 자체 사이트 1단원 기본 지식 (192p) [SKIP] 그래프를 그리는 목적 2가지: 1분석하는 데이터의 특징을 탐색적으로 알아보기 위해 간략하게 그리는 경우 2 데이터 분석 결과를 보고서에 싣기 위해서 정교한 그래프를 그리는 경우. 2단원 R 제공 그래프 함수 : plot(), barplot(), hist(), boxplot() (193p) [SKIP]0. 라이브러리 불러오기1library(ggplot2) 1. plot() 함수 2개의 좌표로 표시된 데이터를 그래프로 그림.산점도(scatter plot)를 표현할 때 사용. 12# 한 점 그리기plot(2,2) 1234# 복수의 점 그리기x=1:20y=x^2plot(x,y) 2. barplot() 함수 명목형 변수의 빈도를 박대그래프로 그릴 때 사용 123mpg1 &lt;- read.csv(&quot;data/mpg1.csv&quot;)a&lt;-table(mpg1$drv)a 123## ## 4 f r ## 103 106 25 1barplot(a) 12a&lt;-table(mpg1$drv)a 123## ## 4 f r ## 103 106 25 1barplot(a,hoiz = T) # 가로로 표시 12## Warning in plot.window(xlim, ylim, log = log, ...): &quot;hoiz&quot;는 그래픽 매개변수가## 아닙니다 12## Warning in axis(if (horiz) 2 else 1, at = at.l, labels = names.arg, lty =## axis.lty, : &quot;hoiz&quot;는 그래픽 매개변수가 아닙니다 12## Warning in title(main = main, sub = sub, xlab = xlab, ylab = ylab, ...):## &quot;hoiz&quot;는 그래픽 매개변수가 아닙니다 12## Warning in axis(if (horiz) 1 else 2, cex.axis = cex.axis, ...): &quot;hoiz&quot;는 그래픽## 매개변수가 아닙니다 3. hist() 함수 히스토그램(histogram, 도수분포표)을 그리는 그래프. barplot() 함수는 X축에 명목형 변수를 두고 변수의 빈도수를 그림으로 그리지만, hist()함수에서는 X축이 수치형 연속형 변수이야한다. 12# 6개 구간으로 구분hist(mpg1$cty) 12# 지정한 20 구간으로 구분hist(mpg1$cty,breaks = 20) 1234567# prob=T : 빈도수를 기준으로 확율밀도를 구해서 그래프를 그린다.# y 축에 빈도수 대신 확률밀도가 표시.hist(mpg1$cty,breaks = 20,prob=T)hist(mpg1$cty,breaks = 20,prob=T)lines(density(mpg1$cty)) 4. boxplot() 함수 설명 3단원 ggplot 그래프 (201p) 여기부터!!!1. 기본개념 ggplot2는 그래프를 한꺼번에 그리지 않고 전체 그림의 일부를 투명한 그림판에 나눠 그린 후에 그림판을 겹쳐서 완성한다. 그림한을 레이어(layer)라고 한다. 12# install.packages(&quot;ggplot2&quot;)library(ggplot2) 2. 그래프 그리기2.1. geom_point : 산점도 그리기1234diamonds&lt;-ggplot2::diamonds # diamonds 데이터세트를 새 객체 diamonds에 입력#Step 1. x축 y축 지정ggplot(data=diamonds,aes(x=carat,y=price)) 12#Step 2. geom_point()라는 산점도 그래프로 데이터를 표시ggplot(data=diamonds,aes(x=carat,y=price)) +geom_point() 2.2. 막대그래프 그리기 1 geom_bar() : ggplot2가 원자료에서 범주별 크기를 구해서 막대그래프 그리기 12# 방법 1. x축에 범주형 변수만 지정, ggplot2가 범주별 빈도수를 구해 막대 그래프로 표시ggplot(diamonds,aes(x=cut))+geom_bar() 1table(diamonds$cut) 123## ## Fair Good Very Good Premium Ideal ## 1610 4906 12082 13791 21551 123# 방법 2. x축에 범주형 변수, y축에 연속형 변수# 이때는 geom_bar()안에 stat = &quot;identity&quot;를 적어줘야함ggplot(diamonds,aes(x=cut,y=price))+geom_bar(stat = &quot;identity&quot;) 2 geom_col() : 범주별로 정해진 값을 토대로 막대그래프 그리기 1library(dplyr) 12## ## 다음의 패키지를 부착합니다: &#x27;dplyr&#x27; 123## The following objects are masked from &#x27;package:stats&#x27;:## ## filter, lag 123## The following objects are masked from &#x27;package:base&#x27;:## ## intersect, setdiff, setequal, union 123456# cut 범주별 평균 가격 구하기cut_price &lt;-diamonds %&gt;% group_by(cut) %&gt;% # cut 범주별 데이터 분류 summarise(mean_price=mean(price)) #cut의 범주별 평균가격 구하기cut_price # cut의 범주별 평균가격 12345678## # A tibble: 5 × 2## cut mean_price## &lt;ord&gt; &lt;dbl&gt;## 1 Fair 4359.## 2 Good 3929.## 3 Very Good 3982.## 4 Premium 4584.## 5 Ideal 3458. 2.3. geom_histogram() : 히스토그램(도수분포표) 그리기1ggplot(data = diamonds,aes(x=carat))+geom_histogram() 1## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`. 1range(diamonds$carat) 1## [1] 0.20 5.01 1(5.01-.020)/30 1## [1] 0.1663333 1ggplot(data=diamonds,aes(x=carat)) + geom_histogram(binwidth = 1) 1ggplot(data=diamonds,aes(x=carat)) + geom_histogram(binwidth = 0.01) 2.4. geom_density() : 커널 밀도 곡선1ggplot(data=diamonds,aes(x=carat))+geom_density() 2.5. geom_boxplot() : 상자그림 그래프 그리기1ggplot(data=diamonds,aes(x=1,y=price)) +geom_boxplot() 1ggplot(data = diamonds,aes(x=cut,y=price)) + geom_boxplot() 2.6. geom_line() : 선그래프 그리기1str(cars) 123## &#x27;data.frame&#x27;: 50 obs. of 2 variables:## $ speed: num 4 4 7 7 8 9 10 10 10 11 ...## $ dist : num 2 10 4 22 16 10 18 26 34 17 ... 1ggplot(data = cars,aes(x=speed,y=dist)) + geom_line() 12# 실업자수 변화ggplot(data = economics,aes(x=date,y=unemploy)) + geom_line() 12# 개인저축률 변화ggplot(data = economics,aes(x=date,y=psavert))+geom_line() 1234# 두 개 데이터를 한 화면에 비교ggplot()+ geom_line(data=economics,aes(x=date,y=uempmed, color=&quot;red&quot;))+ geom_line(data = economics,aes(x=date, y=psavert)) 4단원 ggplot() 함수를 정교하게 그리기 (215p)1. col&#x3D;, fill&#x3D; : 1개의 그래프에 2개 변수를 반영하기1.1. ‘col&#x3D;’+geom_point() : 산점도에 변수를 추가해서 그리기1ggplot(data = diamonds,aes(x=carat,y=price))+geom_point() 1ggplot(data = diamonds,aes(x=carat,y=price,col=cut)) + geom_point() #col(color) 1.2. ‘fill&#x3D;’+geom_bar() : 막대그래프에 2개 범주 내용을 반영하기12ggplot(diamonds,aes(x = color)) + geom_bar() 12ggplot(diamonds,aes(x = color, fill=cut)) + geom_bar() 12ggplot(diamonds,aes(x = color, fill=cut)) + geom_bar(position = &quot;dodge&quot;) 12ggplot(diamonds,aes(x = color, fill=cut)) + geom_bar(position = &quot;fill&quot;) 1.3. ‘col&#x3D;’+geom_line() : 선그래프에 2개 범주 내용을 반영하기12leisure &lt;-read.csv(&quot;data/leisure.csv&quot;)str(leisure) 1234## &#x27;data.frame&#x27;: 200 obs. of 3 variables:## $ age : int 2 2 3 3 4 4 5 5 6 6 ...## $ sex : chr &quot;female&quot; &quot;male&quot; &quot;female&quot; &quot;male&quot; ...## $ expense: num 25.8 21 30 16.3 25.7 ... 1ggplot(data=leisure,aes(x=age,y=expense))+geom_line() 12# 색상 추가ggplot(data=leisure,aes(x=age,y=expense,col=sex))+geom_line() 12# 그래프 사이즈, 라인 생김새 변경ggplot(data=leisure,aes(x=age,y=expense,col=sex))+geom_line(size = 1.5, linetype = 3) 2. 막대그래프의 순서 변경 막대그래프에서 막대는 기본적으로 범주이름의 순서대로 정렬됨. 이런 경우 막대의 크기가 들쭉날쭉해서 분석 결과를 한눈에 알기 어려움. 2.1. reorder() : 크기 순으로 정렬123456789library(dplyr)mpg1&lt;- read.csv(&quot;data/mpg1.csv&quot;,stringsAsFactors = F)drv_hwy &lt;-mpg1 %&gt;% group_by(drv) %&gt;% summarise(mean_hwy=mean(hwy))# 기본그래프ggplot(data = drv_hwy,aes(x=drv,y=mean_hwy))+geom_col() 12# 오름차순ggplot(data = drv_hwy,aes(x=reorder(drv,mean_hwy),y=mean_hwy)) + geom_col() 12# 내림차순ggplot(data = drv_hwy,aes(x=reorder(drv,-mean_hwy),y=mean_hwy))+geom_col() 1234567891011# 옵션ggplot(data = drv_hwy,aes(x=reorder(drv,-mean_hwy), y=mean_hwy))+ geom_col() + labs( title = &quot;그래프 제목&quot;, subtitle = &quot;그래프 소제목&quot;, x = &quot;x변수명&quot;, y = &quot;y변수명&quot;, caption = &quot;데이터 출처&quot; ) 2.2. scale_x_discrete(limits&#x3D;c()) : 그래프 순서를 직접 정하기 [SKIP]1234# &#x27;r,f,s&#x27; 순서대로 그리기ggplot(data = drv_hwy,aes(x=drv, y=mean_hwy))+ geom_col()+ scale_x_discrete(limits=c(&quot;r&quot;, &quot;f&quot;, &quot;4&quot;)) 1234# 일부만 선택해서 그래프 그리기.ggplot(data = drv_hwy,aes(x=drv, y=mean_hwy))+ geom_col()+ scale_x_discrete(limits=c(&quot;r&quot;, &quot;f&quot;)) 1## Warning: Removed 1 rows containing missing values (position_stack). 2.3. coord_flip() : 막대그래프를 90도 회전해서 수평으로 그리기 [SKIP]12# 기본 형태ggplot(data = drv_hwy,aes(x=drv, y=mean_hwy)) + geom_col() 12# 수평으로 그리기ggplot(data = drv_hwy,aes(x=drv, y=mean_hwy)) + geom_col() + coord_flip() 2.4. xlim(), ylim() : x축과 y축의 범위 지정하기 [SKIP] 그래프 모양은 전체 화면에 고르게 그려지는 것이 보기에 좋다. 데이터가 한 곳으로 몰려있지 않게 축의 범위를 지정할 수 있다. 12# 기본 형태ggplot(data = diamonds,aes(x=carat, y=price)) + geom_point() 1234# 범위 지정 했을 때ggplot(data = diamonds,aes(x=carat, y=price)) + geom_point()+ xlim(0,3) + ylim(0,18000) 1## Warning: Removed 332 rows containing missing values (geom_point). 2.5. ggtitle(), xlab(), ylab() : 그래프와 축에 이름 붙이기 [SKIP] 뒤에 ‘5단원 &gt; 3.옵션 &gt; theme_classic() : 그래프 테마 바꾸는 법’이 더욱 디테일하게 관리 가능. 1234ggplot(data = diamonds,aes(x=carat, y=price)) + geom_point()+ ggtitle(&quot;다이아몬드 캐럿별 가격 분포&quot;)+ xlab(&quot;캐럿&quot;)+ ylab(&quot;가격&quot;) 5단원 ggplot2 강의 (책X)1. 산점도 그래프 그리는 방법 산점도 : X축 수치형 연속형 데이터, y축 수치형 연속형 데이터 색상 값: adobe colour 옵션 사용법 코드는 깃허브 R 파일 안에 있다. 1234567library(readxl)library(ggplot2)# 데이터 불러오기who_disease &lt;- read_xlsx(&quot;data/who_disease.xlsx&quot;)# 기본 시각화ggplot(who_disease,aes(x = year, y = cases)) + geom_point() 1234#aes는 축을 관리함함# + 뒤에는 그래프 종류?geom_point 1## httpd 도움말 서버를 시작합니다 ... 완료 12# 옵션 1. alpha : 투명도 주기ggplot(who_disease,aes(x = year, y = cases)) + geom_point(alpha=0.1) 12# 옵션 2. colour : 색상 변화ggplot(who_disease,aes(x = year, y = cases)) + geom_point(alpha=0.1, colour=&quot;red&quot;) 1ggplot(who_disease,aes(x = year, y = cases)) + geom_point(alpha=0.1, colour=&quot;#9FCFE3&quot;) #adode 가서 색상 12# 옵션 3. fill 색상을 채워 넣을 때ggplot(who_disease,aes(x = year, y = cases)) + geom_point(fill=&quot;#BCF8FA&quot;) 12# 옵션 4. groupggplot(who_disease,aes(x = year, y = cases)) + geom_point() 12# 옵션 5. shape : 모양ggplot(who_disease,aes(x = year, y = cases)) + geom_point(shape=1) 12# 옵션 6. size : 크기ggplot(who_disease,aes(x = year, y = cases)) + geom_point(size=8) 12# 옵션 7. strokeggplot(who_disease,aes(x = year, y = cases)) + geom_point() 1.1. colour 입력 위치 변경해보기 원래 : geom_point(colour&#x3D;red_색상값) aes 안에 colour_옵션을 넣을 땐 ()에 컬럼명 넣기! ggplot(데이터, aes(x&#x3D; 변수, y&#x3D; 변수, colour&#x3D;컬럼명, 옵션&#x3D;컬럼명)) + geom_point() 12# colour 입력 위치 변경해보기str(iris) 123456## &#x27;data.frame&#x27;: 150 obs. of 5 variables:## $ Sepal.Length: num 5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...## $ Sepal.Width : num 3.5 3 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 ...## $ Petal.Length: num 1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ...## $ Petal.Width : num 0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.1 ...## $ Species : Factor w/ 3 levels &quot;setosa&quot;,&quot;versicolor&quot;,..: 1 1 1 1 1 1 1 1 1 1 ... 1234ggplot(iris, aes(x= Sepal.Length, y= Sepal.Width, colour=Species)) + geom_point() 1# 컬럼별로 색상이 나뉜다. 2. 히스토그램 그리기 히스토그램은 데이터 분포가 어느 지역에 몰려있는지 확인해야한다. 질병데이터 region &#x3D; AMR, year &#x3D; 1980, disease&#x3D; 백일해(pertussis) 그래프는 변수에 따라 달라진다. 그래프는 가공을 하고 그래프를 그려야한다. 참고 자료 : RStudio &gt; Help &gt; Cheat Sheets &gt; data visualization with ggplot2 123# 데이터 가공library(dplyr)str(who_disease) 1234567## tibble [43,262 × 6] (S3: tbl_df/tbl/data.frame)## $ region : chr [1:43262] &quot;EMR&quot; &quot;EUR&quot; &quot;AFR&quot; &quot;EUR&quot; ...## $ countryCode: chr [1:43262] &quot;AFG&quot; &quot;ALB&quot; &quot;DZA&quot; &quot;AND&quot; ...## $ country : chr [1:43262] &quot;Afghanistan&quot; &quot;Albania&quot; &quot;Algeria&quot; &quot;Andorra&quot; ...## $ disease : chr [1:43262] &quot;measles&quot; &quot;measles&quot; &quot;measles&quot; &quot;measles&quot; ...## $ year : num [1:43262] 2016 2016 2016 2016 2016 ...## $ cases : num [1:43262] 638 17 41 0 53 0 0 2 99 27 ... 123456789data2 &lt;-who_disease %&gt;% filter(region ==&#x27;AMR&#x27;, year == 1980, disease == &#x27;pertussis&#x27;, cases &gt;0) -&gt; data2# 가공된 데이터로 그래프 그리기ggplot(data2,aes(x=cases)) + geom_histogram(fill=&quot;#BCF8FA&quot;) 1## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`. 12ggplot(data2,aes(x=cases)) + geom_histogram() 1## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`. 12ggplot(data2, aes(x=country, y= cases)) + geom_col() # 글씨가 겹쳐서 하나도 안보임 123ggplot(data2, aes(x=country, y= cases)) + geom_col(fill=&quot;#BCF8FA&quot;) + coord_flip() # 옵션, 글씨를 알아볼 수 있도록 글씨 방향을 돌려줌 3. 옵션 그래프 옵션, ggplot expansion package 123456789101112# labs() : 그래프에 설명을 추가library(ggplot2)ggplot(data = iris,aes(x=Sepal.Length, y=Sepal.Width))+ geom_col() + labs( title = &quot;그래프 제목&quot;, subtitle = &quot;그래프 소제목&quot;, x = &quot;x변수명&quot;, y = &quot;y변수명&quot;, caption = &quot;데이터 출처&quot; ) 123# scale_color_manual() : 컬럼별로 색상을 나눌 때, 지정된 색상을 내가 바꾸는 법library(ggplot2)str(iris) 123456## &#x27;data.frame&#x27;: 150 obs. of 5 variables:## $ Sepal.Length: num 5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...## $ Sepal.Width : num 3.5 3 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 ...## $ Petal.Length: num 1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ...## $ Petal.Width : num 0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.1 ...## $ Species : Factor w/ 3 levels &quot;setosa&quot;,&quot;versicolor&quot;,..: 1 1 1 1 1 1 1 1 1 1 ... 123456789ggplot(data = iris,aes(x=Sepal.Length, y=Sepal.Width, color=Species)) + geom_point() + labs( tile = &quot;제목&quot;, x=&quot;길이&quot;, y=&quot;넓이&quot;) + scale_color_manual( labels = c(&quot;setosa&quot;, &quot;versicolor&quot;, &quot;virginica&quot;), values = c(&quot;orange&quot;, &quot;blue&quot;, &quot;yellow&quot;)) 123# theme_classic() : 그래프 테마 바꾸는 법library(ggplot2)str(iris) 123456## &#x27;data.frame&#x27;: 150 obs. of 5 variables:## $ Sepal.Length: num 5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...## $ Sepal.Width : num 3.5 3 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 ...## $ Petal.Length: num 1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ...## $ Petal.Width : num 0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.1 ...## $ Species : Factor w/ 3 levels &quot;setosa&quot;,&quot;versicolor&quot;,..: 1 1 1 1 1 1 1 1 1 1 ... 123456789101112ggplot(iris, aes(x = Sepal.Length, y = Sepal.Width, colour = Species)) + geom_point() + labs( title = &quot;제목&quot;, x = &quot;길이&quot;, y = &quot;너비&quot; ) + scale_color_manual( labels = c(&quot;setosa&quot;, &quot;versicolor&quot;, &quot;virginica&quot;), values = c(&quot;orange&quot;, &quot;blue&quot;, &quot;yellow&quot;) ) + theme_classic()","categories":[],"tags":[]},{"title":"R을 이용한 공공데이터 분석_제8장","slug":"R_8","date":"2022-06-21T17:00:00.000Z","updated":"2022-06-24T03:20:31.868Z","comments":true,"path":"2022/06/22/R_8/","link":"","permalink":"https://sallyzmk.github.io/2022/06/22/R_8/","excerpt":"","text":"제8장 통계분석0단원 자율학습 ~~분석을 사용하야된다! -&gt; 선행연구를 찾아보기, 해당 분석 방법의 가설 설정 예시를 확인하기 크롤리의 통계학 강의(The R Book 축약본) The R Book) 강의 추천데이터사이언스를 위한 통계학입문Ⅰ 1단원 분석 방법 (172p)1. 기술 통계 기술통계 : 평균, 최솟갑스 최댓값, 중간값 일반인들은 이정도만 알아도 업무가능. 2. 추론 통계 변수 간의 관계를 파악 &#x2F; 새로운 사실을 발견(&#x3D;추정) 2.1. 평균 차이 검정 [핵심] &#x3D;평균분석, 숫자 가설 검정 : 평균의 차이를 검정 ex. 남자의 평균 키와 여자의 평균 키는 차이가 있을 것이다.(핵심키워드: 평균, 그룹_남&#x2F;녀, 차이) 2.2. 교차분석 &#x3D;빈도분석, 문자열 가설검정 : 각 범주별 빈도를 활용해서 관계성을 검정 ex. 작은 아파트에서의 대형 티비 구매율과 큰 평수 아파트의 대형 티비 구매율 비교 2.3. 상관관계분석 수치 데이터, 그래프가 1로 수렴 : 양의 상관관계(우상향 그래프) 그래프가 -1로 수렴 : 음의 상관관계(우하향 그래프프) 그래프가 0으로 수렴 : 두 수치 데이터 간에 상관관계가 없음(그래프가 엉망이면) 두 변수간의 상관관계가 있느냐 없느냐? ex. 기온에 따라 아이스 아메리카노 판매량을 비교 2.4. 회귀분석 [핵심] 회귀 분석: 독립변수와 종속변수 간의 인과관계를 분석하는 통계적 방법 단순회귀분석: 독립변수가 1석, 다중회귀본석: 독립변수가 2개 단순회귀분석: y(종속변수) &#x3D; a(기울기)x+b(상수항) 가설검정 x값이 y값에 영향을 주느냐? ex. 기온(독립변수)이 판매량(종속변수)에 [긍정적인&#x2F;부정적인인]영향을 주고 있을 것이다. 2단원 통계 검정 (176p)1. 가설 (hypothesis) 귀무가설: 두 집단의 평균 차이가 없다. 대립가설: 두 집단의 평균 차이가 있다. (평소 우리가 궁금해 하는 분야) 2. 유의수준(反오차범위) 유의수준_p-value(p값): 귀무설(평균 차이 X)이 맞는데도 대립가설(평균 차이 O)을 채택할 확률 예외가 있을 수는 있으나, 이를 인정해주되(허용할 수 있는 예외 범위) 일반화할 수는 없다. 가설 검정에서 인정하는 유의 수준 [5%, 1%, 0.1%, 10%] 유의수준의 범위가 넓으면 연구 결과를 얻기 쉽지만 정확성이 떨어짐. 유의수준의 범위가 좁으면 연구 결과를 얻기 어렵만 정확성이 높아짐. 2.(2) 오차범위 오차범위&#x3D;신뢰수준(confidence level) 오차범위 내에 있다 -&gt; 이 설문을 다음에 또 해보면 결과가 다르게 나올 수 있다. 아직까지 차이가 크지 않다. 오차범위 밖에 있다 -&gt; 이 설문을 다음에 또 해보면 결과가 똑같게 나온다. 최종결과 굳어짐. 3. 척도 [SKIP] 척도: 측정도구, 수치로 표시됨. 명목척도: 대상의 특성이나 범주 구분, 산술연산 X ex.성별, 결혼유무, 종교, 인종 서열척도: 대상의 등급순위, 산술연산 X ex.계급, 사회계층, 자격등급 등간척도: 대상을 일정 간격으로 구분, 덧셈과 뺄젬 O ex.온도, 학력, 시험점수 비율척도: 대상을 비율로 구분, 4칙연산 O ex.연령, 무게 3단원 통계 분석 사례 (178p) [통계 검정 사전 준비] 분석을 위한 데이터가 적절한지 검정 등분산 검정, 정규성 검정(수치 데이터가 정규 분포를 이루는가) 귀무가설, 대립가설을 적절하게 설정 +ex. 서울이 부산보다 잘 살것이다-&gt;가설이 아님 +ex. 서울의 평균 임금과 부산의 평균 임금이 차이가 있을 것이다. +선행연구(논문)을 찾아 양식을 응용하기 [통계검정 종류] 평균 차이 검점: (두 그룹 간의) 수치 데이터 + 범주 데이터 +중급이상_ 세 그룹 이상 평균 차이 검정 비율 차이 검정(교차분석): 범주 데이터 상관관계: 수치 데이터 회귀: [테스트] t.test, chisq.test, cor.test p.value +p.value &gt; 0.05 -&gt; 귀무가설 지지 +p.value &lt; 0.05 -&gt; 대립가설 지지 1. 두 집단의 평균 차이 검정 t.test 어떻게 데이터를 입력하는지 확인 결과가 나오면 p-value 확인, 유의수준 0.05이상-&gt;귀무가설, 유의수준 0.05이하-&gt;대립가설 t.test(data&#x3D;데이터세트,종속변수_반응변수_y(비교값)~독립변수_설명변수_x(비교대상)) t.test(데이터세트$종속변수(비교값)~데이터세트$독립변수(비교대상)) 등분산 검정: 두 그룹의 평균 차이 검정이전에 사전 필수 검증이 필요하다. 데이터 양이 비슷한가. 조건이 비슷한가. ex.10건 vs 100건 비교할 수 없음. 두 그룹간의 분산이 비슷하면 –&gt; t.test(모수검정) 두 구룹간의 분산이 다르면 –&gt; 비모수 검정 귀무가설: 두 그룹간의 분산이 비슷하다. 대립가설: 두 그룹간의 분산이 다르다. 등분산 검정에서는 귀무가설을 지지해야 t.test를 사용할 수 있다. 12mpg1 &lt;-read.csv(&quot;data/mpg1.csv&quot;,stringsAsFactors = F)str(mpg1) 123456## &#x27;data.frame&#x27;: 234 obs. of 5 variables:## $ manufacturer: chr &quot;audi&quot; &quot;audi&quot; &quot;audi&quot; &quot;audi&quot; ...## $ trans : chr &quot;auto&quot; &quot;manual&quot; &quot;manual&quot; &quot;auto&quot; ...## $ drv : chr &quot;f&quot; &quot;f&quot; &quot;f&quot; &quot;f&quot; ...## $ cty : int 18 21 20 21 16 18 18 18 16 20 ...## $ hwy : int 29 29 31 30 26 26 27 26 25 28 ... 1234# 시각화library(ggplot2)ggplot(mpg1,aes(x=trans,y=cty))+ geom_boxplot() 123456# 평균값이 크게 차이나는지 확인하기 애매하다# 때문에 t.test 통계검정을 한다.# 귀무가설 : auto와 manual의 cty 평균은 차이가 없다.# 대립가설 : auto와 manual의 cty 평균은 차이가 있다.t.test(data = mpg1,cty ~ trans) 1234567891011## ## Welch Two Sample t-test## ## data: cty by trans## t = -4.5375, df = 132.32, p-value = 1.263e-05## alternative hypothesis: true difference in means between group auto and group manual is not equal to 0## 95 percent confidence interval:## -3.887311 -1.527033## sample estimates:## mean in group auto mean in group manual ## 15.96815 18.67532 1234567 # 종속변수 ~ 독립변수 # 반응변수 ~ 설명변수 # y x# 등분산 검정, 귀무가설이어야 t.test를 사용할 수 있다. p-value 0.05 이상여야함.var.test(data = mpg1, cty~trans) 1234567891011## ## F test to compare two variances## ## data: cty by trans## F = 0.73539, num df = 156, denom df = 76, p-value = 0.1101## alternative hypothesis: true ratio of variances is not equal to 1## 95 percent confidence interval:## 0.4912917 1.0719468## sample estimates:## ratio of variances ## 0.7353887 123# 시각화 방법 1ggplot(mpg1, aes(x = cty, fill = trans)) + geom_histogram() 1## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`. 123# 시각화 방법 2ggplot(mpg1, aes(x = cty, fill = trans)) + geom_density(alpha = 0.1) 2. 교차분석 chisq.test() 함수 활용 교차분석: 범주형 변수들이 관계가 있다는 것을 입증. 평균의 차이가 아니라 ‘비율에 차이’가 있는지를 검정합니다. 교차분석 검정은 R의 chisq.test() 함수로 진행 귀무가설 : trans에 따라 drv(4,f,r)의 (비율)차이가 없다. 대립가설 : trans에 따라 drv의 차이가 있다. 12# 빈도표table(mpg1$trans,mpg1$drv) # 교차분석 1234## ## 4 f r## auto 75 65 17## manual 28 41 8 12# 비율prop.table(table(mpg1$trans, mpg1$drv),1) 1234## ## 4 f r## auto 0.4777070 0.4140127 0.1082803## manual 0.3636364 0.5324675 0.1038961 1234567# 결과- auto 4륜 구동(4)인 47.8%, manual 전륜구동(f) 53.2%가 가장 많음# 가정- 실제로 통계적으로 봤을 때, 차이가 있는지 검정# 귀무가설 : trans에 따라 drv(4,f,r)의 (비율)차이가 없다.# 대립가설 : trans에 따라 drv의 차이가 있다. # 방법 1chisq.test(mpg1$trans,mpg1$drv) 12345## ## Pearson&#x27;s Chi-squared test## ## data: mpg1$trans and mpg1$drv## X-squared = 3.1368, df = 2, p-value = 0.2084 12# 방법 2chisq.test(table(mpg1$trans,mpg1$drv)) 12345## ## Pearson&#x27;s Chi-squared test## ## data: table(mpg1$trans, mpg1$drv)## X-squared = 3.1368, df = 2, p-value = 0.2084 12# 방법 3summary(table(mpg1$trans,mpg1$drv)) 1234## Number of cases in table: 234 ## Number of factors: 2 ## Test for independence of all factors:## Chisq = 3.1368, df = 2, p-value = 0.2084 12# p-value를 확인하고 귀무/대립가설인지 확인# 결과- trans에 따라 drv(4,f,r)의 (비율)차이가 없다. 3. 상관관계분석 cor.test() 함수 활용 123mpg1 &lt;-read.csv(&quot;data/mpg1.csv&quot;, stringsAsFactors = F)cor.test(mpg1$cty,mpg1$hwy) # 상관관계 분석 1234567891011## ## Pearson&#x27;s product-moment correlation## ## data: mpg1$cty and mpg1$hwy## t = 49.585, df = 232, p-value &lt; 2.2e-16## alternative hypothesis: true correlation is not equal to 0## 95 percent confidence interval:## 0.9433129 0.9657663## sample estimates:## cor ## 0.9559159 12# 결과 - p-value 가 2.2/10의16승 보다 작다. -&gt; 0.05보다 작음 -&gt; 대립가설 채택, # sample estimates: 0.9559159 상관관계가 1에 가까움 -&gt; 상관관계가 높다 4. 회귀분석) 회귀: (기초통계에서) 어떤 특정한 결과에 ‘영향’을 주는 주 요인이 무엇이냐? 이를 찾는 것이 회귀. +ex. 매출에 영향을 주는 주 요인을 찾기 -날씨, 유명인 홍보, 음식 맛이 변함... [귀무가설 &amp; 대립가설 존재] 귀무가설 : x(독립변수)가 y(종속변수)에 영향을 주지 않는다. 대립가설 : x(독립변수)가 y(종속변수)에 영향을 준다. lm() 함수 사용: lm(종속변수~독립변수, data) 회귀의 중요성 [회귀 분석 종류] (확장성이 높음) 1세대 회귀 방법론 : 다항회귀분석, 다중회귀분석, 포아송회귀분석, etc 2세대 회귀 방법론 : 구조방정식 [머신러닝, 인공지능] (예측기능을 제공) y &#x3D; ax + b 4.1. 단순회귀분석 단순회귀분석: 독립변수가 1개, 종속변수가 1개일 때 분석하는 방식. 또한 회귀분석의 변수는 독립변수와 종속변수 모두 등간척도 또는 비율척도이어야 한다. lm(data&#x3D;데이터세트,종속변수~독립변수) lm(종속변수~독립변수,) lm(데이터세트$종속변수~데이터세트$독립변수) 12RA &lt;- lm(data = mtcars,mpg~disp) # 회귀분석 결과를 RA에 넣기summary(RA) # 상세한 분석 결과 출력력 123456789101112131415161718## ## Call:## lm(formula = mpg ~ disp, data = mtcars)## ## Residuals:## Min 1Q Median 3Q Max ## -4.8922 -2.2022 -0.9631 1.6272 7.2305 ## ## Coefficients:## Estimate Std. Error t value Pr(&gt;|t|) ## (Intercept) 29.599855 1.229720 24.070 &lt; 2e-16 ***## disp -0.041215 0.004712 -8.747 9.38e-10 ***## ---## Signif. codes: 0 &#x27;***&#x27; 0.001 &#x27;**&#x27; 0.01 &#x27;*&#x27; 0.05 &#x27;.&#x27; 0.1 &#x27; &#x27; 1## ## Residual standard error: 3.251 on 30 degrees of freedom## Multiple R-squared: 0.7183, Adjusted R-squared: 0.709 ## F-statistic: 76.51 on 1 and 30 DF, p-value: 9.38e-10 1234567891011121314151617181920212223242526272829# [결과 확인]# 1. 우선 전체 식에 대한 p-value 확인# p-value가 0.05 이상= 귀무가설이라면# →데이터 처리 (쓸데없는 데이터 처리/데이터수집)# →회귀는 영향을 주는 요인을 찾는 것이기 때문# 2. 개별 요인의 Pr(&gt;|t|)(=p-value) 확인# p-value가 0.05 이상= 귀무가설이라면# →해당 요인을 한.개.씩 제거하고 다시 lm() 함수 돌리기 # (한꺼번에 여러 요인을 지우면 안된다.)# →1번부터 반복# 3. ANOVA (분산분석)# 1,2번 모두 p-value &lt; 0.05 (대립가설)이 되는 y 식을 찾으면 서로 같은 식인지 비교확인해야함.# 식1 : y = disp + var1 + var2 + var3# 식2 : y = disp + var1 + var2# 때문에 요인을 적당히 사전에 차출해야한다.# 컬럼 갯수가 100개 -&gt; 변수를 선택해야함# [변수 선택법]# 전진선택법, 후진소거법, 단계적선택법# 4. R-squared# R-squared (결정계수) = 설명력 = 0 ~ 1# 1로 수렴할 수록 설명력이 좋다.# R-squared는 결정계수, Adjusted R-squared는 수정된 결정계수# 두 수치 모두 1에 가까울 수록 회귀계수의 설명력이 높음# 결정계수는 독립변수가 많아질 수 록 증가하는 특징이 있음.(다중회귀분석 해당당)# Multiple R-squared: 0.7183 -&gt; 70% 원인 이를 100으로 채우기 위해 요인을 찾아서 1에 가깝게 만들도록 한다. 4.2. 다중회귀분석 다중회귀분석: 종속변수에 영향을 주는 독립변수가 복수일 때 분석하는 방식. 여러 독립변수들은 서로 영향을 주면서 종속변수에 영향을 주기 때문에 한 독립변수가 종속변수에 미치는 영향력은 단순회귀분석을 했을 때와 다중회귀분석을 했을 때에 달라집니다. lm(data&#x3D;데이터세트,종속변수~독립변수1+독립변수2+…) lm(종속변수~독립변수1+독립변수2+…,) lm(데이터세트$종속변수~데이터세트$독립변수1+독립변수2+…) 1lm(data=mtcars,mpg~disp+hp+wt) 1234567## ## Call:## lm(formula = mpg ~ disp + hp + wt, data = mtcars)## ## Coefficients:## (Intercept) disp hp wt ## 37.105505 -0.000937 -0.031157 -3.800891 12RA &lt;-lm(data=mtcars,mpg~disp+hp+wt) # 회귀분석 결과를 RA에 넣기summary(RA) 1234567891011121314151617181920## ## Call:## lm(formula = mpg ~ disp + hp + wt, data = mtcars)## ## Residuals:## Min 1Q Median 3Q Max ## -3.891 -1.640 -0.172 1.061 5.861 ## ## Coefficients:## Estimate Std. Error t value Pr(&gt;|t|) ## (Intercept) 37.105505 2.110815 17.579 &lt; 2e-16 ***## disp -0.000937 0.010350 -0.091 0.92851 ## hp -0.031157 0.011436 -2.724 0.01097 * ## wt -3.800891 1.066191 -3.565 0.00133 ** ## ---## Signif. codes: 0 &#x27;***&#x27; 0.001 &#x27;**&#x27; 0.01 &#x27;*&#x27; 0.05 &#x27;.&#x27; 0.1 &#x27; &#x27; 1## ## Residual standard error: 2.639 on 28 degrees of freedom## Multiple R-squared: 0.8268, Adjusted R-squared: 0.8083 ## F-statistic: 44.57 on 3 and 28 DF, p-value: 8.65e-11 1234# [결과]# 1. p-value: 8.65e-11 -&gt; 0.01보다 작음 -&gt; 회귀모형 적합# 2. 개별 요인의 Pr(&gt;|t|)(=p-value) 확인# 3. Adjusted R-squared: 0.8083 -&gt; 결정계수ㅏ 0.0로 놏아져서 회귀모델의 설명력이 높아짐.","categories":[],"tags":[]},{"title":"R을 이용한 공공데이터 분석_제7장","slug":"R_7","date":"2022-06-21T16:00:00.000Z","updated":"2022-06-23T08:53:30.547Z","comments":true,"path":"2022/06/22/R_7/","link":"","permalink":"https://sallyzmk.github.io/2022/06/22/R_7/","excerpt":"","text":"제7장 결측치, 이상치 처리1단원 결측치 (158p) 결측치(결측값)이란? 데이터가 비어 있는 경우, 빈칸으로 둔다. 이를 결측치(결측값)이라고 한다. 데이터 분석을 할 때는 반드시 분석 전에 결측치를 처리해야 한다. 전체 데이터에 있는 결측치 비율이 높으면 결과가 외곡 될 수 있기에 그 데이터를 분석해서는 안된다. 결측치를 채우는 코드는 구글링하면 나온다. 다만 어떤 방법(평균값 적용&#x2F;결측치 제외&#x2F;평균값을 낼 수 없는 경우-패턴, 방정식, 빈도…)을 사용할지 논리를 갖고 판단을 내려야 한다. 해당 도메인(의료,무역,회계…)을 잘 알아야 결측치를 채우는 옳은 방법을 판단할 수 있다. 통계는 실험이다!! 분석가는 설득을 해야한다. 여러 분석 방법을 실험해 보고 가장 정확도가 높은 분석 방법을 사용하여 최종결정자를 설득 해야 한다. 0. 라이브러리 불러오기1library(dplyr) 12## ## 다음의 패키지를 부착합니다: &#x27;dplyr&#x27; 123## The following objects are masked from &#x27;package:stats&#x27;:## ## filter, lag 123## The following objects are masked from &#x27;package:base&#x27;:## ## intersect, setdiff, setequal, union 1. 결측치를 확인하고 빈도구하기 R에서는 결측치를 NA로 표시한다. 1.1. is.na(): 결측치 확인12exam_na &lt;- read.csv(&quot;data/exam_na.csv&quot;) # 하위 경로 적어주기is.na(&quot;exam_na.csv&quot;) # Is this yours? 결측치가 있니? 없니? 1## [1] FALSE 1.2. table(is.na()) : 결측치 빈도구하기 table() : 빈도 구하기 table(is.na(데이터세트)) : 데이터세트의 결측치 ‘전체 빈도’ 구하기 table(is.na(데이터세트$변수)) : 데이터세트의 ‘특정 변수’에 있는 결측치 빈도 구하기 summary(is.na(데이터세트)) : 데이터세트의 ‘모든 변수별로’ 결측치 빈도 구하기 1table(is.na(exam_na)) 123## ## FALSE TRUE ## 22 3 1table(is.na(exam_na$korean)) 123## ## FALSE TRUE ## 4 1 1summary(is.na(exam_na)) 12345678## id sex korean english ## Mode :logical Mode :logical Mode :logical Mode :logical ## FALSE:5 FALSE:5 FALSE:4 FALSE:3 ## TRUE :1 TRUE :2 ## math ## Mode :logical ## FALSE:5 ## 1summary(exam_na) 12345678## id sex korean english math ## Min. :1 Length:5 Min. :87.00 Min. :84.00 Min. :80.0 ## 1st Qu.:2 Class :character 1st Qu.:87.00 1st Qu.:88.00 1st Qu.:82.0 ## Median :3 Mode :character Median :89.50 Median :92.00 Median :88.0 ## Mean :3 Mean :90.25 Mean :90.33 Mean :86.6 ## 3rd Qu.:4 3rd Qu.:92.75 3rd Qu.:93.50 3rd Qu.:90.0 ## Max. :5 Max. :95.00 Max. :95.00 Max. :93.0 ## NA&#x27;s :1 NA&#x27;s :2 2. 결측치 처리방법 결측치는 ‘제거하고 처리’하기보다 &gt; ‘다른 값으로 대체’하는게 더 중요하다. 2.1. 결측치를 제외하고 분석하기 1 na.rm &#x3D; T (T-제거X. F-제거O) : 연산함수에서 결측치를 제외하는 명령 2 na.omit() : 결측치가 있는 행을 모두 제외하기 *가급적 사용하지 말기 3 filter(!is.na()) : filter() 함수로 결측치가 없는 행만 추출하기 12# 1mean(exam_na$korean) 1## [1] NA 1mean(exam_na$korean,na.rm = TRUE) # 결측치를 제외하고 평균 구하기 1## [1] 90.25 1mean(exam_na$korean,na.rm = T) 1## [1] 90.25 12# 3exam_na %&gt;% filter(is.na(korean)) 12## id sex korean english math## 1 4 M NA 84 80 1234# filter(is.na()) : 결측치가 있는 행만 추츨해라.# exam_na의 korean 변수에서 결측치가 있는 행만 추출exam_na %&gt;% filter(!is.na(korean)) 12345## id sex korean english math## 1 1 M 87 NA 82## 2 2 F 92 95 93## 3 3 F 95 92 90## 4 5 F 87 NA 88 12# filter(!is.na()) : 결측치가 아닌 행만 추츨해라.# exam_na의 korean 변수에서 결측치가 아닌 행만 추출 2.2. 결측치를 다른 값으로 대체하기 결측치 대체법(imputation) 대체값으로 평균값이 많이 쓰이지만 특정 값의 빈도가 매우 많을 때는 최빈값으로 대체한다. table() 함수 활용. 결측치를 대체할 때는 ifelse()함수 사용. 참고자료 A Solution to Missing Data: Imputation Using R R 결측값(NA) 제거, 대체 방법 2단원 이상치 (163p)1. 이상치의 개념 데이터의 특정 값이 뭔가 ‘이상’이 있다. (ex.오타) Case 1 : 정해진 범주에서 벗어난 데이터 (ex.2000.04.30&#x2F;2000.40.30 -&gt;9999로 대체) Case 2 : 숫자, 아웃라이어(Outlier), 극단값 (ex.평균: 평균임금 320만원&#x2F;손흥민 몇십억원, 평균의 함정) 2. 이상치 처리12mpg1_out &lt;- read.csv(&quot;data/mpg1_out.csv&quot;)glimpse(mpg1_out) 12345## Rows: 234## Columns: 3## $ trans &lt;int&gt; 1, 2, 2, 1, 1, 2, 1, 2, 1, 2, 1, 1, 2, 1, 2, 1, 1, 1, 1, 3, 1, 1…## $ drv &lt;chr&gt; &quot;f&quot;, &quot;f&quot;, &quot;f&quot;, &quot;f&quot;, &quot;f&quot;, &quot;f&quot;, &quot;f&quot;, &quot;4&quot;, &quot;4&quot;, &quot;4&quot;, &quot;4&quot;, &quot;4&quot;, &quot;5&quot;,…## $ cty &lt;int&gt; 18, 21, 20, 21, 16, 18, 18, 18, 16, 20, 19, 15, 17, 17, 15, 15, … 12# trans의 갯수를 구하자table(mpg1_out$trans) 123## ## 1 2 3 ## 154 76 4 123456# ifelse# 만약 ~라면, 내가 무엇을 할 것이다. (가정법)# if trans의 값이 3이라면, 결측치로 바꿔주세요. 나머지는 그대로 유지하세요.# ifelse(is.na(변수),대체값,변수)mpg1_out$trans&lt;-ifelse(mpg1_out$trans==3,NA, mpg1_out$trans) #3을 결측치 처리table(is.na(mpg1_out$trans)) 123## ## FALSE TRUE ## 230 4 12# 결측치 제거mpg1_out %&gt;% filter(!is.na(trans)) 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231## trans drv cty## 1 1 f 18## 2 2 f 21## 3 2 f 20## 4 1 f 21## 5 1 f 16## 6 2 f 18## 7 1 f 18## 8 2 4 18## 9 1 4 16## 10 2 4 20## 11 1 4 19## 12 1 4 15## 13 2 5 17## 14 1 4 17## 15 2 4 15## 16 1 4 15## 17 1 4 17## 18 1 4 16## 19 1 r 14## 20 1 r 14## 21 1 r 13## 22 1 r 12## 23 2 r 16## 24 1 r 15## 25 2 r 16## 26 1 r 15## 27 1 4 14## 28 1 4 11## 29 1 4 11## 30 1 4 14## 31 1 f 19## 32 1 f 22## 33 1 f 18## 34 1 f 18## 35 1 f 17## 36 1 f 18## 37 1 f 17## 38 1 f 16## 39 1 f 16## 40 1 f 17## 41 1 f 17## 42 1 f 11## 43 1 f 15## 44 1 f 16## 45 1 f 16## 46 2 4 15## 47 1 4 14## 48 1 4 13## 49 2 4 14## 50 1 4 14## 51 1 4 14## 52 1 5 9## 53 2 4 11## 54 1 4 11## 55 1 4 13## 56 1 4 13## 57 1 4 9## 58 1 4 11## 59 1 4 13## 60 1 4 11## 61 2 4 12## 62 1 4 9## 63 1 4 13## 64 1 4 13## 65 2 4 12## 66 2 4 9## 67 1 4 11## 68 2 4 11## 69 1 4 13## 70 1 4 11## 71 1 r 11## 72 1 r 11## 73 1 r 12## 74 1 4 14## 75 2 4 15## 76 1 4 14## 77 1 4 13## 78 1 4 13## 79 1 5 13## 80 1 4 14## 81 2 4 14## 82 2 4 13## 83 1 4 13## 84 1 4 13## 85 1 4 11## 86 1 4 13## 87 2 r 18## 88 1 r 18## 89 2 r 17## 90 1 r 16## 91 1 r 15## 92 2 r 15## 93 2 r 15## 94 1 r 15## 95 2 r 14## 96 2 f 28## 97 1 f 24## 98 2 f 25## 99 2 f 23## 100 1 f 24## 101 2 f 26## 102 1 f 25## 103 1 f 24## 104 2 f 21## 105 1 f 18## 106 2 f 18## 107 1 f 21## 108 2 f 21## 109 1 f 18## 110 2 f 18## 111 1 f 19## 112 1 f 19## 113 2 f 19## 114 2 f 20## 115 1 f 20## 116 1 f 17## 117 2 f 16## 118 2 f 17## 119 1 4 17## 120 1 4 15## 121 1 4 15## 122 1 4 14## 123 1 4 9## 124 1 4 14## 125 1 4 13## 126 1 4 11## 127 1 4 11## 128 1 4 12## 129 1 4 12## 130 1 4 11## 131 1 r 11## 132 1 r 11## 133 1 r 12## 134 1 4 14## 135 1 4 13## 136 1 4 13## 137 1 4 13## 138 2 f 21## 139 1 f 19## 140 1 f 23## 141 2 f 23## 142 2 f 19## 143 1 f 19## 144 1 f 18## 145 2 f 19## 146 1 f 19## 147 1 4 14## 148 2 4 15## 149 1 4 14## 150 1 4 12## 151 1 f 18## 152 1 f 16## 153 1 f 17## 154 1 f 18## 155 1 f 16## 156 2 4 18## 157 1 4 18## 158 2 4 20## 159 2 4 19## 160 1 4 20## 161 1 4 18## 162 1 4 21## 163 2 4 19## 164 2 4 19## 165 1 4 19## 166 1 4 20## 167 1 4 20## 168 2 4 19## 169 2 4 20## 170 2 4 15## 171 1 4 16## 172 1 4 15## 173 2 4 15## 174 1 4 16## 175 1 4 14## 176 2 f 21## 177 1 f 21## 178 2 f 21## 179 1 f 21## 180 1 f 18## 181 2 f 18## 182 1 f 19## 183 1 f 21## 184 2 f 21## 185 2 f 21## 186 1 f 22## 187 1 f 18## 188 2 f 18## 189 1 f 18## 190 1 f 24## 191 1 f 24## 192 2 f 26## 193 2 f 28## 194 1 f 26## 195 1 4 11## 196 1 4 13## 197 2 4 15## 198 1 4 16## 199 2 4 17## 200 2 4 15## 201 1 4 15## 202 2 4 15## 203 1 4 16## 204 2 f 21## 205 1 f 19## 206 2 f 21## 207 1 f 22## 208 2 f 17## 209 2 f 33## 210 2 f 21## 211 1 f 19## 212 1 f 22## 213 2 f 21## 214 1 f 21## 215 2 f 21## 216 1 f 16## 217 2 f 17## 218 2 f 35## 219 1 f 29## 220 2 f 21## 221 1 f 19## 222 2 f 20## 223 1 f 20## 224 2 f 21## 225 1 f 18## 226 1 f 19## 227 2 f 21## 228 1 f 16## 229 2 f 18## 230 1 f 17 1234# 과정 정리 : 데이터 불러오기&gt;변수 trans의 종류가 각각 몇개씩 있는지 확인&gt;3이 너무 적어서 제거하고자 함&gt;3을 결측치로 변환해서&gt;결측치를 제거# mpg1_out %&gt;% filter(trans==3)# 굳이 3을 결측치로 전환하지 않고 filter() 함수를 바로 사용하는 방법도 있다. 3. 극단치 처리 숫자 데이터 boxplot() boxplot() 함수를 통해서 극단치가 있는지 없는지 확인 가능 IQR : 3사분위 - 1사분위 경계값 : IQR +IQR * 1.5 상한 &#x2F; IQR -IQR * 1.5 그러나 실무에서는 산업 별로 극단치를 처리하는 각각의 기준이 있다!! 때문에 실무에서 통계적으로 접근하여 극단치를 마음대로 제거하면 큰일 난다!! 상사한테 물어보기! 1234567mpg1 &lt;- read.csv(&quot;data/mpg1.csv&quot;)boxplot(mpg1$cty)# 1개의 변수 통계값 : boxplot(데이터세트$변수)$stats# 복수 변수의 통계값 : boxplot(데이터세트$변수1,데이터세트$변수2,...)$stats# 변수의 범주별 통계값 : boxplot(데이터세트$종속변수~데이터세트$범주변수)$statsboxplot(mpg1$cty)$stats 123456## [,1]## [1,] 9## [2,] 14## [3,] 17## [4,] 19## [5,] 26 1boxplot(mpg1$cty~mpg1$drv)$stats 123456## [,1] [,2] [,3]## [1,] 9 15 11## [2,] 13 18 12## [3,] 14 19 15## [4,] 16 21 15## [5,] 20 25 18","categories":[],"tags":[]},{"title":"R을 이용한 공공데이터 분석_제6장","slug":"R_6","date":"2022-06-20T17:00:00.000Z","updated":"2022-06-23T08:53:21.165Z","comments":true,"path":"2022/06/21/R_6/","link":"","permalink":"https://sallyzmk.github.io/2022/06/21/R_6/","excerpt":"","text":"제6장 데이터 가공 (분석 프로세스)0단원 자율학습 5장 데이터 변환 코드 위주로 다 쳐보기 12345# 설치해야되는 패키지들# install.packages(&quot;nycflights13&quot;)# install.packages(&quot;tidyverse&quot;)# library(nycflights13)# library(tidyverse) 1단원 데이터 전처리 (98p) 데이터 전처리를 위한 도구(패키지) 2가지 차이 dplyr : 10GB 이내, 매우 쉬움 data.table : 50GB, 어려움 123# 라이브러리 불러오기# install.packages(&quot;dplyr&quot;)library(dplyr) 12## ## 다음의 패키지를 부착합니다: &#x27;dplyr&#x27; 123## The following objects are masked from &#x27;package:stats&#x27;:## ## filter, lag 123## The following objects are masked from &#x27;package:base&#x27;:## ## intersect, setdiff, setequal, union 12345 mpg1 &lt;-read.csv(&quot;data/mpg1.csv&quot;, stringsAsFactors = F)# 99p 방법1, 방법2 차이 설명# %&gt;% : 파이프 연산자 pipe operatorstr(mpg1) 123456## &#x27;data.frame&#x27;: 234 obs. of 5 variables:## $ manufacturer: chr &quot;audi&quot; &quot;audi&quot; &quot;audi&quot; &quot;audi&quot; ...## $ trans : chr &quot;auto&quot; &quot;manual&quot; &quot;manual&quot; &quot;auto&quot; ...## $ drv : chr &quot;f&quot; &quot;f&quot; &quot;f&quot; &quot;f&quot; ...## $ cty : int 18 21 20 21 16 18 18 18 16 20 ...## $ hwy : int 29 29 31 30 26 26 27 26 25 28 ... 123456data2 &lt;- mpg1 %&gt;% select(drv, cty, hwy) %&gt;% filter(drv == &quot;f&quot;)data3 &lt;-select(mpg1, drv, cty, hwy)data3 &lt;-filter(data3, drv ==&quot;f&quot;) 중요도 높은 함수들 4.select : 컬럼명 추출 5.filter : 행 추출 (조건식) 6.mutate : 파생변수, 데이터 분석에 있어 중요함. 기존에 있던 데이터에서 변수를 새로 만듬. ex.총매출액, 영업이익 7.group by 와 7.summarise()는 함께간다 : 비교를 해야 데이터가 의미가 있음 2단원 rename() 이름 바꾸기, 변수 이름을 한 번에 여러개 바꿀 수 있음. 3단원 count() count() &#x3D; table(): 데이터세트의 ‘범주형 변수’에서 범주들의 빈도를 센다. 4단원 select() 데이터세트의 열 추출&#x2F;삭제하여 새로운 객체를 만들 때 사용. 데이터세트의 용량이 너무 많으면 X, 필요한 열만 추출하여 분석 1. 필요한 열을 추출하기123# 방법1mpg1_1 &lt;-mpg1 %&gt;% select(manufacturer,trans,cty)str(mpg1_1) 1234## &#x27;data.frame&#x27;: 234 obs. of 3 variables:## $ manufacturer: chr &quot;audi&quot; &quot;audi&quot; &quot;audi&quot; &quot;audi&quot; ...## $ trans : chr &quot;auto&quot; &quot;manual&quot; &quot;manual&quot; &quot;auto&quot; ...## $ cty : int 18 21 20 21 16 18 18 18 16 20 ... 12# 방법2mpg1_2 &lt;-select(mpg1,manufacturer,trans,cty) 2. 불필요한 열 삭제 후 필요한 열만 남기기123# 방법1mpg1_type1 &lt;-mpg1 %&gt;% select(-cty,-hwy)str(mpg1_type1) 1234## &#x27;data.frame&#x27;: 234 obs. of 3 variables:## $ manufacturer: chr &quot;audi&quot; &quot;audi&quot; &quot;audi&quot; &quot;audi&quot; ...## $ trans : chr &quot;auto&quot; &quot;manual&quot; &quot;manual&quot; &quot;auto&quot; ...## $ drv : chr &quot;f&quot; &quot;f&quot; &quot;f&quot; &quot;f&quot; ... 123456# 방법2mpg1_type2 &lt;-mpg1 %&gt;% select(-c(cty,hwy)) #c() 클론,변수들을 묶어둠.# 방법3mpg1_type3 &lt;-select(mpg1,-cty,-hwy)# 방법4mpg1_type4 &lt;-select(mpg1,-c(cty,hwy)) 5단원 slice(),filter()1. slice(): 행의 일부를 추출하기12# 방법1mpg1 %&gt;% slice(1,4,5) 1234## manufacturer trans drv cty hwy## 1 audi auto f 18 29## 2 audi auto f 21 30## 3 audi auto f 16 26 12# 방법2slice(mpg1,1,4,5) 1234## manufacturer trans drv cty hwy## 1 audi auto f 18 29## 2 audi auto f 21 30## 3 audi auto f 16 26 2. filter(): 조건에 맞는 행을 추출하기2.1. 비교값이 같은 데이터 추출123456# 방법1 mpg1_hd1 &lt;-mpg1 %&gt;% filter(manufacturer==&quot;hyundai&quot;)# 방법2mpg1_hd2 &lt;-filter(mpg1,manufacturer==&quot;hyundai&quot;)max(mpg1$cty) # cty의 최댓값 구하기 1## [1] 35 12# 방법1mpg1 %&gt;% filter(cty==35) 12## manufacturer trans drv cty hwy## 1 volkswagen manual f 35 44 12# 방법2filter(mpg1,cty==35) 12## manufacturer trans drv cty hwy## 1 volkswagen manual f 35 44 12# 방법3mpg1 %&gt;%filter(cty==max(cty)) 12## manufacturer trans drv cty hwy## 1 volkswagen manual f 35 44 ‘&#x3D;’: 지정하거나 입력, ‘&#x3D;&#x3D;’:비교해서 같다 2.2. 비교값이 다른 데이터 추출1234# 방법1mpg1_no_hd1 &lt;-mpg1 %&gt;% filter(manufacturer!=&quot;hyundai&quot;)# 방법2mpg1_no_hd2 &lt;-filter(mpg1,manufacturer!=&quot;hyundai&quot;) ‘&#x3D;!’: 같지 않다 2.3. 비교값이 크거나 작은 데이터 추출2.3.1. 비교값이 작은(&lt;) 데이터 추출1mean(mpg1$cty) # cty의 평균 구하기 1## [1] 16.85897 123456# 방법1mpg1_low1 &lt;-mpg1 %&gt;% filter(cty&lt;16.85897)# 방법2mpg1_low2 &lt;-filter(mpg1,cty&lt;16.85897)# 방법3mpg1_low3 &lt;-mpg1 %&gt;% filter(cty&lt;mean(cty)) 2.3.2. 비교값이 작거나 같은(&lt;&#x3D;) 데이터 추출1quantile(mpg1$cty) #1사분위수 알아보기 12## 0% 25% 50% 75% 100% ## 9 14 17 19 35 1234# 방법1mpg1_low4 &lt;-mpg1 %&gt;% filter(cty&lt;=14)# 방법2mpg1_low5 &lt;-filter(mpg1,cty&lt;=14) 2.3.3. 비교값이 큰(&gt;) 데이터 추출1median(mpg1$cty) #중앙값 구하기기 1## [1] 17 123456# 방법1mpg1_hight1 &lt;-mpg1 %&gt;% filter(cty&gt;17)# 방법2mpg1_hight2 &lt;-filter(mpg1,cty&gt;17)# 방법3mpg1_hight3 &lt;-mpg1 %&gt;% filter(cty&gt;median(cty)) 2.3.4. 비교값이 크거나 같은(&gt;&#x3D;) 데이터 추출1quantile(mpg1$cty) 12## 0% 25% 50% 75% 100% ## 9 14 17 19 35 1234# 방법1mpg1_hight4 &lt;-mpg1 %&gt;% filter(cty&gt;=19)# 방법2mpg1_hight5 &lt;-filter(mpg1,cty&gt;=19) 2.4. 복수의 조건을 충족하는 데이터 추출2.4.1. 조건이 2개일 때123# mpg1에서 manufacturer가 hyundai이면서 cty가 모든 자동차의 평균 이상인 데이터를 추출하기mean(mpg1$cty) #cty 평균구하기기 1## [1] 16.85897 123456# 방법1mpq1_hd3 &lt;-mpg1 %&gt;% filter(manufacturer==&quot;hyundai&quot;&amp;cty&gt;=16.85897)# 방법2mpq1_hd4 &lt;-filter(mpg1,manufacturer==&quot;hyundai&quot;&amp;cty&gt;=16.85897)# 방법3mpq1_hd5 &lt;-mpg1 %&gt;% filter(manufacturer==&quot;hyundai&quot;&amp;cty&gt;=mean(cty)) 2.4.2. 조건이 3개일 때123# mpg1의 manufacturer가 hyundai이면서, trans가 auto이고, cty가 전체 자동차의 중앙값 이상인 데이터를 추출하기median(mpg1$cty) #cty 중앙값 구하기 1## [1] 17 123456# 방법1mpq1_hd6 &lt;-mpg1 %&gt;% filter(manufacturer==&quot;hyundai&quot;&amp;trans==&quot;auto&quot;&amp;cty&gt;=17)# 방법2mpq1_hd7 &lt;-filter(mpg1,manufacturer==&quot;hyundai&quot;&amp;trans==&quot;auto&quot;&amp;cty&gt;=17)# 방법3mpq1_hd8 &lt;-mpg1 %&gt;% filter(manufacturer==&quot;hyundai&quot;&amp;trans==&quot;auto&quot;&amp;cty&gt;=median(mpg1$cty)) 2.5. 복수 조건 중 하나라도 충족하는 데이터 추출12345678910#mpg1에서 일본 자동차들의 데이터만 추출해서 새로운 객체에 입력하기# 방법1mpg1_j1 &lt;-mpg1 %&gt;% filter(manufacturer==&quot;honda&quot;|manufacturer==&quot;nissan&quot;| manufacturer==&quot;subaru&quot;|manufacturer==&quot;toyota&quot;)# 방법2mpg1_j2 &lt;-filter(mpg1,manufacturer==&quot;honda&quot;|manufacturer==&quot;nissan&quot;| manufacturer==&quot;subaru&quot;|manufacturer==&quot;toyota&quot;)# 방법3mpg1_j3 &lt;-mpg1 %&gt;% filter(manufacturer %in% c(&quot;honda&quot;,&quot;nissan&quot;,&quot;subaru&quot;,&quot;toyota&quot;)) shift+\\ &#x3D; ‘|’: 여러 조건 중 하나만 충족되면 조건에 해당하는 데이터를 모두 추출 ‘%in% c()’: c()안에 있는 것을 모두 포함한다. 2.6. 열을 추출한 후에 조건에 맞는행을 추출하기123# mpg1에서 manufactrer,cty 열을 추출한 후에 manufacturer가 hyundai인 자동차 중에 cty가 전체 평균 이상인 데이터를 추출해서 새로운 객체 mpg1_hd9에 입력한다.mean(mpg1$cty) #cty 평균 구하기 1## [1] 16.85897 123mpg1_hd9 &lt;-mpg1 %&gt;% #새 객체에 입력 select(manufacturer,cty) %&gt;% #2개 변수 추출 filter(manufacturer==&quot;hyundai&quot;&amp;cty&gt;=16.85897) #조건부여해서 행 추출 6단원 mutate()1. 1개의 파생변수 만들기1234567# mpg1에는 cty(도시에서의 연비)와 hwy(고속도로에서의 연비) 변수가 있습니다. # mpg1에 두 변수를 합친 total 변수를 만들어서 새 객체 mpg2에 입력하빈다.mpg2 &lt;-mpg1 %&gt;% mutate(total=cty+hwy)str(mpg2) 1234567## &#x27;data.frame&#x27;: 234 obs. of 6 variables:## $ manufacturer: chr &quot;audi&quot; &quot;audi&quot; &quot;audi&quot; &quot;audi&quot; ...## $ trans : chr &quot;auto&quot; &quot;manual&quot; &quot;manual&quot; &quot;auto&quot; ...## $ drv : chr &quot;f&quot; &quot;f&quot; &quot;f&quot; &quot;f&quot; ...## $ cty : int 18 21 20 21 16 18 18 18 16 20 ...## $ hwy : int 29 29 31 30 26 26 27 26 25 28 ...## $ total : int 47 50 51 51 42 44 45 44 41 48 ... 2. 복수의 파생변수 만들기1234567# total 변수(cty+hwy)와 mean 변수((cty+hwy)/2)를 동시에 만들어 새로운 객체 mpg3에 입력한다.mpg3 &lt;- mpg1 %&gt;% mutate(total=cty+hwy, mean=(cty+hwy)/2) #mean=(cty+hwy)/2는 total1/2로 써되 됨.str(mpg3) 12345678## &#x27;data.frame&#x27;: 234 obs. of 7 variables:## $ manufacturer: chr &quot;audi&quot; &quot;audi&quot; &quot;audi&quot; &quot;audi&quot; ...## $ trans : chr &quot;auto&quot; &quot;manual&quot; &quot;manual&quot; &quot;auto&quot; ...## $ drv : chr &quot;f&quot; &quot;f&quot; &quot;f&quot; &quot;f&quot; ...## $ cty : int 18 21 20 21 16 18 18 18 16 20 ...## $ hwy : int 29 29 31 30 26 26 27 26 25 28 ...## $ total : int 47 50 51 51 42 44 45 44 41 48 ...## $ mean : num 23.5 25 25.5 25.5 21 22 22.5 22 20.5 24 ... 3. 강의 내용1glimpse(iris) # glimpse()=str(): 데이터 미리보기 1234567## Rows: 150## Columns: 5## $ Sepal.Length &lt;dbl&gt; 5.1, 4.9, 4.7, 4.6, 5.0, 5.4, 4.6, 5.0, 4.4, 4.9, 5.4, 4.…## $ Sepal.Width &lt;dbl&gt; 3.5, 3.0, 3.2, 3.1, 3.6, 3.9, 3.4, 3.4, 2.9, 3.1, 3.7, 3.…## $ Petal.Length &lt;dbl&gt; 1.4, 1.4, 1.3, 1.5, 1.4, 1.7, 1.4, 1.5, 1.4, 1.5, 1.5, 1.…## $ Petal.Width &lt;dbl&gt; 0.2, 0.2, 0.2, 0.2, 0.2, 0.4, 0.3, 0.2, 0.2, 0.1, 0.2, 0.…## $ Species &lt;fct&gt; setosa, setosa, setosa, setosa, setosa, setosa, setosa, s… 123iris %&gt;% # Species, setosa,versicolor filter(Species == &quot;setosa&quot;) 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051## Sepal.Length Sepal.Width Petal.Length Petal.Width Species## 1 5.1 3.5 1.4 0.2 setosa## 2 4.9 3.0 1.4 0.2 setosa## 3 4.7 3.2 1.3 0.2 setosa## 4 4.6 3.1 1.5 0.2 setosa## 5 5.0 3.6 1.4 0.2 setosa## 6 5.4 3.9 1.7 0.4 setosa## 7 4.6 3.4 1.4 0.3 setosa## 8 5.0 3.4 1.5 0.2 setosa## 9 4.4 2.9 1.4 0.2 setosa## 10 4.9 3.1 1.5 0.1 setosa## 11 5.4 3.7 1.5 0.2 setosa## 12 4.8 3.4 1.6 0.2 setosa## 13 4.8 3.0 1.4 0.1 setosa## 14 4.3 3.0 1.1 0.1 setosa## 15 5.8 4.0 1.2 0.2 setosa## 16 5.7 4.4 1.5 0.4 setosa## 17 5.4 3.9 1.3 0.4 setosa## 18 5.1 3.5 1.4 0.3 setosa## 19 5.7 3.8 1.7 0.3 setosa## 20 5.1 3.8 1.5 0.3 setosa## 21 5.4 3.4 1.7 0.2 setosa## 22 5.1 3.7 1.5 0.4 setosa## 23 4.6 3.6 1.0 0.2 setosa## 24 5.1 3.3 1.7 0.5 setosa## 25 4.8 3.4 1.9 0.2 setosa## 26 5.0 3.0 1.6 0.2 setosa## 27 5.0 3.4 1.6 0.4 setosa## 28 5.2 3.5 1.5 0.2 setosa## 29 5.2 3.4 1.4 0.2 setosa## 30 4.7 3.2 1.6 0.2 setosa## 31 4.8 3.1 1.6 0.2 setosa## 32 5.4 3.4 1.5 0.4 setosa## 33 5.2 4.1 1.5 0.1 setosa## 34 5.5 4.2 1.4 0.2 setosa## 35 4.9 3.1 1.5 0.2 setosa## 36 5.0 3.2 1.2 0.2 setosa## 37 5.5 3.5 1.3 0.2 setosa## 38 4.9 3.6 1.4 0.1 setosa## 39 4.4 3.0 1.3 0.2 setosa## 40 5.1 3.4 1.5 0.2 setosa## 41 5.0 3.5 1.3 0.3 setosa## 42 4.5 2.3 1.3 0.3 setosa## 43 4.4 3.2 1.3 0.2 setosa## 44 5.0 3.5 1.6 0.6 setosa## 45 5.1 3.8 1.9 0.4 setosa## 46 4.8 3.0 1.4 0.3 setosa## 47 5.1 3.8 1.6 0.2 setosa## 48 4.6 3.2 1.4 0.2 setosa## 49 5.3 3.7 1.5 0.2 setosa## 50 5.0 3.3 1.4 0.2 setosa 123456iris %&gt;% # Species, setosa,versicolor filter(Species !=&quot;virginica&quot;) %&gt;% select(Sepal.Length,Sepal.Width) %&gt;% filter(Sepal.Length &gt; 5.0) %&gt;% mutate(total = Sepal.Length + Sepal.Width) %&gt;% glimpse()-&gt;data4 12345## Rows: 69## Columns: 3## $ Sepal.Length &lt;dbl&gt; 5.1, 5.4, 5.4, 5.8, 5.7, 5.4, 5.1, 5.7, 5.1, 5.4, 5.1, 5.…## $ Sepal.Width &lt;dbl&gt; 3.5, 3.9, 3.7, 4.0, 4.4, 3.9, 3.5, 3.8, 3.8, 3.4, 3.7, 3.…## $ total &lt;dbl&gt; 8.6, 9.3, 9.1, 9.8, 10.1, 9.3, 8.6, 9.5, 8.9, 8.8, 8.8, 8… 12345iris %&gt;% # Species, setosa,versicolor filter(Species !=&quot;virginica&quot; &amp; Sepal.Length &gt; 5.0) %&gt;% select(Sepal.Length,Sepal.Width) %&gt;% mutate(total = Sepal.Length + Sepal.Width) %&gt;% glimpse()-&gt;data4 12345## Rows: 69## Columns: 3## $ Sepal.Length &lt;dbl&gt; 5.1, 5.4, 5.4, 5.8, 5.7, 5.4, 5.1, 5.7, 5.1, 5.4, 5.1, 5.…## $ Sepal.Width &lt;dbl&gt; 3.5, 3.9, 3.7, 4.0, 4.4, 3.9, 3.5, 3.8, 3.8, 3.4, 3.7, 3.…## $ total &lt;dbl&gt; 8.6, 9.3, 9.1, 9.8, 10.1, 9.3, 8.6, 9.5, 8.9, 8.8, 8.8, 8… 7단원 group_by(),summarise(),n() 집단별 통계량 : ‘집단으로 쪼개고(split), 집단별로 적용하고(apply), 결과를 합쳐서(combine)’ 분석하는 방식 group by 와 summarise()는 함께간다. 비교를 해야 데이터가 의미가 있음 1. 집단 분류 group_by() group_by() 함수의 ()안에 ‘범주형 변수’의 이름을 적으면 행을 범주별로 분류한다. ex. mpg1의 trans 변수는 auto와 manual 2개 범주로 구성 group_by(trans)를 하면 모든 행을 auto와 manual로 분류함. 2. 집단의 통계 구하기 summarise() 집단별로 통계값을 구할 때 사용하는 함수. 1mpg1 %&gt;% summarise(m=mean(cty)) 12## m## 1 16.85897 1mean(mpg1$cty) 1## [1] 16.85897 1mpg1 %&gt;% summarise(m=mean(cty),s=sum(cty),med=median(cty)) 12## m s med## 1 16.85897 3945 17 1mpg1 %&gt;% summarise(mean(cty),sum(cty),median(cty)) # 변수 이름 미지정정 12## mean(cty) sum(cty) median(cty)## 1 16.85897 3945 17 3. 집단으로 분류해서 집단별 통계 구하기3.1. 1개 변수를 집단 분류해서 통계 구하기: group_by(변수)+summarise 데이터를 집단으로 분류한 후, 집단별로 통계를 구할 수 있음. 1234# 방법1mpg1 %&gt;% group_by(trans) %&gt;% # auto와 manual 두 개의 집단으로 분류 summarise(m=mean(cty)) # 집단별로 cty 평균을 계산함 12345## # A tibble: 2 × 2## trans m## &lt;chr&gt; &lt;dbl&gt;## 1 auto 16.0## 2 manual 18.7 1234# 방법2mpg1 %&gt;% filter(trans==&quot;auto&quot;) %&gt;% summarise(m=mean(cty)) 12## m## 1 15.96815 123mpg1 %&gt;% filter(trans==&quot;manual&quot;) %&gt;% summarise(m=mean(cty)) 12## m## 1 18.67532 3.2. 복수 변수를 집단 분류해서 통계 구하기: group_by(변수1,변수2,…)+summarise123mpg1 %&gt;% filter(trans==&quot;auto&quot;&amp;drv==&quot;4&quot;) %&gt;% summarise(m=mean(cty)) 12## m## 1 13.85333 1234567# 주의!!! trans 변수의 범주를 기준으로 분류한 후에 다시 trans의 범주별로 drv의 범주를 분류하는 것이므로 group_by(trans,drv)라고 하면 됨.# 만약 group_by(drv,trans)로 하면 drv를 상위집단으로 해서 먼저 범주별로 분류하고, 다시 drv 범주별로 trans의 범주를 분류합니다!!!!!# 어느 변수를 상위집단으로 놓느냐에 따라 결과가 바뀜mpg1 %&gt;% group_by(trans,drv) %&gt;% summarise(m=mean(cty)) 12## `summarise()` has grouped output by &#x27;trans&#x27;. You can override using the## `.groups` argument. 12345678910## # A tibble: 6 × 3## # Groups: trans [2]## trans drv m## &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt;## 1 auto 4 13.9## 2 auto f 19.1## 3 auto r 13.3## 4 manual 4 15.6## 5 manual f 21.3## 6 manual r 15.8 123mpg1 %&gt;% group_by(drv,trans) %&gt;% summarise(m=mean(cty)) 12## `summarise()` has grouped output by &#x27;drv&#x27;. You can override using the `.groups`## argument. 12345678910## # A tibble: 6 × 3## # Groups: drv [3]## drv trans m## &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt;## 1 4 auto 13.9## 2 4 manual 15.6## 3 f auto 19.1## 4 f manual 21.3## 5 r auto 13.3## 6 r manual 15.8 4. 집단별 빈도와 비율 구하기4.1. 분류 집단별 데이터 빈도 구하기:group_by(변수)+summarise(n()함수) ‘n()’: 집단의 데이터 숫자를 세어 빈도를 알려주는 함수. 123mpg1 %&gt;% group_by(trans) %&gt;% summarise(n=n()) 12345## # A tibble: 2 × 2## trans n## &lt;chr&gt; &lt;int&gt;## 1 auto 157## 2 manual 77 1234mpg1 %&gt;% group_by(trans,drv) %&gt;% #2개 변수로 집단 분류 summarise(n=n(), #집단별로 빈도 구하기 m=mean(cty)) #집단별로 평균 구하기 12## `summarise()` has grouped output by &#x27;trans&#x27;. You can override using the## `.groups` argument. 12345678910## # A tibble: 6 × 4## # Groups: trans [2]## trans drv n m## &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;dbl&gt;## 1 auto 4 75 13.9## 2 auto f 65 19.1## 3 auto r 17 13.3## 4 manual 4 28 15.6## 5 manual f 41 21.3## 6 manual r 8 15.8 4.2. 분류한 집단별 빈도와 비율 구하기:group_by()+summarise(n()) + mutate()의 조합12345mpg1 %&gt;% group_by(trans) %&gt;% # trans 범주로 구분 summarise(n=n()) %&gt;% # trans 범주별 데이터 빈도 구하기 mutate(total=sum(n), # trans 범주별 빈도의 총계 구하기 pct=n/total*100) # trans 범주별 비율 구하기 12345## # A tibble: 2 × 4## trans n total pct## &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt;## 1 auto 157 234 67.1## 2 manual 77 234 32.9 5. 강의 내용123456mpg1 %&gt;% group_by(trans) %&gt;% summarise(avg = mean(cty) # 평균 , total = sum(cty) # 총합 , med = median(cty) # 중간값 , count = n()) # n(): group의 사이즈 12345## # A tibble: 2 × 5## trans avg total med count## &lt;chr&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;## 1 auto 16.0 2507 16 157## 2 manual 18.7 1438 18 77 1# 피버테이블을 만듬. 8~11단원은 읽고 넘어가기 mutate() + ifelse() 연속 데이터로 범주변수 만들기 arrange()데이터 정렬하기 10.데이터 결합하기 11.알아두면 유용한 함수","categories":[],"tags":[]},{"title":"R을 이용한 공공데이터 분석_제4장","slug":"R_4","date":"2022-06-19T17:00:00.000Z","updated":"2022-06-23T08:52:10.864Z","comments":true,"path":"2022/06/20/R_4/","link":"","permalink":"https://sallyzmk.github.io/2022/06/20/R_4/","excerpt":"","text":"제4장 데이터 내보내기 &amp; 불러오기1234567# 엑셀 데이터no = c(1, 2, 3, 4, 5)sex = c(&quot;male&quot;, &quot;female&quot;, &quot;male&quot;, &quot;male&quot;, &quot;female&quot;)korean = c(87, 92, 95, 81, 87)exam = data.frame(no, sex, korean)exam 123456## no sex korean## 1 1 male 87## 2 2 female 92## 3 3 male 95## 4 4 male 81## 5 5 female 87 1exam$no[1] 1## [1] 1 1exam$sex[1] 1## [1] &quot;male&quot; 12# 데이터 타입class(exam$sex) 1## [1] &quot;character&quot; 1exam$no 1## [1] 1 2 3 4 5 1class(exam$no) 1## [1] &quot;numeric&quot; 1class(exam$korean) 1## [1] &quot;numeric&quot; 1str(exam) 1234## &#x27;data.frame&#x27;: 5 obs. of 3 variables:## $ no : num 1 2 3 4 5## $ sex : chr &quot;male&quot; &quot;female&quot; &quot;male&quot; &quot;male&quot; ...## $ korean: num 87 92 95 81 87 1. 경로1getwd() 1## [1] &quot;C:/Users/human/Desktop/R_lexctue/source&quot; 12#setwd()?write.csv 1## httpd 도움말 서버를 시작합니다 ... 완료 1write.csv(x = exam, file = &quot;data/temp.csv&quot;) # 위에 만든 엑셀데이터 exam을 temp.csv를 만들어 적어라 바탕화면에 dataset 폴더 생성, exam 객체 저장하세요 데이터 불러오기 1234temp = read.csv(&quot;data/temp.csv&quot;)#temp = read.csv(&quot;dataset/temp.csv&quot;) #직전 상위 파일을 workdirectory로 지정하고 &quot;폴더명/파일명&quot;으로도 불러오기 가능write.csv(x = exam, file = &quot;data/exam.csv&quot;) #데이터프레임을 cvs파일로 저장 R에서 예제파일 exam.csv를 객체 exam으로 입력해서 설명함. (51p) 12exam = read.csv(&quot;data/exam.csv&quot;) #csv파일을 데이터프레임으로 읽기getwd() 1## [1] &quot;C:/Users/human/Desktop/R_lexctue/source&quot; 1?read.csv() #입력 123#install.packages(&quot;ggplot2&quot;) #시각화 해주는 패키지library(ggplot2)economics &lt;- ggplot2::economics 2. 외부 데이터 불러오기 여기서 잠깐 (66p) 실무 패키지 (분량이 많은 데이터를 불러올 때는 read.csv()보다 fread() 함수를 이용하는게 더 좋다.) 12#install.packages(&quot;data.table&quot;)library(data.table) #공식문서 확인 엑셀파일 불러오기123#install.packages(&quot;readxl&quot;)library(readxl)read_excel(&quot;data/student1_xl.xlsx&quot;) 12345## # A tibble: 2 × 4## no sex height weight## &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;## 1 1 male 172 72## 2 2 female 165 62 (3) 설명 (67p) 1read.csv(&quot;data/student1.csv&quot;) 1234## school Korea X X.1## 1 no sex height weight## 2 1 male 172 72## 3 2 female 165 62 1read.csv(&quot;data/student1.csv&quot;, skip = 1) 123## no sex height weight## 1 1 male 172 72## 2 2 female 165 62 (4) 설명_엑셀 파일에 있는 복수의 시트에서 특정시트 불러오기 (68p) 1read_excel(&quot;data/student1_xl.xlsx&quot;) # 첫번째 시트 불러오기 12345## # A tibble: 2 × 4## no sex height weight## &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;## 1 1 male 172 72## 2 2 female 165 62 1read_excel(&quot;data/student1_xl.xlsx&quot;, sheet =2) # 두번째 시트 불러오기 12345## # A tibble: 2 × 4## no sex `100M` Lift## &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;## 1 1 male 13.2 12## 2 2 female 17.8 5 txt파일 불러오기 (69p)1#read.table() SPSS파일 불러오기 (73p)1234#install.packages(&quot;foreign&quot;)library(foreign)?read.spss() #.sav 파일 읽어주는 함수student &lt;- read.spss(&quot;data/student.sav&quot;) 1## re-encoding from CP51949 1as.data.frame(student) #형변환 (리스트를 데이터프레임으로 변경) 123## no sex height weight## 1 1 male 172 72## 2 2 female 165 62","categories":[],"tags":[]},{"title":"R을 이용한 공공데이터 분석_제3장","slug":"R_3","date":"2022-06-19T16:00:00.000Z","updated":"2022-06-23T08:52:10.880Z","comments":true,"path":"2022/06/20/R_3/","link":"","permalink":"https://sallyzmk.github.io/2022/06/20/R_3/","excerpt":"","text":"제3장 데이터의 구조1단원 용어의 이해1. 변수 변수: ‘변하는 수’, ‘자료들을 넣어두는 창고’ 2. 함수 함수: 데이터를 입력하면 정해진 공식에 따라 특정 과정을 수행하는 기능 3. 패키지 패키지: 여러 함수가 들어있는 포장상자. 함수를 사용하기 위해 패키지를 다운, 실행시켜야함. install.packages() library() 2단원 데이터 구조 (42p)1. 벡터 벡터 (vector): 1차원의 집합이며, 같은 속성으로만 묶인다 1.1. 숫자형 벡터: 실수로(소수점, 정수 무리수 등 모든 수) 4칙연산 가능, 연속형 데이터1.2. 정수형 벡터: 숫자형 벡터 中 정수(-1,0,1)로만 구성, 이산형 데이터1.3. 문자형 벡터: 연산 불가12char_vector &lt;- c(&quot;Hi&quot;, &quot;Hello&quot;)char_vector[2] # 숫자 1,2 인덱스 1## [1] &quot;Hello&quot; 12#class() 타입을 물어보는 함수class(char_vector) # 벡터의 유형을 알 수 있다. 1## [1] &quot;character&quot; 1#character=char=문자 1.4. 범주형 벡터 데이터가 일정 범위나 기준에 따라 유형(성별, 연령대)으로 분류되는 벡터, 이 때 유형을 레벨(level)이라고 한다 1.4.1. 명목형 자료형 벡터 : 데이터 값 비교 불가 (책X)123locaiton_vector &lt;- c(&quot;서울&quot;, &quot;인천&quot;, &quot;부산&quot;)factor_location_vector &lt;- factor(locaiton_vector)factor_location_vector 12## [1] 서울 인천 부산## Levels: 부산 서울 인천 1class(factor_location_vector) # 비서열 1## [1] &quot;factor&quot; 1help(factor) 1## httpd 도움말 서버를 시작합니다 ... 완료 1.4.2. 순서형 자료형 벡터 : 데이터 값 순서 지정 (책X)12345678temperature_factor &lt;- c(&quot;기온높음&quot;, &quot;기온보통&quot;, &quot;기온낮음&quot;, &quot;기온높음&quot;, &quot;기온보통&quot;, &quot;기온보통&quot;)temperature_factor 1## [1] &quot;기온높음&quot; &quot;기온보통&quot; &quot;기온낮음&quot; &quot;기온높음&quot; &quot;기온보통&quot; &quot;기온보통&quot; 123456factor_temperature_factor &lt;- factor(temperature_factor, ordered = TRUE, levels = c(&quot;기온보통&quot;, &quot;기온낮음&quot;, &quot;기온높음&quot;))factor_temperature_factor 12## [1] 기온높음 기온보통 기온낮음 기온높음 기온보통 기온보통## Levels: 기온보통 &lt; 기온낮음 &lt; 기온높음 1class(factor_temperature_factor) # 서열 1## [1] &quot;ordered&quot; &quot;factor&quot; 1class(factor_location_vector) # 비서열 1## [1] &quot;factor&quot; 1.5. 논리형 벡터: 참(TRUE),거짓(FALSE) 논리값으로 구성된 베이터. 논리값은 따옴표 없이 대문자로 쓴다12logical_vector &lt;- c(TRUE, FALSE)logical_vector 1## [1] TRUE FALSE 1class(logical_vector) 1## [1] &quot;logical&quot; 1.6. 벡터 사용 주의 사항 벡터는 함상 범주가 같아야한다. 만약 속성이 서로 다르다면 상위 속성으로 강제변환 되며 이를 Coercion이라 부름. (논리형 ☞ 숫자형 ☞ 문자형) 12a &lt;- c(1,2) #a의 유형은 숫자class(a) 1## [1] &quot;numeric&quot; 12b &lt;- c(1,2,&quot;hello&quot;,TRUE, &quot;TRUE&quot;)class(b) #b의 유형은 문자 1## [1] &quot;character&quot; 1b 1## [1] &quot;1&quot; &quot;2&quot; &quot;hello&quot; &quot;TRUE&quot; &quot;TRUE&quot; 12c &lt;- c(1,2,TRUE, FALSE)class(c) #c의 유형은 숫자 1## [1] &quot;numeric&quot; 1c #문자가 아니기 때문에 &quot;&quot;표시가 없음 1## [1] 1 2 1 0 2. 행렬 행렬 (Matrix): 행과 열을 갖는 2차원의 구조로, 같은 속성으로만 묶인다 행은 가로 데이터, 열은 세로 데이터 행은 데이터프레임에 들어있는 개별 데이터. R에서는 행을 관측치(observation 약칭 obs.)라고 표현한다. 열은 벡터들로 구성&gt;데이터의 속성을 의미 데이터 분석은 기본적으로 열을 구성하는 변수들의 특성이나 변수 간 관계 등을 알아보는 것. 3. 데이터프레임 데이터프레임 (data.frame): 행과 열을 갖는 2차원의 구조로, 다른 속성도 묶인다 1234567# - 엑셀 데이터no = c(1, 2, 3, 4, 5)sex = c(&quot;male&quot;, &quot;female&quot;, &quot;male&quot;, &quot;male&quot;, &quot;female&quot;)korean = c(87, 92, 95, 81, 87)exam = data.frame(no, sex, korean)exam 123456## no sex korean## 1 1 male 87## 2 2 female 92## 3 3 male 95## 4 4 male 81## 5 5 female 87 1exam$no[1] 1## [1] 1 1exam$sex[1] 1## [1] &quot;male&quot; 12# 데이터 타입class(exam$sex) 1## [1] &quot;character&quot; 1exam$no 1## [1] 1 2 3 4 5 1class(exam$no) 1## [1] &quot;numeric&quot; 1class(exam$korean) 1## [1] &quot;numeric&quot; 1str(exam) 1234## &#x27;data.frame&#x27;: 5 obs. of 3 variables:## $ no : num 1 2 3 4 5## $ sex : chr &quot;male&quot; &quot;female&quot; &quot;male&quot; &quot;male&quot; ...## $ korean: num 87 92 95 81 87 4. 리스트 리스트(list): 가장 광범위한 객체로써, 벡터, 행렬, 데이터프레임, 리스트도 묶는다","categories":[],"tags":[]},{"title":"노션 6.20 강의(R)","slug":"6_20_class_note(R)","date":"2022-06-19T15:00:00.000Z","updated":"2022-06-24T05:01:19.423Z","comments":true,"path":"2022/06/20/6_20_class_note(R)/","link":"","permalink":"https://sallyzmk.github.io/2022/06/20/6_20_class_note(R)/","excerpt":"","text":"오전강의 (R 벡터, 기본 함수)Rmd 파일을 갓 생성하면 → 이렇게 나옴 아래처럼 바꿔줘야함 절대 건들지 말 것→ 변수 저장은 a &#x3D; 1 b&#x3D; 1~~~ ctrl + enter 변수 삭제는 빗자루 iris는 내장데이터 c() 컴바인combin 묶어 주다 (c 리스트) class() # 타입을 물어보는 함수 남이 만든 함수를 쓰려면, 입력 조건을 확인해야 됨. help: 도움말, #?str: help과 같음, 도움말 범주형 벡터는 비었음 못들음…!! 49p~54p 비었음 못들음…!! 49p~54p 비었음 못들음…!! 49p~54p 데이터 프레임 생성 오후 강의 (데이터 활용)분석용 데이터 받는 방법https://www.hannarae.net/data/d_room.php?code&#x3D;data01&amp;category&#x3D;&amp;searchopt&#x3D;subject&amp;searchkey&#x3D;R��+�̿���+����������+�м�&amp;x&#x3D;31&amp;y&#x3D;19 R을 이용한 공공데이터 분석 검색 압축 해제 후, 서울특별시~~ 삭제(용량이 너무 커서 깃허브에 안 올라감. 최대 100 메가) data에 있는 데이터를 source로 옮겨서 사용하면 됨. 데이터 내보내기 &amp; 불러오기 Rmd 파일이 아닌 R파일에서 실행 자세한건 day0620.Rmd에 필기 ctrl+shift+k &#x3D; knitwrite.csv(exam)write.table(x, file &#x3D; “”, append &#x3D; FALSE, quote &#x3D; TRUE, sep &#x3D; “ “,eol &#x3D; “\\n”, na &#x3D; “NA”, dec &#x3D; “.”, row.names &#x3D; TRUE,col.names &#x3D; TRUE, qmethod &#x3D; c(“escape”, “double”),fileEncoding &#x3D; “”) 여기서 x에는 매트릭스 또는 데이터 프레임만 들어간다. 고로 데이터 exam을 넣는다 getwd() : 현재 작업디렉토리 확인setwd() : 새로운 작업디렉토리 지정dir() : 지정된 경로의 하위 폴더 및 파일의 이름을 문자형 벡터로 반환read.csv() : csv파일을 데이터프레임으로 읽기write.csv() : 데이터프레임을 cvs파일로 저장https://thebook.io/006723/ch04/02/01/ 60p~62p 내장 메모리 블로그에 R 이미지 업로드 방법 R Markdown 이하 삭제 아래가 Rmd 기본, 저장 해 놓고 항상 복붙 123output: html_document: keep_md: true 12345678910---title: &quot;test&quot;output: html_document: keep_md: truedate: &#x27;2022-06-20&#x27;---```&#123;r setup, include=FALSE&#125;knitr::opts_chunk$set(echo = TRUE) &#96;&#96;&#96; 데이터와 Rmd 파일의 위치가 일치해야 시각화가 됨. knit 실행 &gt; working directory 에 이미지가 생성됨 rmd_0620 안에 있는 사진을 blog로 복붙(images 파일 생성, &gt;rmd_0620 파일 생성) md파일은 _posts 파일로 복붙 hexo server &gt; 경로가 다르기 때문에 오류 나는 것 blog을 파이참으로 열어서 CSV 파일 확인하기 빈칸에 있던 내용은 삭제 ctrl+V 한 후 source 삭제 hexo에서 이미지 경로 노션을 hexo 블로그에 올리는 법 dddd","categories":[],"tags":[]},{"title":"AI 데이터 플랫폼을 활용한 빅데이터 분석 전문가 과정","slug":"hello-world","date":"2022-06-17T04:52:28.129Z","updated":"2022-06-21T01:59:13.121Z","comments":true,"path":"2022/06/17/hello-world/","link":"","permalink":"https://sallyzmk.github.io/2022/06/17/hello-world/","excerpt":"","text":"강의 필기 모음06.16 강의06.17 강의06.20 강의06.21 강의 어려워도 포기하지 말고 차근차근 잘 해 보자!!","categories":[],"tags":[]}],"categories":[],"tags":[]}